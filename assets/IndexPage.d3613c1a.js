import{c as Ee,h as Ae,d as xc,e as Il,f as Ll,i as Sc,a as Al,j as Ml}from"./dom.b9ee5265.js";import{h as R,P as Cc,r as U,C as jn,D as xt,k as gt,E as li,w as ge,o as Yn,d as We,g as pe,F as en,f as Ft,G as ta,q as Ec,H as kl,T as bc,c as C,I as Ws,J as st,K as ln,L as Ge,M as ia,N as wc,O as Rc,A as vs,Q as Tc,i as Cs,R as Ic,S as Pl,U as Ol,V as Fl,j as Lc,W as Ln,n as Dl,X as Ac,Y as Mc,Z as pn,$ as Ut,a0 as kc,a1 as Vi,a2 as Pc,a3 as cr,a4 as Oc,a5 as dr,e as Ht,l as Bl,a as Fc,z as Dc,t as we,u as Fe,v as Z,x as ee,a6 as Re,a7 as hr,a8 as na,a9 as sa,aa as At,ab as Xt,B as Qt,ac as nt}from"./index.db6af741.js";import{v as Bc,g as ys,a as Nl,u as no,b as Nc,c as Vl,d as ql,Q as qt,R as zl,e as Vc,f as qc,h as zc,i as ei}from"./QBtn.2101ff77.js";import{c as Gc,g as Gl,b as Wc,a as Xc,h as jc}from"./scroll.e4267933.js";const Yc=R("div",{class:"q-space"});var es=Ee({name:"QSpace",setup(){return()=>Yc}});function Es(){if(window.getSelection!==void 0){const i=window.getSelection();i.empty!==void 0?i.empty():i.removeAllRanges!==void 0&&(i.removeAllRanges(),Cc.is.mobile!==!0&&i.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}const Wl={target:{default:!0},noParentEvent:Boolean,contextMenu:Boolean};function Xl({showing:i,avoidEmit:e,configureAnchorEl:t}){const{props:n,proxy:s,emit:r}=pe(),o=U(null);let a=null;function l(f){return o.value===null?!1:f===void 0||f.touches===void 0||f.touches.length<=1}const u={};t===void 0&&(Object.assign(u,{hide(f){s.hide(f)},toggle(f){s.toggle(f),f.qAnchorHandled=!0},toggleKey(f){jn(f,13)===!0&&u.toggle(f)},contextClick(f){s.hide(f),xt(f),gt(()=>{s.show(f),f.qAnchorHandled=!0})},prevent:xt,mobileTouch(f){if(u.mobileCleanup(f),l(f)!==!0)return;s.hide(f),o.value.classList.add("non-selectable");const g=f.target;li(u,"anchor",[[g,"touchmove","mobileCleanup","passive"],[g,"touchend","mobileCleanup","passive"],[g,"touchcancel","mobileCleanup","passive"],[o.value,"contextmenu","prevent","notPassive"]]),a=setTimeout(()=>{a=null,s.show(f),f.qAnchorHandled=!0},300)},mobileCleanup(f){o.value.classList.remove("non-selectable"),a!==null&&(clearTimeout(a),a=null),i.value===!0&&f!==void 0&&Es()}}),t=function(f=n.contextMenu){if(n.noParentEvent===!0||o.value===null)return;let g;f===!0?s.$q.platform.is.mobile===!0?g=[[o.value,"touchstart","mobileTouch","passive"]]:g=[[o.value,"mousedown","hide","passive"],[o.value,"contextmenu","contextClick","notPassive"]]:g=[[o.value,"click","toggle","passive"],[o.value,"keyup","toggleKey","passive"]],li(u,"anchor",g)});function c(){en(u,"anchor")}function d(f){for(o.value=f;o.value.classList.contains("q-anchor--skip");)o.value=o.value.parentNode;t()}function h(){if(n.target===!1||n.target===""||s.$el.parentNode===null)o.value=null;else if(n.target===!0)d(s.$el.parentNode);else{let f=n.target;if(typeof n.target=="string")try{f=document.querySelector(n.target)}catch{f=void 0}f!=null?(o.value=f.$el||f,t()):(o.value=null,console.error(`Anchor: target "${n.target}" not found`))}}return ge(()=>n.contextMenu,f=>{o.value!==null&&(c(),t(f))}),ge(()=>n.target,()=>{o.value!==null&&c(),h()}),ge(()=>n.noParentEvent,f=>{o.value!==null&&(f===!0?c():t())}),Yn(()=>{h(),e!==!0&&n.modelValue===!0&&o.value===null&&r("update:modelValue",!1)}),We(()=>{a!==null&&clearTimeout(a),c()}),{anchorEl:o,canShow:l,anchorEvents:u}}function jl(i,e){const t=U(null);let n;function s(a,l){const u=`${l!==void 0?"add":"remove"}EventListener`,c=l!==void 0?l:n;a!==window&&a[u]("scroll",c,Ft.passive),window[u]("scroll",c,Ft.passive),n=l}function r(){t.value!==null&&(s(t.value),t.value=null)}const o=ge(()=>i.noParentEvent,()=>{t.value!==null&&(r(),e())});return We(o),{localScrollTarget:t,unconfigureScrollTarget:r,changeScrollEvent:s}}const Xs={modelValue:{type:Boolean,default:null},"onUpdate:modelValue":[Function,Array]},js=["beforeShow","show","beforeHide","hide"];function Ys({showing:i,canShow:e,hideOnRouteChange:t,handleShow:n,handleHide:s,processOnMount:r}){const o=pe(),{props:a,emit:l,proxy:u}=o;let c;function d(_){i.value===!0?g(_):h(_)}function h(_){if(a.disable===!0||_!==void 0&&_.qAnchorHandled===!0||e!==void 0&&e(_)!==!0)return;const v=a["onUpdate:modelValue"]!==void 0;v===!0&&(l("update:modelValue",!0),c=_,gt(()=>{c===_&&(c=void 0)})),(a.modelValue===null||v===!1)&&f(_)}function f(_){i.value!==!0&&(i.value=!0,l("beforeShow",_),n!==void 0?n(_):l("show",_))}function g(_){if(a.disable===!0)return;const v=a["onUpdate:modelValue"]!==void 0;v===!0&&(l("update:modelValue",!1),c=_,gt(()=>{c===_&&(c=void 0)})),(a.modelValue===null||v===!1)&&m(_)}function m(_){i.value!==!1&&(i.value=!1,l("beforeHide",_),s!==void 0?s(_):l("hide",_))}function p(_){a.disable===!0&&_===!0?a["onUpdate:modelValue"]!==void 0&&l("update:modelValue",!1):_===!0!==i.value&&(_===!0?f:m)(c)}ge(()=>a.modelValue,p),t!==void 0&&Bc(o)===!0&&ge(()=>u.$route.fullPath,()=>{t.value===!0&&i.value===!0&&g()}),r===!0&&Yn(()=>{p(a.modelValue)});const y={show:h,hide:g,toggle:d};return Object.assign(u,y),y}let bi=[],An=[];function Yl(i){An=An.filter(e=>e!==i)}function $c(i){Yl(i),An.push(i)}function ra(i){Yl(i),An.length===0&&bi.length!==0&&(bi[bi.length-1](),bi=[])}function so(i){An.length===0?i():bi.push(i)}function Kc(i){bi=bi.filter(e=>e!==i)}let Uc=1,Hc=document.body;function Zc(i,e){const t=document.createElement("div");if(t.id=e!==void 0?`q-portal--${e}--${Uc++}`:i,ta.globalNodes!==void 0){const n=ta.globalNodes.class;n!==void 0&&(t.className=n)}return Hc.appendChild(t),t}function Jc(i){i.remove()}const tn=[];function Qc(i){return tn.find(e=>e.contentEl!==null&&e.contentEl.contains(i))}function $l(i,e){do{if(i.$options.name==="QMenu"){if(i.hide(e),i.$props.separateClosePopup===!0)return ys(i)}else if(i.__qPortal===!0){const t=ys(i);return t!==void 0&&t.$options.name==="QPopupProxy"?(i.hide(e),t):i}i=ys(i)}while(i!=null)}function ed(i,e,t){for(;t!==0&&i!==void 0&&i!==null;){if(i.__qPortal===!0){if(t--,i.$options.name==="QMenu"){i=$l(i,e);continue}i.hide(e)}i=ys(i)}}function td(i){for(i=i.parent;i!=null;){if(i.type.name==="QGlobalDialog")return!0;if(i.type.name==="QDialog"||i.type.name==="QMenu")return!1;i=i.parent}return!1}function ro(i,e,t,n){const s=U(!1),r=U(!1);let o=null;const a={},l=n==="dialog"&&td(i);function u(d){if(d===!0){ra(a),r.value=!0;return}r.value=!1,s.value===!1&&(l===!1&&o===null&&(o=Zc(!1,n)),s.value=!0,tn.push(i.proxy),$c(a))}function c(d){if(r.value=!1,d!==!0)return;ra(a),s.value=!1;const h=tn.indexOf(i.proxy);h!==-1&&tn.splice(h,1),o!==null&&(Jc(o),o=null)}return Ec(()=>{c(!0)}),i.proxy.__qPortal=!0,kl(i.proxy,"contentEl",()=>e.value),{showPortal:u,hidePortal:c,portalIsActive:s,portalIsAccessible:r,renderPortal:()=>l===!0?t():s.value===!0?[R(bc,{to:o},t())]:void 0}}const oo={transitionShow:{type:String,default:"fade"},transitionHide:{type:String,default:"fade"},transitionDuration:{type:[String,Number],default:300}};function ao(i,e=()=>{},t=()=>{}){return{transitionProps:C(()=>{const n=`q-transition--${i.transitionShow||e()}`,s=`q-transition--${i.transitionHide||t()}`;return{appear:!0,enterFromClass:`${n}-enter-from`,enterActiveClass:`${n}-enter-active`,enterToClass:`${n}-enter-to`,leaveFromClass:`${s}-leave-from`,leaveActiveClass:`${s}-leave-active`,leaveToClass:`${s}-leave-to`}}),transitionStyle:C(()=>`--q-transition-duration: ${i.transitionDuration}ms`)}}function lo(){let i;const e=pe();function t(){i=void 0}return Ws(t),We(t),{removeTick:t,registerTick(n){i=n,gt(()=>{i===n&&(Nl(e)===!1&&i(),i=void 0)})}}}function uo(){let i=null;const e=pe();function t(){i!==null&&(clearTimeout(i),i=null)}return Ws(t),We(t),{removeTimeout:t,registerTimeout(n,s){t(),Nl(e)===!1&&(i=setTimeout(n,s))}}}const{notPassiveCapture:bs}=Ft,Li=[];function ws(i){const e=i.target;if(e===void 0||e.nodeType===8||e.classList.contains("no-pointer-events")===!0)return;let t=tn.length-1;for(;t>=0;){const n=tn[t].$;if(n.type.name!=="QDialog")break;if(n.props.seamless!==!0)return;t--}for(let n=Li.length-1;n>=0;n--){const s=Li[n];if((s.anchorEl.value===null||s.anchorEl.value.contains(e)===!1)&&(e===document.body||s.innerRef.value!==null&&s.innerRef.value.contains(e)===!1))i.qClickOutside=!0,s.onClickOutside(i);else return}}function Kl(i){Li.push(i),Li.length===1&&(document.addEventListener("mousedown",ws,bs),document.addEventListener("touchstart",ws,bs))}function Rs(i){const e=Li.findIndex(t=>t===i);e>-1&&(Li.splice(e,1),Li.length===0&&(document.removeEventListener("mousedown",ws,bs),document.removeEventListener("touchstart",ws,bs)))}let oa,aa;function Ts(i){const e=i.split(" ");return e.length!==2?!1:["top","center","bottom"].includes(e[0])!==!0?(console.error("Anchor/Self position must start with one of top/center/bottom"),!1):["left","middle","right","start","end"].includes(e[1])!==!0?(console.error("Anchor/Self position must end with one of left/middle/right/start/end"),!1):!0}function Ul(i){return i?!(i.length!==2||typeof i[0]!="number"||typeof i[1]!="number"):!0}const Dr={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};["left","middle","right"].forEach(i=>{Dr[`${i}#ltr`]=i,Dr[`${i}#rtl`]=i});function Is(i,e){const t=i.split(" ");return{vertical:t[0],horizontal:Dr[`${t[1]}#${e===!0?"rtl":"ltr"}`]}}function id(i,e){let{top:t,left:n,right:s,bottom:r,width:o,height:a}=i.getBoundingClientRect();return e!==void 0&&(t-=e[1],n-=e[0],r+=e[1],s+=e[0],o+=e[0],a+=e[1]),{top:t,bottom:r,height:a,left:n,right:s,width:o,middle:n+(s-n)/2,center:t+(r-t)/2}}function nd(i,e,t){let{top:n,left:s}=i.getBoundingClientRect();return n+=e.top,s+=e.left,t!==void 0&&(n+=t[1],s+=t[0]),{top:n,bottom:n+1,height:1,left:s,right:s+1,width:1,middle:s,center:n}}function sd(i){return{top:0,center:i.offsetHeight/2,bottom:i.offsetHeight,left:0,middle:i.offsetWidth/2,right:i.offsetWidth}}function la(i,e,t){return{top:i[t.anchorOrigin.vertical]-e[t.selfOrigin.vertical],left:i[t.anchorOrigin.horizontal]-e[t.selfOrigin.horizontal]}}function Hl(i){if(st.is.ios===!0&&window.visualViewport!==void 0){const a=document.body.style,{offsetLeft:l,offsetTop:u}=window.visualViewport;l!==oa&&(a.setProperty("--q-pe-left",l+"px"),oa=l),u!==aa&&(a.setProperty("--q-pe-top",u+"px"),aa=u)}const{scrollLeft:e,scrollTop:t}=i.el,n=i.absoluteOffset===void 0?id(i.anchorEl,i.cover===!0?[0,0]:i.offset):nd(i.anchorEl,i.absoluteOffset,i.offset);let s={maxHeight:i.maxHeight,maxWidth:i.maxWidth,visibility:"visible"};(i.fit===!0||i.cover===!0)&&(s.minWidth=n.width+"px",i.cover===!0&&(s.minHeight=n.height+"px")),Object.assign(i.el.style,s);const r=sd(i.el);let o=la(n,r,i);if(i.absoluteOffset===void 0||i.offset===void 0)fr(o,n,r,i.anchorOrigin,i.selfOrigin);else{const{top:a,left:l}=o;fr(o,n,r,i.anchorOrigin,i.selfOrigin);let u=!1;if(o.top!==a){u=!0;const c=2*i.offset[1];n.center=n.top-=c,n.bottom-=c+2}if(o.left!==l){u=!0;const c=2*i.offset[0];n.middle=n.left-=c,n.right-=c+2}u===!0&&(o=la(n,r,i),fr(o,n,r,i.anchorOrigin,i.selfOrigin))}s={top:o.top+"px",left:o.left+"px"},o.maxHeight!==void 0&&(s.maxHeight=o.maxHeight+"px",n.height>o.maxHeight&&(s.minHeight=s.maxHeight)),o.maxWidth!==void 0&&(s.maxWidth=o.maxWidth+"px",n.width>o.maxWidth&&(s.minWidth=s.maxWidth)),Object.assign(i.el.style,s),i.el.scrollTop!==t&&(i.el.scrollTop=t),i.el.scrollLeft!==e&&(i.el.scrollLeft=e)}function fr(i,e,t,n,s){const r=t.bottom,o=t.right,a=Gc(),l=window.innerHeight-a,u=document.body.clientWidth;if(i.top<0||i.top+r>l)if(s.vertical==="center")i.top=e[n.vertical]>l/2?Math.max(0,l-r):0,i.maxHeight=Math.min(r,l);else if(e[n.vertical]>l/2){const c=Math.min(l,n.vertical==="center"?e.center:n.vertical===s.vertical?e.bottom:e.top);i.maxHeight=Math.min(r,c),i.top=Math.max(0,c-r)}else i.top=Math.max(0,n.vertical==="center"?e.center:n.vertical===s.vertical?e.top:e.bottom),i.maxHeight=Math.min(r,l-i.top);if(i.left<0||i.left+o>u)if(i.maxWidth=Math.min(o,u),s.horizontal==="middle")i.left=e[n.horizontal]>u/2?Math.max(0,u-o):0;else if(e[n.horizontal]>u/2){const c=Math.min(u,n.horizontal==="middle"?e.middle:n.horizontal===s.horizontal?e.right:e.left);i.maxWidth=Math.min(o,c),i.left=Math.max(0,c-i.maxWidth)}else i.left=Math.max(0,n.horizontal==="middle"?e.middle:n.horizontal===s.horizontal?e.left:e.right),i.maxWidth=Math.min(o,u-i.left)}var ua=Ee({name:"QTooltip",inheritAttrs:!1,props:{...Wl,...Xs,...oo,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{default:"jump-down"},transitionHide:{default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:Ts},self:{type:String,default:"top middle",validator:Ts},offset:{type:Array,default:()=>[14,14],validator:Ul},scrollTarget:{default:void 0},delay:{type:Number,default:0},hideDelay:{type:Number,default:0}},emits:[...js],setup(i,{slots:e,emit:t,attrs:n}){let s,r;const o=pe(),{proxy:{$q:a}}=o,l=U(null),u=U(!1),c=C(()=>Is(i.anchor,a.lang.rtl)),d=C(()=>Is(i.self,a.lang.rtl)),h=C(()=>i.persistent!==!0),{registerTick:f,removeTick:g}=lo(),{registerTimeout:m}=uo(),{transitionProps:p,transitionStyle:y}=ao(i),{localScrollTarget:_,changeScrollEvent:v,unconfigureScrollTarget:S}=jl(i,L),{anchorEl:b,canShow:I,anchorEvents:T}=Xl({showing:u,configureAnchorEl:H}),{show:A,hide:V}=Ys({showing:u,canShow:I,handleShow:Y,handleHide:ie,hideOnRouteChange:h,processOnMount:!0});Object.assign(T,{delayShow:E,delayHide:M});const{showPortal:z,hidePortal:X,renderPortal:D}=ro(o,l,w,"tooltip");if(a.platform.is.mobile===!0){const N={anchorEl:b,innerRef:l,onClickOutside(F){return V(F),F.target.classList.contains("q-dialog__backdrop")&&Ge(F),!0}},$=C(()=>i.modelValue===null&&i.persistent!==!0&&u.value===!0);ge($,F=>{(F===!0?Kl:Rs)(N)}),We(()=>{Rs(N)})}function Y(N){z(),f(()=>{r=new MutationObserver(()=>q()),r.observe(l.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),q(),L()}),s===void 0&&(s=ge(()=>a.screen.width+"|"+a.screen.height+"|"+i.self+"|"+i.anchor+"|"+a.lang.rtl,q)),m(()=>{z(!0),t("show",N)},i.transitionDuration)}function ie(N){g(),X(),B(),m(()=>{X(!0),t("hide",N)},i.transitionDuration)}function B(){r!==void 0&&(r.disconnect(),r=void 0),s!==void 0&&(s(),s=void 0),S(),en(T,"tooltipTemp")}function q(){const N=l.value;b.value===null||!N||Hl({el:N,offset:i.offset,anchorEl:b.value,anchorOrigin:c.value,selfOrigin:d.value,maxHeight:i.maxHeight,maxWidth:i.maxWidth})}function E(N){if(a.platform.is.mobile===!0){Es(),document.body.classList.add("non-selectable");const $=b.value,F=["touchmove","touchcancel","touchend","click"].map(W=>[$,W,"delayHide","passiveCapture"]);li(T,"tooltipTemp",F)}m(()=>{A(N)},i.delay)}function M(N){a.platform.is.mobile===!0&&(en(T,"tooltipTemp"),Es(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),m(()=>{V(N)},i.hideDelay)}function H(){if(i.noParentEvent===!0||b.value===null)return;const N=a.platform.is.mobile===!0?[[b.value,"touchstart","delayShow","passive"]]:[[b.value,"mouseenter","delayShow","passive"],[b.value,"mouseleave","delayHide","passive"]];li(T,"anchor",N)}function L(){if(b.value!==null||i.scrollTarget!==void 0){_.value=Gl(b.value,i.scrollTarget);const N=i.noParentEvent===!0?q:V;v(_.value,N)}}function P(){return u.value===!0?R("div",{...n,ref:l,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",n.class],style:[n.style,y.value],role:"tooltip"},Ae(e.default)):null}function w(){return R(ln,p.value,P)}return We(B),Object.assign(o.proxy,{updatePosition:q}),D}});const Ct={dark:{type:Boolean,default:null}};function Et(i,e){return C(()=>i.dark===null?e.dark.isActive:i.dark)}var ca=Ee({name:"QBar",props:{...Ct,dense:Boolean},setup(i,{slots:e}){const{proxy:{$q:t}}=pe(),n=Et(i,t),s=C(()=>`q-bar row no-wrap items-center q-bar--${i.dense===!0?"dense":"standard"}  q-bar--${n.value===!0?"dark":"light"}`);return()=>R("div",{class:s.value,role:"toolbar"},Ae(e.default))}});const rd={true:"inset",item:"item-inset","item-thumbnail":"item-thumbnail-inset"},gr={xs:2,sm:4,md:8,lg:16,xl:24};var Br=Ee({name:"QSeparator",props:{...Ct,spaced:[Boolean,String],inset:[Boolean,String],vertical:Boolean,color:String,size:String},setup(i){const e=pe(),t=Et(i,e.proxy.$q),n=C(()=>i.vertical===!0?"vertical":"horizontal"),s=C(()=>` q-separator--${n.value}`),r=C(()=>i.inset!==!1?`${s.value}-${rd[i.inset]}`:""),o=C(()=>`q-separator${s.value}${r.value}`+(i.color!==void 0?` bg-${i.color}`:"")+(t.value===!0?" q-separator--dark":"")),a=C(()=>{const l={};if(i.size!==void 0&&(l[i.vertical===!0?"width":"height"]=i.size),i.spaced!==!1){const u=i.spaced===!0?`${gr.md}px`:i.spaced in gr?`${gr[i.spaced]}px`:i.spaced,c=i.vertical===!0?["Left","Right"]:["Top","Bottom"];l[`margin${c[0]}`]=l[`margin${c[1]}`]=u}return l});return()=>R("hr",{class:o.value,style:a.value,"aria-orientation":n.value})}}),wn=Ee({name:"QItemSection",props:{avatar:Boolean,thumbnail:Boolean,side:Boolean,top:Boolean,noWrap:Boolean},setup(i,{slots:e}){const t=C(()=>`q-item__section column q-item__section--${i.avatar===!0||i.side===!0||i.thumbnail===!0?"side":"main"}`+(i.top===!0?" q-item__section--top justify-start":" justify-center")+(i.avatar===!0?" q-item__section--avatar":"")+(i.thumbnail===!0?" q-item__section--thumbnail":"")+(i.noWrap===!0?" q-item__section--nowrap":""));return()=>R("div",{class:t.value},Ae(e.default))}}),co=Ee({name:"QItem",props:{...Ct,...no,tag:{type:String,default:"div"},active:{type:Boolean,default:null},clickable:Boolean,dense:Boolean,insetLevel:Number,tabindex:[String,Number],focused:Boolean,manualFocus:Boolean},emits:["click","keyup"],setup(i,{slots:e,emit:t}){const{proxy:{$q:n}}=pe(),s=Et(i,n),{hasLink:r,linkAttrs:o,linkClass:a,linkTag:l,navigateOnClick:u}=Nc(),c=U(null),d=U(null),h=C(()=>i.clickable===!0||r.value===!0||i.tag==="label"),f=C(()=>i.disable!==!0&&h.value===!0),g=C(()=>"q-item q-item-type row no-wrap"+(i.dense===!0?" q-item--dense":"")+(s.value===!0?" q-item--dark":"")+(r.value===!0&&i.active===null?a.value:i.active===!0?` q-item--active${i.activeClass!==void 0?` ${i.activeClass}`:""}`:"")+(i.disable===!0?" disabled":"")+(f.value===!0?" q-item--clickable q-link cursor-pointer "+(i.manualFocus===!0?"q-manual-focusable":"q-focusable q-hoverable")+(i.focused===!0?" q-manual-focusable--focused":""):"")),m=C(()=>{if(i.insetLevel===void 0)return null;const v=n.lang.rtl===!0?"Right":"Left";return{["padding"+v]:16+i.insetLevel*56+"px"}});function p(v){f.value===!0&&(d.value!==null&&(v.qKeyEvent!==!0&&document.activeElement===c.value?d.value.focus():document.activeElement===d.value&&c.value.focus()),u(v))}function y(v){if(f.value===!0&&jn(v,13)===!0){Ge(v),v.qKeyEvent=!0;const S=new MouseEvent("click",v);S.qKeyEvent=!0,c.value.dispatchEvent(S)}t("keyup",v)}function _(){const v=xc(e.default,[]);return f.value===!0&&v.unshift(R("div",{class:"q-focus-helper",tabindex:-1,ref:d})),v}return()=>{const v={ref:c,class:g.value,style:m.value,role:"listitem",onClick:p,onKeyup:y};return f.value===!0?(v.tabindex=i.tabindex||"0",Object.assign(v,o.value)):h.value===!0&&(v["aria-disabled"]="true"),R(l.value,v,_())}}}),da=Ee({name:"QList",props:{...Ct,bordered:Boolean,dense:Boolean,separator:Boolean,padding:Boolean,tag:{type:String,default:"div"}},setup(i,{slots:e}){const t=pe(),n=Et(i,t.proxy.$q),s=C(()=>"q-list"+(i.bordered===!0?" q-list--bordered":"")+(i.dense===!0?" q-list--dense":"")+(i.separator===!0?" q-list--separator":"")+(n.value===!0?" q-list--dark":"")+(i.padding===!0?" q-list--padding":""));return()=>R(i.tag,{class:s.value},Ae(e.default))}}),yt=Ee({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(i,{slots:e}){const t=C(()=>`q-card__section q-card__section--${i.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>R(i.tag,{class:t.value},Ae(e.default))}}),ts=Ee({name:"QCard",props:{...Ct,tag:{type:String,default:"div"},square:Boolean,flat:Boolean,bordered:Boolean},setup(i,{slots:e}){const{proxy:{$q:t}}=pe(),n=Et(i,t),s=C(()=>"q-card"+(n.value===!0?" q-card--dark q-dark":"")+(i.bordered===!0?" q-card--bordered":"")+(i.square===!0?" q-card--square no-border-radius":"")+(i.flat===!0?" q-card--flat no-shadow":""));return()=>R(i.tag,{class:s.value},Ae(e.default))}});function od(i,e,t){let n;function s(){n!==void 0&&(ia.remove(n),n=void 0)}return We(()=>{i.value===!0&&s()}),{removeFromHistory:s,addToHistory(){n={condition:()=>t.value===!0,handler:e},ia.add(n)}}}let vn=0,mr,_r,Cn,pr=!1,ha,fa,ga,yi=null;function ad(i){ld(i)&&Ge(i)}function ld(i){if(i.target===document.body||i.target.classList.contains("q-layout__backdrop"))return!0;const e=wc(i),t=i.shiftKey&&!i.deltaX,n=!t&&Math.abs(i.deltaX)<=Math.abs(i.deltaY),s=t||n?i.deltaY:i.deltaX;for(let r=0;r<e.length;r++){const o=e[r];if(jc(o,n))return n?s<0&&o.scrollTop===0?!0:s>0&&o.scrollTop+o.clientHeight===o.scrollHeight:s<0&&o.scrollLeft===0?!0:s>0&&o.scrollLeft+o.clientWidth===o.scrollWidth}return!0}function ma(i){i.target===document&&(document.scrollingElement.scrollTop=document.scrollingElement.scrollTop)}function is(i){pr!==!0&&(pr=!0,requestAnimationFrame(()=>{pr=!1;const{height:e}=i.target,{clientHeight:t,scrollTop:n}=document.scrollingElement;(Cn===void 0||e!==window.innerHeight)&&(Cn=t-e,document.scrollingElement.scrollTop=n),n>Cn&&(document.scrollingElement.scrollTop-=Math.ceil((n-Cn)/8))}))}function _a(i){const e=document.body,t=window.visualViewport!==void 0;if(i==="add"){const{overflowY:n,overflowX:s}=window.getComputedStyle(e);mr=Wc(window),_r=Xc(window),ha=e.style.left,fa=e.style.top,ga=window.location.href,e.style.left=`-${mr}px`,e.style.top=`-${_r}px`,s!=="hidden"&&(s==="scroll"||e.scrollWidth>window.innerWidth)&&e.classList.add("q-body--force-scrollbar-x"),n!=="hidden"&&(n==="scroll"||e.scrollHeight>window.innerHeight)&&e.classList.add("q-body--force-scrollbar-y"),e.classList.add("q-body--prevent-scroll"),document.qScrollPrevented=!0,st.is.ios===!0&&(t===!0?(window.scrollTo(0,0),window.visualViewport.addEventListener("resize",is,Ft.passiveCapture),window.visualViewport.addEventListener("scroll",is,Ft.passiveCapture),window.scrollTo(0,0)):window.addEventListener("scroll",ma,Ft.passiveCapture))}st.is.desktop===!0&&st.is.mac===!0&&window[`${i}EventListener`]("wheel",ad,Ft.notPassive),i==="remove"&&(st.is.ios===!0&&(t===!0?(window.visualViewport.removeEventListener("resize",is,Ft.passiveCapture),window.visualViewport.removeEventListener("scroll",is,Ft.passiveCapture)):window.removeEventListener("scroll",ma,Ft.passiveCapture)),e.classList.remove("q-body--prevent-scroll"),e.classList.remove("q-body--force-scrollbar-x"),e.classList.remove("q-body--force-scrollbar-y"),document.qScrollPrevented=!1,e.style.left=ha,e.style.top=fa,window.location.href===ga&&window.scrollTo(mr,_r),Cn=void 0)}function ud(i){let e="add";if(i===!0){if(vn++,yi!==null){clearTimeout(yi),yi=null;return}if(vn>1)return}else{if(vn===0||(vn--,vn>0))return;if(e="remove",st.is.ios===!0&&st.is.nativeMobile===!0){yi!==null&&clearTimeout(yi),yi=setTimeout(()=>{_a(e),yi=null},100);return}}_a(e)}function cd(){let i;return{preventBodyScroll(e){e!==i&&(i!==void 0||e===!0)&&(i=e,ud(e))}}}const Ai=[];let un;function dd(i){un=i.keyCode===27}function hd(){un===!0&&(un=!1)}function fd(i){un===!0&&(un=!1,jn(i,27)===!0&&Ai[Ai.length-1](i))}function Zl(i){window[i]("keydown",dd),window[i]("blur",hd),window[i]("keyup",fd),un=!1}function Jl(i){st.is.desktop===!0&&(Ai.push(i),Ai.length===1&&Zl("addEventListener"))}function Ls(i){const e=Ai.indexOf(i);e>-1&&(Ai.splice(e,1),Ai.length===0&&Zl("removeEventListener"))}const Mi=[];function Ql(i){Mi[Mi.length-1](i)}function eu(i){st.is.desktop===!0&&(Mi.push(i),Mi.length===1&&document.body.addEventListener("focusin",Ql))}function Nr(i){const e=Mi.indexOf(i);e>-1&&(Mi.splice(e,1),Mi.length===0&&document.body.removeEventListener("focusin",Ql))}let ns=0;const gd={standard:"fixed-full flex-center",top:"fixed-top justify-center",bottom:"fixed-bottom justify-center",right:"fixed-right items-center",left:"fixed-left items-center"},pa={standard:["scale","scale"],top:["slide-down","slide-up"],bottom:["slide-up","slide-down"],right:["slide-left","slide-right"],left:["slide-right","slide-left"]};var xs=Ee({name:"QDialog",inheritAttrs:!1,props:{...Xs,...oo,transitionShow:String,transitionHide:String,persistent:Boolean,autoClose:Boolean,allowFocusOutside:Boolean,noEscDismiss:Boolean,noBackdropDismiss:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,noShake:Boolean,seamless:Boolean,maximized:Boolean,fullWidth:Boolean,fullHeight:Boolean,square:Boolean,position:{type:String,default:"standard",validator:i=>i==="standard"||["top","bottom","left","right"].includes(i)}},emits:[...js,"shake","click","escapeKey"],setup(i,{slots:e,emit:t,attrs:n}){const s=pe(),r=U(null),o=U(!1),a=U(!1);let l=null,u=null,c,d;const h=C(()=>i.persistent!==!0&&i.noRouteDismiss!==!0&&i.seamless!==!0),{preventBodyScroll:f}=cd(),{registerTimeout:g}=uo(),{registerTick:m,removeTick:p}=lo(),{transitionProps:y,transitionStyle:_}=ao(i,()=>pa[i.position][0],()=>pa[i.position][1]),{showPortal:v,hidePortal:S,portalIsAccessible:b,renderPortal:I}=ro(s,r,$,"dialog"),{hide:T}=Ys({showing:o,hideOnRouteChange:h,handleShow:ie,handleHide:B,processOnMount:!0}),{addToHistory:A,removeFromHistory:V}=od(o,T,h),z=C(()=>`q-dialog__inner flex no-pointer-events q-dialog__inner--${i.maximized===!0?"maximized":"minimized"} q-dialog__inner--${i.position} ${gd[i.position]}`+(a.value===!0?" q-dialog__inner--animating":"")+(i.fullWidth===!0?" q-dialog__inner--fullwidth":"")+(i.fullHeight===!0?" q-dialog__inner--fullheight":"")+(i.square===!0?" q-dialog__inner--square":"")),X=C(()=>o.value===!0&&i.seamless!==!0),D=C(()=>i.autoClose===!0?{onClick:P}:{}),Y=C(()=>[`q-dialog fullscreen no-pointer-events q-dialog--${X.value===!0?"modal":"seamless"}`,n.class]);ge(()=>i.maximized,F=>{o.value===!0&&L(F)}),ge(X,F=>{f(F),F===!0?(eu(N),Jl(M)):(Nr(N),Ls(M))});function ie(F){A(),u=i.noRefocus===!1&&document.activeElement!==null?document.activeElement:null,L(i.maximized),v(),a.value=!0,i.noFocus!==!0?(document.activeElement!==null&&document.activeElement.blur(),m(q)):p(),g(()=>{if(s.proxy.$q.platform.is.ios===!0){if(i.seamless!==!0&&document.activeElement){const{top:W,bottom:K}=document.activeElement.getBoundingClientRect(),{innerHeight:ne}=window,O=window.visualViewport!==void 0?window.visualViewport.height:ne;W>0&&K>O/2&&(document.scrollingElement.scrollTop=Math.min(document.scrollingElement.scrollHeight-O,K>=ne?1/0:Math.ceil(document.scrollingElement.scrollTop+K-O/2))),document.activeElement.scrollIntoView()}d=!0,r.value.click(),d=!1}v(!0),a.value=!1,t("show",F)},i.transitionDuration)}function B(F){p(),V(),H(!0),a.value=!0,S(),u!==null&&(((F&&F.type.indexOf("key")===0?u.closest('[tabindex]:not([tabindex^="-"])'):void 0)||u).focus(),u=null),g(()=>{S(!0),a.value=!1,t("hide",F)},i.transitionDuration)}function q(F){so(()=>{let W=r.value;W===null||W.contains(document.activeElement)===!0||(W=(F!==""?W.querySelector(F):null)||W.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||W.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||W.querySelector("[autofocus], [data-autofocus]")||W,W.focus({preventScroll:!0}))})}function E(F){F&&typeof F.focus=="function"?F.focus({preventScroll:!0}):q(),t("shake");const W=r.value;W!==null&&(W.classList.remove("q-animate--scale"),W.classList.add("q-animate--scale"),l!==null&&clearTimeout(l),l=setTimeout(()=>{l=null,r.value!==null&&(W.classList.remove("q-animate--scale"),q())},170))}function M(){i.seamless!==!0&&(i.persistent===!0||i.noEscDismiss===!0?i.maximized!==!0&&i.noShake!==!0&&E():(t("escapeKey"),T()))}function H(F){l!==null&&(clearTimeout(l),l=null),(F===!0||o.value===!0)&&(L(!1),i.seamless!==!0&&(f(!1),Nr(N),Ls(M))),F!==!0&&(u=null)}function L(F){F===!0?c!==!0&&(ns<1&&document.body.classList.add("q-body--dialog"),ns++,c=!0):c===!0&&(ns<2&&document.body.classList.remove("q-body--dialog"),ns--,c=!1)}function P(F){d!==!0&&(T(F),t("click",F))}function w(F){i.persistent!==!0&&i.noBackdropDismiss!==!0?T(F):i.noShake!==!0&&E()}function N(F){i.allowFocusOutside!==!0&&b.value===!0&&Il(r.value,F.target)!==!0&&q('[tabindex]:not([tabindex="-1"])')}Object.assign(s.proxy,{focus:q,shake:E,__updateRefocusTarget(F){u=F||null}}),We(H);function $(){return R("div",{role:"dialog","aria-modal":X.value===!0?"true":"false",...n,class:Y.value},[R(ln,{name:"q-transition--fade",appear:!0},()=>X.value===!0?R("div",{class:"q-dialog__backdrop fixed-full",style:_.value,"aria-hidden":"true",tabindex:-1,onClick:w}):null),R(ln,y.value,()=>o.value===!0?R("div",{ref:r,class:z.value,style:_.value,tabindex:-1,...D.value},Ae(e.default)):null)])}return I}});const md={xs:8,sm:10,md:14,lg:20,xl:24};var lt=Ee({name:"QChip",props:{...Ct,...Vl,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(i,{slots:e,emit:t}){const{proxy:{$q:n}}=pe(),s=Et(i,n),r=ql(i,md),o=C(()=>i.selected===!0||i.icon!==void 0),a=C(()=>i.selected===!0?i.iconSelected||n.iconSet.chip.selected:i.icon),l=C(()=>i.iconRemove||n.iconSet.chip.remove),u=C(()=>i.disable===!1&&(i.clickable===!0||i.selected!==null)),c=C(()=>{const p=i.outline===!0&&i.color||i.textColor;return"q-chip row inline no-wrap items-center"+(i.outline===!1&&i.color!==void 0?` bg-${i.color}`:"")+(p?` text-${p} q-chip--colored`:"")+(i.disable===!0?" disabled":"")+(i.dense===!0?" q-chip--dense":"")+(i.outline===!0?" q-chip--outline":"")+(i.selected===!0?" q-chip--selected":"")+(u.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(i.square===!0?" q-chip--square":"")+(s.value===!0?" q-chip--dark q-dark":"")}),d=C(()=>{const p=i.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:i.tabindex||0},y={...p,role:"button","aria-hidden":"false","aria-label":i.removeAriaLabel||n.lang.label.remove};return{chip:p,remove:y}});function h(p){p.keyCode===13&&f(p)}function f(p){i.disable||(t("update:selected",!i.selected),t("click",p))}function g(p){(p.keyCode===void 0||p.keyCode===13)&&(Ge(p),i.disable===!1&&(t("update:modelValue",!1),t("remove")))}function m(){const p=[];u.value===!0&&p.push(R("div",{class:"q-focus-helper"})),o.value===!0&&p.push(R(qt,{class:"q-chip__icon q-chip__icon--left",name:a.value}));const y=i.label!==void 0?[R("div",{class:"ellipsis"},[i.label])]:void 0;return p.push(R("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},Sc(e.default,y))),i.iconRight&&p.push(R(qt,{class:"q-chip__icon q-chip__icon--right",name:i.iconRight})),i.removable===!0&&p.push(R(qt,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:l.value,...d.value.remove,onClick:g,onKeyup:g})),p}return()=>{if(i.modelValue===!1)return;const p={class:c.value,style:r.value};return u.value===!0&&Object.assign(p,d.value.chip,{onClick:f,onKeyup:h}),Ll("div",p,m(),"ripple",i.ripple!==!1&&i.disable!==!0,()=>[[zl,i.ripple]])}}}),va=Ee({name:"QCardActions",props:{...Vc,vertical:Boolean},setup(i,{slots:e}){const t=qc(i),n=C(()=>`q-card__actions ${t.value} q-card__actions--${i.vertical===!0?"vert column":"horiz row"}`);return()=>R("div",{class:n.value},Ae(e.default))}}),Vr=Ee({name:"QItemLabel",props:{overline:Boolean,caption:Boolean,header:Boolean,lines:[Number,String]},setup(i,{slots:e}){const t=C(()=>parseInt(i.lines,10)),n=C(()=>"q-item__label"+(i.overline===!0?" q-item__label--overline text-overline":"")+(i.caption===!0?" q-item__label--caption text-caption":"")+(i.header===!0?" q-item__label--header":"")+(t.value===1?" ellipsis":"")),s=C(()=>i.lines!==void 0&&t.value>1?{overflow:"hidden",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":t.value}:null);return()=>R("div",{style:s.value,class:n.value},Ae(e.default))}}),_d=Ee({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(i,{slots:e,emit:t}){let n=!1,s,r,o=null,a=null,l,u;function c(){s&&s(),s=null,n=!1,o!==null&&(clearTimeout(o),o=null),a!==null&&(clearTimeout(a),a=null),r!==void 0&&r.removeEventListener("transitionend",l),l=null}function d(m,p,y){p!==void 0&&(m.style.height=`${p}px`),m.style.transition=`height ${i.duration}ms cubic-bezier(.25, .8, .50, 1)`,n=!0,s=y}function h(m,p){m.style.overflowY=null,m.style.height=null,m.style.transition=null,c(),p!==u&&t(p)}function f(m,p){let y=0;r=m,n===!0?(c(),y=m.offsetHeight===m.scrollHeight?0:void 0):(u="hide",m.style.overflowY="hidden"),d(m,y,p),o=setTimeout(()=>{o=null,m.style.height=`${m.scrollHeight}px`,l=_=>{a=null,(Object(_)!==_||_.target===m)&&h(m,"show")},m.addEventListener("transitionend",l),a=setTimeout(l,i.duration*1.1)},100)}function g(m,p){let y;r=m,n===!0?c():(u="show",m.style.overflowY="hidden",y=m.scrollHeight),d(m,y,p),o=setTimeout(()=>{o=null,m.style.height=0,l=_=>{a=null,(Object(_)!==_||_.target===m)&&h(m,"hide")},m.addEventListener("transitionend",l),a=setTimeout(l,i.duration*1.1)},100)}return We(()=>{n===!0&&c()}),()=>R(ln,{css:!1,appear:i.appear,onEnter:f,onLeave:g},e.default)}});let vr,ss=0;const ze=new Array(256);for(let i=0;i<256;i++)ze[i]=(i+256).toString(16).substring(1);const pd=(()=>{const i=typeof crypto!="undefined"?crypto:typeof window!="undefined"?window.crypto||window.msCrypto:void 0;if(i!==void 0){if(i.randomBytes!==void 0)return i.randomBytes;if(i.getRandomValues!==void 0)return e=>{const t=new Uint8Array(e);return i.getRandomValues(t),t}}return e=>{const t=[];for(let n=e;n>0;n--)t.push(Math.floor(Math.random()*256));return t}})(),ya=4096;function qr(){(vr===void 0||ss+16>ya)&&(ss=0,vr=pd(ya));const i=Array.prototype.slice.call(vr,ss,ss+=16);return i[6]=i[6]&15|64,i[8]=i[8]&63|128,ze[i[0]]+ze[i[1]]+ze[i[2]]+ze[i[3]]+"-"+ze[i[4]]+ze[i[5]]+"-"+ze[i[6]]+ze[i[7]]+"-"+ze[i[8]]+ze[i[9]]+"-"+ze[i[10]]+ze[i[11]]+ze[i[12]]+ze[i[13]]+ze[i[14]]+ze[i[15]]}const xi=Rc({}),vd=Object.keys(no);var yd=Ee({name:"QExpansionItem",props:{...no,...Xs,...Ct,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:Number,headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...js,"click","afterShow","afterHide"],setup(i,{slots:e,emit:t}){const{proxy:{$q:n}}=pe(),s=Et(i,n),r=U(i.modelValue!==null?i.modelValue:i.defaultOpened),o=U(null),a=qr(),{show:l,hide:u,toggle:c}=Ys({showing:r});let d,h;const f=C(()=>`q-expansion-item q-item-type q-expansion-item--${r.value===!0?"expanded":"collapsed"} q-expansion-item--${i.popup===!0?"popup":"standard"}`),g=C(()=>{if(i.contentInsetLevel===void 0)return null;const E=n.lang.rtl===!0?"Right":"Left";return{["padding"+E]:i.contentInsetLevel*56+"px"}}),m=C(()=>i.disable!==!0&&(i.href!==void 0||i.to!==void 0&&i.to!==null&&i.to!=="")),p=C(()=>{const E={};return vd.forEach(M=>{E[M]=i[M]}),E}),y=C(()=>m.value===!0||i.expandIconToggle!==!0),_=C(()=>i.expandedIcon!==void 0&&r.value===!0?i.expandedIcon:i.expandIcon||n.iconSet.expansionItem[i.denseToggle===!0?"denseIcon":"icon"]),v=C(()=>i.disable!==!0&&(m.value===!0||i.expandIconToggle===!0)),S=C(()=>({expanded:r.value===!0,detailsId:i.targetUid,toggle:c,show:l,hide:u})),b=C(()=>{const E=i.toggleAriaLabel!==void 0?i.toggleAriaLabel:n.lang.label[r.value===!0?"collapse":"expand"](i.label);return{role:"button","aria-expanded":r.value===!0?"true":"false","aria-controls":a,"aria-label":E}});ge(()=>i.group,E=>{h!==void 0&&h(),E!==void 0&&X()});function I(E){m.value!==!0&&c(E),t("click",E)}function T(E){E.keyCode===13&&A(E,!0)}function A(E,M){M!==!0&&o.value!==null&&o.value.focus(),c(E),Ge(E)}function V(){t("afterShow")}function z(){t("afterHide")}function X(){d===void 0&&(d=qr()),r.value===!0&&(xi[i.group]=d);const E=ge(r,H=>{H===!0?xi[i.group]=d:xi[i.group]===d&&delete xi[i.group]}),M=ge(()=>xi[i.group],(H,L)=>{L===d&&H!==void 0&&H!==d&&u()});h=()=>{E(),M(),xi[i.group]===d&&delete xi[i.group],h=void 0}}function D(){const E={class:[`q-focusable relative-position cursor-pointer${i.denseToggle===!0&&i.switchToggleSide===!0?" items-end":""}`,i.expandIconClass],side:i.switchToggleSide!==!0,avatar:i.switchToggleSide},M=[R(qt,{class:"q-expansion-item__toggle-icon"+(i.expandedIcon===void 0&&r.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:_.value})];return v.value===!0&&(Object.assign(E,{tabindex:0,...b.value,onClick:A,onKeyup:T}),M.unshift(R("div",{ref:o,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),R(wn,E,()=>M)}function Y(){let E;return e.header!==void 0?E=[].concat(e.header(S.value)):(E=[R(wn,()=>[R(Vr,{lines:i.labelLines},()=>i.label||""),i.caption?R(Vr,{lines:i.captionLines,caption:!0},()=>i.caption):null])],i.icon&&E[i.switchToggleSide===!0?"push":"unshift"](R(wn,{side:i.switchToggleSide===!0,avatar:i.switchToggleSide!==!0},()=>R(qt,{name:i.icon})))),i.disable!==!0&&i.hideExpandIcon!==!0&&E[i.switchToggleSide===!0?"unshift":"push"](D()),E}function ie(){const E={ref:"item",style:i.headerStyle,class:i.headerClass,dark:s.value,disable:i.disable,dense:i.dense,insetLevel:i.headerInsetLevel};return y.value===!0&&(E.clickable=!0,E.onClick=I,Object.assign(E,m.value===!0?p.value:b.value)),R(co,E,Y)}function B(){return vs(R("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:g.value,id:a},Ae(e.default)),[[Tc,r.value]])}function q(){const E=[ie(),R(_d,{duration:i.duration,onShow:V,onHide:z},B)];return i.expandSeparator===!0&&E.push(R(Br,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:s.value}),R(Br,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:s.value})),E}return i.group!==void 0&&X(),We(()=>{h!==void 0&&h()}),()=>R("div",{class:f.value},[R("div",{class:"q-expansion-item__container relative-position"},q())])}});function xd({validate:i,resetValidation:e,requiresQForm:t}){const n=Cs(Ic,!1);if(n!==!1){const{props:s,proxy:r}=pe();Object.assign(r,{validate:i,resetValidation:e}),ge(()=>s.disable,o=>{o===!0?(typeof e=="function"&&e(),n.unbindComponent(r)):n.bindComponent(r)}),Yn(()=>{s.disable!==!0&&n.bindComponent(r)}),We(()=>{s.disable!==!0&&n.unbindComponent(r)})}else t===!0&&console.error("Parent QForm not found on useFormChild()!")}const xa=/^#[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/,Sa=/^#[0-9a-fA-F]{4}([0-9a-fA-F]{4})?$/,Ca=/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{4}|[0-9a-fA-F]{6}|[0-9a-fA-F]{8})$/,rs=/^rgb\(((0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),){2}(0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5])\)$/,os=/^rgba\(((0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),){2}(0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),(0|0\.[0-9]+[1-9]|0\.[1-9]+|1)\)$/,yr={date:i=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(i),time:i=>/^([0-1]?\d|2[0-3]):[0-5]\d$/.test(i),fulltime:i=>/^([0-1]?\d|2[0-3]):[0-5]\d:[0-5]\d$/.test(i),timeOrFulltime:i=>/^([0-1]?\d|2[0-3]):[0-5]\d(:[0-5]\d)?$/.test(i),email:i=>/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(i),hexColor:i=>xa.test(i),hexaColor:i=>Sa.test(i),hexOrHexaColor:i=>Ca.test(i),rgbColor:i=>rs.test(i),rgbaColor:i=>os.test(i),rgbOrRgbaColor:i=>rs.test(i)||os.test(i),hexOrRgbColor:i=>xa.test(i)||rs.test(i),hexaOrRgbaColor:i=>Sa.test(i)||os.test(i),anyColor:i=>Ca.test(i)||rs.test(i)||os.test(i)},Sd=[!0,!1,"ondemand"],Cd={modelValue:{},error:{type:Boolean,default:null},errorMessage:String,noErrorIcon:Boolean,rules:Array,reactiveRules:Boolean,lazyRules:{type:[Boolean,String],validator:i=>Sd.includes(i)}};function Ed(i,e){const{props:t,proxy:n}=pe(),s=U(!1),r=U(null),o=U(null);xd({validate:g,resetValidation:f});let a=0,l;const u=C(()=>t.rules!==void 0&&t.rules!==null&&t.rules.length!==0),c=C(()=>t.disable!==!0&&u.value===!0),d=C(()=>t.error===!0||s.value===!0),h=C(()=>typeof t.errorMessage=="string"&&t.errorMessage.length!==0?t.errorMessage:r.value);ge(()=>t.modelValue,()=>{m()}),ge(()=>t.reactiveRules,y=>{y===!0?l===void 0&&(l=ge(()=>t.rules,()=>{m(!0)})):l!==void 0&&(l(),l=void 0)},{immediate:!0}),ge(i,y=>{y===!0?o.value===null&&(o.value=!1):o.value===!1&&(o.value=!0,c.value===!0&&t.lazyRules!=="ondemand"&&e.value===!1&&p())});function f(){a++,e.value=!1,o.value=null,s.value=!1,r.value=null,p.cancel()}function g(y=t.modelValue){if(c.value!==!0)return!0;const _=++a,v=e.value!==!0?()=>{o.value=!0}:()=>{},S=(I,T)=>{I===!0&&v(),s.value=I,r.value=T||null,e.value=!1},b=[];for(let I=0;I<t.rules.length;I++){const T=t.rules[I];let A;if(typeof T=="function"?A=T(y,yr):typeof T=="string"&&yr[T]!==void 0&&(A=yr[T](y)),A===!1||typeof A=="string")return S(!0,A),!1;A!==!0&&A!==void 0&&b.push(A)}return b.length===0?(S(!1),!0):(e.value=!0,Promise.all(b).then(I=>{if(I===void 0||Array.isArray(I)===!1||I.length===0)return _===a&&S(!1),!0;const T=I.find(A=>A===!1||typeof A=="string");return _===a&&S(T!==void 0,T),T===void 0},I=>(_===a&&(console.error(I),S(!0)),!1)))}function m(y){c.value===!0&&t.lazyRules!=="ondemand"&&(o.value===!0||t.lazyRules!==!0&&y!==!0)&&p()}const p=Pl(g,0);return We(()=>{l!==void 0&&l(),p.cancel()}),Object.assign(n,{resetValidation:f,validate:g}),kl(n,"hasError",()=>d.value),{isDirtyModel:o,hasRules:u,hasError:d,errorMessage:h,validate:g,resetValidation:f}}const Ea=/^on[A-Z]/;function bd(i,e){const t={listeners:U({}),attributes:U({})};function n(){const s={},r={};for(const o in i)o!=="class"&&o!=="style"&&Ea.test(o)===!1&&(s[o]=i[o]);for(const o in e.props)Ea.test(o)===!0&&(r[o]=e.props[o]);t.attributes.value=s,t.listeners.value=r}return Ol(n),n(),t}function zr(i){return i===void 0?`f_${qr()}`:i}function Gr(i){return i!=null&&(""+i).length!==0}const ho={...Ct,...Cd,label:String,stackLabel:Boolean,hint:String,hideHint:Boolean,prefix:String,suffix:String,labelColor:String,color:String,bgColor:String,filled:Boolean,outlined:Boolean,borderless:Boolean,standout:[Boolean,String],square:Boolean,loading:Boolean,labelSlot:Boolean,bottomSlots:Boolean,hideBottomSpace:Boolean,rounded:Boolean,dense:Boolean,itemAligned:Boolean,counter:Boolean,clearable:Boolean,clearIcon:String,disable:Boolean,readonly:Boolean,autofocus:Boolean,for:String,maxlength:[Number,String]},tu=["update:modelValue","clear","focus","blur","popupShow","popupHide"];function iu(){const{props:i,attrs:e,proxy:t,vnode:n}=pe();return{isDark:Et(i,t.$q),editable:C(()=>i.disable!==!0&&i.readonly!==!0),innerLoading:U(!1),focused:U(!1),hasPopupOpen:!1,splitAttrs:bd(e,n),targetUid:U(zr(i.for)),rootRef:U(null),targetRef:U(null),controlRef:U(null)}}function nu(i){const{props:e,emit:t,slots:n,attrs:s,proxy:r}=pe(),{$q:o}=r;let a=null;i.hasValue===void 0&&(i.hasValue=C(()=>Gr(e.modelValue))),i.emitValue===void 0&&(i.emitValue=E=>{t("update:modelValue",E)}),i.controlEvents===void 0&&(i.controlEvents={onFocusin:V,onFocusout:z}),Object.assign(i,{clearValue:X,onControlFocusin:V,onControlFocusout:z,focus:T}),i.computedCounter===void 0&&(i.computedCounter=C(()=>{if(e.counter!==!1){const E=typeof e.modelValue=="string"||typeof e.modelValue=="number"?(""+e.modelValue).length:Array.isArray(e.modelValue)===!0?e.modelValue.length:0,M=e.maxlength!==void 0?e.maxlength:e.maxValues;return E+(M!==void 0?" / "+M:"")}}));const{isDirtyModel:l,hasRules:u,hasError:c,errorMessage:d,resetValidation:h}=Ed(i.focused,i.innerLoading),f=i.floatingLabel!==void 0?C(()=>e.stackLabel===!0||i.focused.value===!0||i.floatingLabel.value===!0):C(()=>e.stackLabel===!0||i.focused.value===!0||i.hasValue.value===!0),g=C(()=>e.bottomSlots===!0||e.hint!==void 0||u.value===!0||e.counter===!0||e.error!==null),m=C(()=>e.filled===!0?"filled":e.outlined===!0?"outlined":e.borderless===!0?"borderless":e.standout?"standout":"standard"),p=C(()=>`q-field row no-wrap items-start q-field--${m.value}`+(i.fieldClass!==void 0?` ${i.fieldClass.value}`:"")+(e.rounded===!0?" q-field--rounded":"")+(e.square===!0?" q-field--square":"")+(f.value===!0?" q-field--float":"")+(_.value===!0?" q-field--labeled":"")+(e.dense===!0?" q-field--dense":"")+(e.itemAligned===!0?" q-field--item-aligned q-item-type":"")+(i.isDark.value===!0?" q-field--dark":"")+(i.getControl===void 0?" q-field--auto-height":"")+(i.focused.value===!0?" q-field--focused":"")+(c.value===!0?" q-field--error":"")+(c.value===!0||i.focused.value===!0?" q-field--highlighted":"")+(e.hideBottomSpace!==!0&&g.value===!0?" q-field--with-bottom":"")+(e.disable===!0?" q-field--disabled":e.readonly===!0?" q-field--readonly":"")),y=C(()=>"q-field__control relative-position row no-wrap"+(e.bgColor!==void 0?` bg-${e.bgColor}`:"")+(c.value===!0?" text-negative":typeof e.standout=="string"&&e.standout.length!==0&&i.focused.value===!0?` ${e.standout}`:e.color!==void 0?` text-${e.color}`:"")),_=C(()=>e.labelSlot===!0||e.label!==void 0),v=C(()=>"q-field__label no-pointer-events absolute ellipsis"+(e.labelColor!==void 0&&c.value!==!0?` text-${e.labelColor}`:"")),S=C(()=>({id:i.targetUid.value,editable:i.editable.value,focused:i.focused.value,floatingLabel:f.value,modelValue:e.modelValue,emitValue:i.emitValue})),b=C(()=>{const E={for:i.targetUid.value};return e.disable===!0?E["aria-disabled"]="true":e.readonly===!0&&(E["aria-readonly"]="true"),E});ge(()=>e.for,E=>{i.targetUid.value=zr(E)});function I(){const E=document.activeElement;let M=i.targetRef!==void 0&&i.targetRef.value;M&&(E===null||E.id!==i.targetUid.value)&&(M.hasAttribute("tabindex")===!0||(M=M.querySelector("[tabindex]")),M&&M!==E&&M.focus({preventScroll:!0}))}function T(){so(I)}function A(){Kc(I);const E=document.activeElement;E!==null&&i.rootRef.value.contains(E)&&E.blur()}function V(E){a!==null&&(clearTimeout(a),a=null),i.editable.value===!0&&i.focused.value===!1&&(i.focused.value=!0,t("focus",E))}function z(E,M){a!==null&&clearTimeout(a),a=setTimeout(()=>{a=null,!(document.hasFocus()===!0&&(i.hasPopupOpen===!0||i.controlRef===void 0||i.controlRef.value===null||i.controlRef.value.contains(document.activeElement)!==!1))&&(i.focused.value===!0&&(i.focused.value=!1,t("blur",E)),M!==void 0&&M())})}function X(E){Ge(E),o.platform.is.mobile!==!0?(i.targetRef!==void 0&&i.targetRef.value||i.rootRef.value).focus():i.rootRef.value.contains(document.activeElement)===!0&&document.activeElement.blur(),e.type==="file"&&(i.inputRef.value.value=null),t("update:modelValue",null),t("clear",e.modelValue),gt(()=>{h(),o.platform.is.mobile!==!0&&(l.value=!1)})}function D(){const E=[];return n.prepend!==void 0&&E.push(R("div",{class:"q-field__prepend q-field__marginal row no-wrap items-center",key:"prepend",onClick:xt},n.prepend())),E.push(R("div",{class:"q-field__control-container col relative-position row no-wrap q-anchor--skip"},Y())),c.value===!0&&e.noErrorIcon===!1&&E.push(B("error",[R(qt,{name:o.iconSet.field.error,color:"negative"})])),e.loading===!0||i.innerLoading.value===!0?E.push(B("inner-loading-append",n.loading!==void 0?n.loading():[R(zc,{color:e.color})])):e.clearable===!0&&i.hasValue.value===!0&&i.editable.value===!0&&E.push(B("inner-clearable-append",[R(qt,{class:"q-field__focusable-action",tag:"button",name:e.clearIcon||o.iconSet.field.clear,tabindex:0,type:"button","aria-hidden":null,role:null,onClick:X})])),n.append!==void 0&&E.push(R("div",{class:"q-field__append q-field__marginal row no-wrap items-center",key:"append",onClick:xt},n.append())),i.getInnerAppend!==void 0&&E.push(B("inner-append",i.getInnerAppend())),i.getControlChild!==void 0&&E.push(i.getControlChild()),E}function Y(){const E=[];return e.prefix!==void 0&&e.prefix!==null&&E.push(R("div",{class:"q-field__prefix no-pointer-events row items-center"},e.prefix)),i.getShadowControl!==void 0&&i.hasShadow.value===!0&&E.push(i.getShadowControl()),i.getControl!==void 0?E.push(i.getControl()):n.rawControl!==void 0?E.push(n.rawControl()):n.control!==void 0&&E.push(R("div",{ref:i.targetRef,class:"q-field__native row",tabindex:-1,...i.splitAttrs.attributes.value,"data-autofocus":e.autofocus===!0||void 0},n.control(S.value))),_.value===!0&&E.push(R("div",{class:v.value},Ae(n.label,e.label))),e.suffix!==void 0&&e.suffix!==null&&E.push(R("div",{class:"q-field__suffix no-pointer-events row items-center"},e.suffix)),E.concat(Ae(n.default))}function ie(){let E,M;c.value===!0?d.value!==null?(E=[R("div",{role:"alert"},d.value)],M=`q--slot-error-${d.value}`):(E=Ae(n.error),M="q--slot-error"):(e.hideHint!==!0||i.focused.value===!0)&&(e.hint!==void 0?(E=[R("div",e.hint)],M=`q--slot-hint-${e.hint}`):(E=Ae(n.hint),M="q--slot-hint"));const H=e.counter===!0||n.counter!==void 0;if(e.hideBottomSpace===!0&&H===!1&&E===void 0)return;const L=R("div",{key:M,class:"q-field__messages col"},E);return R("div",{class:"q-field__bottom row items-start q-field__bottom--"+(e.hideBottomSpace!==!0?"animated":"stale"),onClick:xt},[e.hideBottomSpace===!0?L:R(ln,{name:"q-transition--field-message"},()=>L),H===!0?R("div",{class:"q-field__counter"},n.counter!==void 0?n.counter():i.computedCounter.value):null])}function B(E,M){return M===null?null:R("div",{key:E,class:"q-field__append q-field__marginal row no-wrap items-center q-anchor--skip"},M)}let q=!1;return Ws(()=>{q=!0}),Fl(()=>{q===!0&&e.autofocus===!0&&r.focus()}),Yn(()=>{Lc.value===!0&&e.for===void 0&&(i.targetUid.value=zr()),e.autofocus===!0&&r.focus()}),We(()=>{a!==null&&clearTimeout(a)}),Object.assign(r,{focus:T,blur:A}),function(){const M=i.getControl===void 0&&n.control===void 0?{...i.splitAttrs.attributes.value,"data-autofocus":e.autofocus===!0||void 0,...b.value}:b.value;return R("label",{ref:i.rootRef,class:[p.value,s.class],style:s.style,...M},[n.before!==void 0?R("div",{class:"q-field__before q-field__marginal row no-wrap items-center",onClick:xt},n.before()):null,R("div",{class:"q-field__inner relative-position col self-stretch"},[R("div",{ref:i.controlRef,class:y.value,tabindex:-1,...i.controlEvents},D()),g.value===!0?ie():null]),n.after!==void 0?R("div",{class:"q-field__after q-field__marginal row no-wrap items-center",onClick:xt},n.after()):null])}}var wd=Ee({name:"QField",inheritAttrs:!1,props:ho,emits:tu,setup(){return nu(iu())}}),Rd=Ee({name:"QMenu",inheritAttrs:!1,props:{...Wl,...Xs,...Ct,...oo,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:Ts},self:{type:String,validator:Ts},offset:{type:Array,validator:Ul},scrollTarget:{default:void 0},touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...js,"click","escapeKey"],setup(i,{slots:e,emit:t,attrs:n}){let s=null,r,o,a;const l=pe(),{proxy:u}=l,{$q:c}=u,d=U(null),h=U(!1),f=C(()=>i.persistent!==!0&&i.noRouteDismiss!==!0),g=Et(i,c),{registerTick:m,removeTick:p}=lo(),{registerTimeout:y}=uo(),{transitionProps:_,transitionStyle:v}=ao(i),{localScrollTarget:S,changeScrollEvent:b,unconfigureScrollTarget:I}=jl(i,N),{anchorEl:T,canShow:A}=Xl({showing:h}),{hide:V}=Ys({showing:h,canShow:A,handleShow:L,handleHide:P,hideOnRouteChange:f,processOnMount:!0}),{showPortal:z,hidePortal:X,renderPortal:D}=ro(l,d,ne,"menu"),Y={anchorEl:T,innerRef:d,onClickOutside(O){if(i.persistent!==!0&&h.value===!0)return V(O),(O.type==="touchstart"||O.target.classList.contains("q-dialog__backdrop"))&&Ge(O),!0}},ie=C(()=>Is(i.anchor||(i.cover===!0?"center middle":"bottom start"),c.lang.rtl)),B=C(()=>i.cover===!0?ie.value:Is(i.self||"top start",c.lang.rtl)),q=C(()=>(i.square===!0?" q-menu--square":"")+(g.value===!0?" q-menu--dark q-dark":"")),E=C(()=>i.autoClose===!0?{onClick:$}:{}),M=C(()=>h.value===!0&&i.persistent!==!0);ge(M,O=>{O===!0?(Jl(W),Kl(Y)):(Ls(W),Rs(Y))});function H(){so(()=>{let O=d.value;O&&O.contains(document.activeElement)!==!0&&(O=O.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||O.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||O.querySelector("[autofocus], [data-autofocus]")||O,O.focus({preventScroll:!0}))})}function L(O){if(s=i.noRefocus===!1?document.activeElement:null,eu(F),z(),N(),r=void 0,O!==void 0&&(i.touchPosition||i.contextMenu)){const me=Ln(O);if(me.left!==void 0){const{top:qe,left:Xe}=T.value.getBoundingClientRect();r={left:me.left-Xe,top:me.top-qe}}}o===void 0&&(o=ge(()=>c.screen.width+"|"+c.screen.height+"|"+i.self+"|"+i.anchor+"|"+c.lang.rtl,K)),i.noFocus!==!0&&document.activeElement.blur(),m(()=>{K(),i.noFocus!==!0&&H()}),y(()=>{c.platform.is.ios===!0&&(a=i.autoClose,d.value.click()),K(),z(!0),t("show",O)},i.transitionDuration)}function P(O){p(),X(),w(!0),s!==null&&(O===void 0||O.qClickOutside!==!0)&&(((O&&O.type.indexOf("key")===0?s.closest('[tabindex]:not([tabindex^="-"])'):void 0)||s).focus(),s=null),y(()=>{X(!0),t("hide",O)},i.transitionDuration)}function w(O){r=void 0,o!==void 0&&(o(),o=void 0),(O===!0||h.value===!0)&&(Nr(F),I(),Rs(Y),Ls(W)),O!==!0&&(s=null)}function N(){(T.value!==null||i.scrollTarget!==void 0)&&(S.value=Gl(T.value,i.scrollTarget),b(S.value,K))}function $(O){a!==!0?($l(u,O),t("click",O)):a=!1}function F(O){M.value===!0&&i.noFocus!==!0&&Il(d.value,O.target)!==!0&&H()}function W(O){t("escapeKey"),V(O)}function K(){const O=d.value;O===null||T.value===null||Hl({el:O,offset:i.offset,anchorEl:T.value,anchorOrigin:ie.value,selfOrigin:B.value,absoluteOffset:r,fit:i.fit,cover:i.cover,maxHeight:i.maxHeight,maxWidth:i.maxWidth})}function ne(){return R(ln,_.value,()=>h.value===!0?R("div",{role:"menu",...n,ref:d,tabindex:-1,class:["q-menu q-position-engine scroll"+q.value,n.class],style:[n.style,v.value],...E.value},Ae(e.default)):null)}return We(w),Object.assign(u,{focus:H,updatePosition:K}),D}});let As=!1;{const i=document.createElement("div");i.setAttribute("dir","rtl"),Object.assign(i.style,{width:"1px",height:"1px",overflow:"auto"});const e=document.createElement("div");Object.assign(e.style,{width:"1000px",height:"1px"}),document.body.appendChild(i),i.appendChild(e),i.scrollLeft=-1e3,As=i.scrollLeft>=0,i.remove()}const It=1e3,Td=["start","center","end","start-force","center-force","end-force"],su=Array.prototype.filter,Id=window.getComputedStyle(document.body).overflowAnchor===void 0?Dl:function(i,e){i!==null&&(i._qOverflowAnimationFrame!==void 0&&cancelAnimationFrame(i._qOverflowAnimationFrame),i._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(i===null)return;i._qOverflowAnimationFrame=void 0;const t=i.children||[];su.call(t,s=>s.dataset&&s.dataset.qVsAnchor!==void 0).forEach(s=>{delete s.dataset.qVsAnchor});const n=t[e];n&&n.dataset&&(n.dataset.qVsAnchor="")}))};function nn(i,e){return i+e}function xr(i,e,t,n,s,r,o,a){const l=i===window?document.scrollingElement||document.documentElement:i,u=s===!0?"offsetWidth":"offsetHeight",c={scrollStart:0,scrollViewSize:-o-a,scrollMaxSize:0,offsetStart:-o,offsetEnd:-a};if(s===!0?(i===window?(c.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,c.scrollViewSize+=document.documentElement.clientWidth):(c.scrollStart=l.scrollLeft,c.scrollViewSize+=l.clientWidth),c.scrollMaxSize=l.scrollWidth,r===!0&&(c.scrollStart=(As===!0?c.scrollMaxSize-c.scrollViewSize:0)-c.scrollStart)):(i===window?(c.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,c.scrollViewSize+=document.documentElement.clientHeight):(c.scrollStart=l.scrollTop,c.scrollViewSize+=l.clientHeight),c.scrollMaxSize=l.scrollHeight),t!==null)for(let d=t.previousElementSibling;d!==null;d=d.previousElementSibling)d.classList.contains("q-virtual-scroll--skip")===!1&&(c.offsetStart+=d[u]);if(n!==null)for(let d=n.nextElementSibling;d!==null;d=d.nextElementSibling)d.classList.contains("q-virtual-scroll--skip")===!1&&(c.offsetEnd+=d[u]);if(e!==i){const d=l.getBoundingClientRect(),h=e.getBoundingClientRect();s===!0?(c.offsetStart+=h.left-d.left,c.offsetEnd-=h.width):(c.offsetStart+=h.top-d.top,c.offsetEnd-=h.height),i!==window&&(c.offsetStart+=c.scrollStart),c.offsetEnd+=c.scrollMaxSize-c.offsetStart}return c}function ba(i,e,t,n){e==="end"&&(e=(i===window?document.body:i)[t===!0?"scrollWidth":"scrollHeight"]),i===window?t===!0?(n===!0&&(e=(As===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-e),window.scrollTo(e,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,e):t===!0?(n===!0&&(e=(As===!0?i.scrollWidth-i.offsetWidth:0)-e),i.scrollLeft=e):i.scrollTop=e}function yn(i,e,t,n){if(t>=n)return 0;const s=e.length,r=Math.floor(t/It),o=Math.floor((n-1)/It)+1;let a=i.slice(r,o).reduce(nn,0);return t%It!==0&&(a-=e.slice(r*It,t).reduce(nn,0)),n%It!==0&&n!==s&&(a-=e.slice(n,o*It).reduce(nn,0)),a}const Ld={virtualScrollSliceSize:{type:[Number,String],default:null},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},Ad={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...Ld};function Md({virtualScrollLength:i,getVirtualScrollTarget:e,getVirtualScrollEl:t,virtualScrollItemSizeComputed:n}){const s=pe(),{props:r,emit:o,proxy:a}=s,{$q:l}=a;let u,c,d,h=[],f;const g=U(0),m=U(0),p=U({}),y=U(null),_=U(null),v=U(null),S=U({from:0,to:0}),b=C(()=>r.tableColspan!==void 0?r.tableColspan:100);n===void 0&&(n=C(()=>r.virtualScrollItemSize));const I=C(()=>n.value+";"+r.virtualScrollHorizontal),T=C(()=>I.value+";"+r.virtualScrollSliceRatioBefore+";"+r.virtualScrollSliceRatioAfter);ge(T,()=>{q()}),ge(I,A);function A(){B(c,!0)}function V(P){B(P===void 0?c:P)}function z(P,w){const N=e();if(N==null||N.nodeType===8)return;const $=xr(N,t(),y.value,_.value,r.virtualScrollHorizontal,l.lang.rtl,r.virtualScrollStickySizeStart,r.virtualScrollStickySizeEnd);d!==$.scrollViewSize&&q($.scrollViewSize),D(N,$,Math.min(i.value-1,Math.max(0,parseInt(P,10)||0)),0,Td.indexOf(w)>-1?w:c>-1&&P>c?"end":"start")}function X(){const P=e();if(P==null||P.nodeType===8)return;const w=xr(P,t(),y.value,_.value,r.virtualScrollHorizontal,l.lang.rtl,r.virtualScrollStickySizeStart,r.virtualScrollStickySizeEnd),N=i.value-1,$=w.scrollMaxSize-w.offsetStart-w.offsetEnd-m.value;if(u===w.scrollStart)return;if(w.scrollMaxSize<=0){D(P,w,0,0);return}d!==w.scrollViewSize&&q(w.scrollViewSize),Y(S.value.from);const F=Math.floor(w.scrollMaxSize-Math.max(w.scrollViewSize,w.offsetEnd)-Math.min(f[N],w.scrollViewSize/2));if(F>0&&Math.ceil(w.scrollStart)>=F){D(P,w,N,w.scrollMaxSize-w.offsetEnd-h.reduce(nn,0));return}let W=0,K=w.scrollStart-w.offsetStart,ne=K;if(K<=$&&K+w.scrollViewSize>=g.value)K-=g.value,W=S.value.from,ne=K;else for(let O=0;K>=h[O]&&W<N;O++)K-=h[O],W+=It;for(;K>0&&W<N;)K-=f[W],K>-w.scrollViewSize?(W++,ne=K):ne=f[W]+K;D(P,w,W,ne)}function D(P,w,N,$,F){const W=typeof F=="string"&&F.indexOf("-force")>-1,K=W===!0?F.replace("-force",""):F,ne=K!==void 0?K:"start";let O=Math.max(0,N-p.value[ne]),me=O+p.value.total;me>i.value&&(me=i.value,O=Math.max(0,me-p.value.total)),u=w.scrollStart;const qe=O!==S.value.from||me!==S.value.to;if(qe===!1&&K===void 0){M(N);return}const{activeElement:Xe}=document,De=v.value;qe===!0&&De!==null&&De!==Xe&&De.contains(Xe)===!0&&(De.addEventListener("focusout",ie),setTimeout(()=>{De!==null&&De.removeEventListener("focusout",ie)})),Id(De,N-O);const je=K!==void 0?f.slice(O,N).reduce(nn,0):0;if(qe===!0){const Ye=me>=S.value.from&&O<=S.value.to?S.value.to:me;S.value={from:O,to:Ye},g.value=yn(h,f,0,O),m.value=yn(h,f,me,i.value),requestAnimationFrame(()=>{S.value.to!==me&&u===w.scrollStart&&(S.value={from:S.value.from,to:me},m.value=yn(h,f,me,i.value))})}requestAnimationFrame(()=>{if(u!==w.scrollStart)return;qe===!0&&Y(O);const Ye=f.slice(O,N).reduce(nn,0),ke=Ye+w.offsetStart+g.value,mt=ke+f[N];let _t=ke+$;if(K!==void 0){const Pt=Ye-je,ye=w.scrollStart+Pt;_t=W!==!0&&ye<ke&&mt<ye+w.scrollViewSize?ye:K==="end"?mt-w.scrollViewSize:ke-(K==="start"?0:Math.round((w.scrollViewSize-f[N])/2))}u=_t,ba(P,_t,r.virtualScrollHorizontal,l.lang.rtl),M(N)})}function Y(P){const w=v.value;if(w){const N=su.call(w.children,O=>O.classList&&O.classList.contains("q-virtual-scroll--skip")===!1),$=N.length,F=r.virtualScrollHorizontal===!0?O=>O.getBoundingClientRect().width:O=>O.offsetHeight;let W=P,K,ne;for(let O=0;O<$;){for(K=F(N[O]),O++;O<$&&N[O].classList.contains("q-virtual-scroll--with-prev")===!0;)K+=F(N[O]),O++;ne=K-f[W],ne!==0&&(f[W]+=ne,h[Math.floor(W/It)]+=ne),W++}}}function ie(){v.value!==null&&v.value!==void 0&&v.value.focus()}function B(P,w){const N=1*n.value;(w===!0||Array.isArray(f)===!1)&&(f=[]);const $=f.length;f.length=i.value;for(let W=i.value-1;W>=$;W--)f[W]=N;const F=Math.floor((i.value-1)/It);h=[];for(let W=0;W<=F;W++){let K=0;const ne=Math.min((W+1)*It,i.value);for(let O=W*It;O<ne;O++)K+=f[O];h.push(K)}c=-1,u=void 0,g.value=yn(h,f,0,S.value.from),m.value=yn(h,f,S.value.to,i.value),P>=0?(Y(S.value.from),gt(()=>{z(P)})):H()}function q(P){if(P===void 0&&typeof window!="undefined"){const K=e();K!=null&&K.nodeType!==8&&(P=xr(K,t(),y.value,_.value,r.virtualScrollHorizontal,l.lang.rtl,r.virtualScrollStickySizeStart,r.virtualScrollStickySizeEnd).scrollViewSize)}d=P;const w=parseFloat(r.virtualScrollSliceRatioBefore)||0,N=parseFloat(r.virtualScrollSliceRatioAfter)||0,$=1+w+N,F=P===void 0||P<=0?1:Math.ceil(P/n.value),W=Math.max(1,F,Math.ceil((r.virtualScrollSliceSize>0?r.virtualScrollSliceSize:10)/$));p.value={total:Math.ceil(W*$),start:Math.ceil(W*w),center:Math.ceil(W*(.5+w)),end:Math.ceil(W*(1+w)),view:F}}function E(P,w){const N=r.virtualScrollHorizontal===!0?"width":"height",$={["--q-virtual-scroll-item-"+N]:n.value+"px"};return[P==="tbody"?R(P,{class:"q-virtual-scroll__padding",key:"before",ref:y},[R("tr",[R("td",{style:{[N]:`${g.value}px`,...$},colspan:b.value})])]):R(P,{class:"q-virtual-scroll__padding",key:"before",ref:y,style:{[N]:`${g.value}px`,...$}}),R(P,{class:"q-virtual-scroll__content",key:"content",ref:v,tabindex:-1},w.flat()),P==="tbody"?R(P,{class:"q-virtual-scroll__padding",key:"after",ref:_},[R("tr",[R("td",{style:{[N]:`${m.value}px`,...$},colspan:b.value})])]):R(P,{class:"q-virtual-scroll__padding",key:"after",ref:_,style:{[N]:`${m.value}px`,...$}})]}function M(P){c!==P&&(r.onVirtualScroll!==void 0&&o("virtualScroll",{index:P,from:S.value.from,to:S.value.to-1,direction:P<c?"decrease":"increase",ref:a}),c=P)}q();const H=Pl(X,l.platform.is.ios===!0?120:35);Ac(()=>{q()});let L=!1;return Ws(()=>{L=!0}),Fl(()=>{if(L!==!0)return;const P=e();u!==void 0&&P!==void 0&&P!==null&&P.nodeType!==8?ba(P,u,r.virtualScrollHorizontal,l.lang.rtl):z(c)}),We(()=>{H.cancel()}),Object.assign(a,{scrollTo:z,reset:A,refresh:V}),{virtualScrollSliceRange:S,virtualScrollSliceSizeComputed:p,setVirtualScrollSize:q,onVirtualScrollEvt:H,localResetVirtualScroll:B,padVirtualScroll:E,scrollTo:z,reset:A,refresh:V}}const fo={name:String};function kd(i){return C(()=>({type:"hidden",name:i.name,value:i.modelValue}))}function ru(i={}){return(e,t,n)=>{e[t](R("input",{class:"hidden"+(n||""),...i.value}))}}function Pd(i){return C(()=>i.name||i.for)}const Od=/[\u3000-\u303f\u3040-\u309f\u30a0-\u30ff\uff00-\uff9f\u4e00-\u9faf\u3400-\u4dbf]/,Fd=/[\u4e00-\u9fff\u3400-\u4dbf\u{20000}-\u{2a6df}\u{2a700}-\u{2b73f}\u{2b740}-\u{2b81f}\u{2b820}-\u{2ceaf}\uf900-\ufaff\u3300-\u33ff\ufe30-\ufe4f\uf900-\ufaff\u{2f800}-\u{2fa1f}]/u,Dd=/[\u3131-\u314e\u314f-\u3163\uac00-\ud7a3]/,Bd=/[a-z0-9_ -]$/i;function Nd(i){return function(t){if(t.type==="compositionend"||t.type==="change"){if(t.target.qComposing!==!0)return;t.target.qComposing=!1,i(t)}else t.type==="compositionupdate"&&t.target.qComposing!==!0&&typeof t.data=="string"&&(st.is.firefox===!0?Bd.test(t.data)===!1:Od.test(t.data)===!0||Fd.test(t.data)===!0||Dd.test(t.data)===!0)===!0&&(t.target.qComposing=!0)}}function Hi(i,e,t){return t<=e?e:Math.min(t,Math.max(e,i))}function wa(i,e,t){if(t<=e)return e;const n=t-e+1;let s=e+(i-e)%n;return s<e&&(s=n+s),s===0?0:s}const Ra=i=>["add","add-unique","toggle"].includes(i),Vd=".*+?^${}()|[]\\",qd=Object.keys(ho);var Ta=Ee({name:"QSelect",inheritAttrs:!1,props:{...Ad,...fo,...ho,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:Ra},mapOptions:Boolean,emitValue:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:String,transitionHide:String,transitionDuration:[String,Number],behavior:{type:String,validator:i=>["default","menu","dialog"].includes(i),default:"default"},virtualScrollItemSize:{type:[Number,String],default:void 0},onNewValue:Function,onFilter:Function},emits:[...tu,"add","remove","inputValue","newValue","keyup","keypress","keydown","filterAbort"],setup(i,{slots:e,emit:t}){const{proxy:n}=pe(),{$q:s}=n,r=U(!1),o=U(!1),a=U(-1),l=U(""),u=U(!1),c=U(!1);let d=null,h,f,g,m=null,p,y,_,v;const S=U(null),b=U(null),I=U(null),T=U(null),A=U(null),V=Pd(i),z=Nd(Ke),X=C(()=>Array.isArray(i.options)?i.options.length:0),D=C(()=>i.virtualScrollItemSize===void 0?i.optionsDense===!0?24:48:i.virtualScrollItemSize),{virtualScrollSliceRange:Y,virtualScrollSliceSizeComputed:ie,localResetVirtualScroll:B,padVirtualScroll:q,onVirtualScrollEvt:E,scrollTo:M,setVirtualScrollSize:H}=Md({virtualScrollLength:X,getVirtualScrollTarget:_i,getVirtualScrollEl:vt,virtualScrollItemSizeComputed:D}),L=iu(),P=C(()=>{const x=i.mapOptions===!0&&i.multiple!==!0,j=i.modelValue!==void 0&&(i.modelValue!==null||x===!0)?i.multiple===!0&&Array.isArray(i.modelValue)?i.modelValue:[i.modelValue]:[];if(i.mapOptions===!0&&Array.isArray(i.options)===!0){const G=i.mapOptions===!0&&h!==void 0?h:[],te=j.map(_e=>mi(_e,G));return i.modelValue===null&&x===!0?te.filter(_e=>_e!==null):te}return j}),w=C(()=>{const x={};return qd.forEach(j=>{const G=i[j];G!==void 0&&(x[j]=G)}),x}),N=C(()=>i.optionsDark===null?L.isDark.value:i.optionsDark),$=C(()=>Gr(P.value)),F=C(()=>{let x="q-field__input q-placeholder col";return i.hideSelected===!0||P.value.length===0?[x,i.inputClass]:(x+=" q-field__input--padding",i.inputClass===void 0?x:[x,i.inputClass])}),W=C(()=>(i.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(i.popupContentClass?" "+i.popupContentClass:"")),K=C(()=>X.value===0),ne=C(()=>P.value.map(x=>Pe.value(x)).join(", ")),O=C(()=>i.displayValue!==void 0?i.displayValue:ne.value),me=C(()=>i.optionsHtml===!0?()=>!0:x=>x!=null&&x.html===!0),qe=C(()=>i.displayValueHtml===!0||i.displayValue===void 0&&(i.optionsHtml===!0||P.value.some(me.value))),Xe=C(()=>L.focused.value===!0?i.tabindex:-1),De=C(()=>{const x={tabindex:i.tabindex,role:"combobox","aria-label":i.label,"aria-readonly":i.readonly===!0?"true":"false","aria-autocomplete":i.useInput===!0?"list":"none","aria-expanded":r.value===!0?"true":"false","aria-controls":`${L.targetUid.value}_lb`};return a.value>=0&&(x["aria-activedescendant"]=`${L.targetUid.value}_${a.value}`),x}),je=C(()=>({id:`${L.targetUid.value}_lb`,role:"listbox","aria-multiselectable":i.multiple===!0?"true":"false"})),Ye=C(()=>P.value.map((x,j)=>({index:j,opt:x,html:me.value(x),selected:!0,removeAtIndex:dt,toggleOption:$e,tabindex:Xe.value}))),ke=C(()=>{if(X.value===0)return[];const{from:x,to:j}=Y.value;return i.options.slice(x,j).map((G,te)=>{const _e=Se.value(G)===!0,he=x+te,Ie={clickable:!0,active:!1,activeClass:Pt.value,manualFocus:!0,focused:!1,disable:_e,tabindex:-1,dense:i.optionsDense,dark:N.value,role:"option",id:`${L.targetUid.value}_${he}`,onClick:()=>{$e(G)}};return _e!==!0&&(se(G)===!0&&(Ie.active=!0),a.value===he&&(Ie.focused=!0),Ie["aria-selected"]=Ie.active===!0?"true":"false",s.platform.is.desktop===!0&&(Ie.onMousemove=()=>{r.value===!0&&ft(he)})),{index:he,opt:G,html:me.value(G),label:Pe.value(G),selected:Ie.active,focused:Ie.focused,toggleOption:$e,setOptionIndex:ft,itemProps:Ie}})}),mt=C(()=>i.dropdownIcon!==void 0?i.dropdownIcon:s.iconSet.arrow.dropdown),_t=C(()=>i.optionsCover===!1&&i.outlined!==!0&&i.standout!==!0&&i.borderless!==!0&&i.rounded!==!0),Pt=C(()=>i.optionsSelectedClass!==void 0?i.optionsSelectedClass:i.color!==void 0?`text-${i.color}`:""),ye=C(()=>k(i.optionValue,"value")),Pe=C(()=>k(i.optionLabel,"label")),Se=C(()=>k(i.optionDisable,"disable")),Oe=C(()=>P.value.map(x=>ye.value(x))),Qe=C(()=>{const x={onInput:Ke,onChange:z,onKeydown:Ot,onKeyup:Ce,onKeypress:ot,onFocus:ue,onClick(j){f===!0&&Ut(j)}};return x.onCompositionstart=x.onCompositionupdate=x.onCompositionend=z,x});ge(P,x=>{h=x,i.useInput===!0&&i.fillInput===!0&&i.multiple!==!0&&L.innerLoading.value!==!0&&(o.value!==!0&&r.value!==!0||$.value!==!0)&&(g!==!0&&Ni(),(o.value===!0||r.value===!0)&&Ue(""))},{immediate:!0}),ge(()=>i.fillInput,Ni),ge(r,lr),ge(X,yc);function et(x){return i.emitValue===!0?ye.value(x):x}function pt(x){if(x>-1&&x<P.value.length)if(i.multiple===!0){const j=i.modelValue.slice();t("remove",{index:x,value:j.splice(x,1)[0]}),t("update:modelValue",j)}else t("update:modelValue",null)}function dt(x){pt(x),L.focus()}function ht(x,j){const G=et(x);if(i.multiple!==!0){i.fillInput===!0&&Be(Pe.value(x),!0,!0),t("update:modelValue",G);return}if(P.value.length===0){t("add",{index:0,value:G}),t("update:modelValue",i.multiple===!0?[G]:G);return}if(j===!0&&se(x)===!0||i.maxValues!==void 0&&i.modelValue.length>=i.maxValues)return;const te=i.modelValue.slice();t("add",{index:te.length,value:G}),te.push(G),t("update:modelValue",te)}function $e(x,j){if(L.editable.value!==!0||x===void 0||Se.value(x)===!0)return;const G=ye.value(x);if(i.multiple!==!0){j!==!0&&(Be(i.fillInput===!0?Pe.value(x):"",!0,!0),vi()),b.value!==null&&b.value.focus(),(P.value.length===0||pn(ye.value(P.value[0]),G)!==!0)&&t("update:modelValue",i.emitValue===!0?G:x);return}if((f!==!0||u.value===!0)&&L.focus(),ue(),P.value.length===0){const he=i.emitValue===!0?G:x;t("add",{index:0,value:he}),t("update:modelValue",i.multiple===!0?[he]:he);return}const te=i.modelValue.slice(),_e=Oe.value.findIndex(he=>pn(he,G));if(_e>-1)t("remove",{index:_e,value:te.splice(_e,1)[0]});else{if(i.maxValues!==void 0&&te.length>=i.maxValues)return;const he=i.emitValue===!0?G:x;t("add",{index:te.length,value:he}),te.push(he)}t("update:modelValue",te)}function ft(x){if(s.platform.is.desktop!==!0)return;const j=x>-1&&x<X.value?x:-1;a.value!==j&&(a.value=j)}function be(x=1,j){if(r.value===!0){let G=a.value;do G=wa(G+x,-1,X.value-1);while(G!==-1&&G!==a.value&&Se.value(i.options[G])===!0);a.value!==G&&(ft(G),M(G),j!==!0&&i.useInput===!0&&i.fillInput===!0&&bt(G>=0?Pe.value(i.options[G]):p))}}function mi(x,j){const G=te=>pn(ye.value(te),x);return i.options.find(G)||j.find(G)||x}function k(x,j){const G=x!==void 0?x:j;return typeof G=="function"?G:te=>te!==null&&typeof te=="object"&&G in te?te[G]:te}function se(x){const j=ye.value(x);return Oe.value.find(G=>pn(G,j))!==void 0}function ue(x){i.useInput===!0&&b.value!==null&&(x===void 0||b.value===x.target&&x.target.value===ne.value)&&b.value.select()}function de(x){jn(x,27)===!0&&r.value===!0&&(Ut(x),vi(),Ni()),t("keyup",x)}function Ce(x){const{value:j}=x.target;if(x.keyCode!==void 0){de(x);return}if(x.target.value="",d!==null&&(clearTimeout(d),d=null),Ni(),typeof j=="string"&&j.length!==0){const G=j.toLocaleLowerCase(),te=he=>{const Ie=i.options.find(it=>he.value(it).toLocaleLowerCase()===G);return Ie===void 0?!1:(P.value.indexOf(Ie)===-1?$e(Ie):vi(),!0)},_e=he=>{te(ye)!==!0&&(te(Pe)===!0||he===!0||Ue(j,!0,()=>_e(!0)))};_e()}else L.clearValue(x)}function ot(x){t("keypress",x)}function Ot(x){if(t("keydown",x),kc(x)===!0)return;const j=l.value.length!==0&&(i.newValueMode!==void 0||i.onNewValue!==void 0),G=x.shiftKey!==!0&&i.multiple!==!0&&(a.value>-1||j===!0);if(x.keyCode===27){xt(x);return}if(x.keyCode===9&&G===!1){Di();return}if(x.target===void 0||x.target.id!==L.targetUid.value)return;if(x.keyCode===40&&L.innerLoading.value!==!0&&r.value===!1){Ge(x),Bi();return}if(x.keyCode===8&&i.hideSelected!==!0&&l.value.length===0){i.multiple===!0&&Array.isArray(i.modelValue)===!0?pt(i.modelValue.length-1):i.multiple!==!0&&i.modelValue!==null&&t("update:modelValue",null);return}(x.keyCode===35||x.keyCode===36)&&(typeof l.value!="string"||l.value.length===0)&&(Ge(x),a.value=-1,be(x.keyCode===36?1:-1,i.multiple)),(x.keyCode===33||x.keyCode===34)&&ie.value!==void 0&&(Ge(x),a.value=Math.max(-1,Math.min(X.value,a.value+(x.keyCode===33?-1:1)*ie.value.view)),be(x.keyCode===33?1:-1,i.multiple)),(x.keyCode===38||x.keyCode===40)&&(Ge(x),be(x.keyCode===38?-1:1,i.multiple));const te=X.value;if((_===void 0||v<Date.now())&&(_=""),te>0&&i.useInput!==!0&&x.key!==void 0&&x.key.length===1&&x.altKey===!1&&x.ctrlKey===!1&&x.metaKey===!1&&(x.keyCode!==32||_.length!==0)){r.value!==!0&&Bi(x);const _e=x.key.toLocaleLowerCase(),he=_.length===1&&_[0]===_e;v=Date.now()+1500,he===!1&&(Ge(x),_+=_e);const Ie=new RegExp("^"+_.split("").map(ur=>Vd.indexOf(ur)>-1?"\\"+ur:ur).join(".*"),"i");let it=a.value;if(he===!0||it<0||Ie.test(Pe.value(i.options[it]))!==!0)do it=wa(it+1,-1,te-1);while(it!==a.value&&(Se.value(i.options[it])===!0||Ie.test(Pe.value(i.options[it]))!==!0));a.value!==it&&gt(()=>{ft(it),M(it),it>=0&&i.useInput===!0&&i.fillInput===!0&&bt(Pe.value(i.options[it]))});return}if(!(x.keyCode!==13&&(x.keyCode!==32||i.useInput===!0||_!=="")&&(x.keyCode!==9||G===!1))){if(x.keyCode!==9&&Ge(x),a.value>-1&&a.value<te){$e(i.options[a.value]);return}if(j===!0){const _e=(he,Ie)=>{if(Ie){if(Ra(Ie)!==!0)return}else Ie=i.newValueMode;if(he==null)return;Be("",i.multiple!==!0,!0),(Ie==="toggle"?$e:ht)(he,Ie==="add-unique"),i.multiple!==!0&&(b.value!==null&&b.value.focus(),vi())};if(i.onNewValue!==void 0?t("newValue",l.value,_e):_e(l.value),i.multiple!==!0)return}r.value===!0?Di():L.innerLoading.value!==!0&&Bi()}}function vt(){return f===!0?A.value:I.value!==null&&I.value.contentEl!==null?I.value.contentEl:void 0}function _i(){return vt()}function pi(){return i.hideSelected===!0?[]:e["selected-item"]!==void 0?Ye.value.map(x=>e["selected-item"](x)).slice():e.selected!==void 0?[].concat(e.selected()):i.useChips===!0?Ye.value.map((x,j)=>R(lt,{key:"option-"+j,removable:L.editable.value===!0&&Se.value(x.opt)!==!0,dense:!0,textColor:i.color,tabindex:Xe.value,onRemove(){x.removeAtIndex(j)}},()=>R("span",{class:"ellipsis",[x.html===!0?"innerHTML":"textContent"]:Pe.value(x.opt)}))):[R("span",{[qe.value===!0?"innerHTML":"textContent"]:O.value})]}function _n(){if(K.value===!0)return e["no-option"]!==void 0?e["no-option"]({inputValue:l.value}):void 0;const x=e.option!==void 0?e.option:G=>R(co,{key:G.index,...G.itemProps},()=>R(wn,()=>R(Vr,()=>R("span",{[G.html===!0?"innerHTML":"textContent"]:G.label}))));let j=q("div",ke.value.map(x));return e["before-options"]!==void 0&&(j=e["before-options"]().concat(j)),Al(e["after-options"],j)}function Qn(x,j){const G=j===!0?{...De.value,...L.splitAttrs.attributes.value}:void 0,te={ref:j===!0?b:void 0,key:"i_t",class:F.value,style:i.inputStyle,value:l.value!==void 0?l.value:"",type:"search",...G,id:j===!0?L.targetUid.value:void 0,maxlength:i.maxlength,autocomplete:i.autocomplete,"data-autofocus":x===!0||i.autofocus===!0||void 0,disabled:i.disable===!0,readonly:i.readonly===!0,...Qe.value};return x!==!0&&f===!0&&(Array.isArray(te.class)===!0?te.class=[...te.class,"no-pointer-events"]:te.class+=" no-pointer-events"),R("input",te)}function Ke(x){d!==null&&(clearTimeout(d),d=null),!(x&&x.target&&x.target.qComposing===!0)&&(bt(x.target.value||""),g=!0,p=l.value,L.focused.value!==!0&&(f!==!0||u.value===!0)&&L.focus(),i.onFilter!==void 0&&(d=setTimeout(()=>{d=null,Ue(l.value)},i.inputDebounce)))}function bt(x){l.value!==x&&(l.value=x,t("inputValue",x))}function Be(x,j,G){g=G!==!0,i.useInput===!0&&(bt(x),(j===!0||G!==!0)&&(p=x),j!==!0&&Ue(x))}function Ue(x,j,G){if(i.onFilter===void 0||j!==!0&&L.focused.value!==!0)return;L.innerLoading.value===!0?t("filterAbort"):(L.innerLoading.value=!0,c.value=!0),x!==""&&i.multiple!==!0&&P.value.length!==0&&g!==!0&&x===Pe.value(P.value[0])&&(x="");const te=setTimeout(()=>{r.value===!0&&(r.value=!1)},10);m!==null&&clearTimeout(m),m=te,t("filter",x,(_e,he)=>{(j===!0||L.focused.value===!0)&&m===te&&(clearTimeout(m),typeof _e=="function"&&_e(),c.value=!1,gt(()=>{L.innerLoading.value=!1,L.editable.value===!0&&(j===!0?r.value===!0&&vi():r.value===!0?lr(!0):r.value=!0),typeof he=="function"&&gt(()=>{he(n)}),typeof G=="function"&&gt(()=>{G(n)})}))},()=>{L.focused.value===!0&&m===te&&(clearTimeout(m),L.innerLoading.value=!1,c.value=!1),r.value===!0&&(r.value=!1)})}function tt(){return R(Rd,{ref:I,class:W.value,style:i.popupContentStyle,modelValue:r.value,fit:i.menuShrink!==!0,cover:i.optionsCover===!0&&K.value!==!0&&i.useInput!==!0,anchor:i.menuAnchor,self:i.menuSelf,offset:i.menuOffset,dark:N.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,square:_t.value,transitionShow:i.transitionShow,transitionHide:i.transitionHide,transitionDuration:i.transitionDuration,separateClosePopup:!0,...je.value,onScrollPassive:E,onBeforeShow:Jo,onBeforeHide:Oi,onShow:Fi},_n)}function Oi(x){Qo(x),Di()}function Fi(){H()}function He(x){Ut(x),b.value!==null&&b.value.focus(),u.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function at(x){Ut(x),gt(()=>{u.value=!1})}function wt(){const x=[R(wd,{class:`col-auto ${L.fieldClass.value}`,...w.value,for:L.targetUid.value,dark:N.value,square:!0,loading:c.value,itemAligned:!1,filled:!0,stackLabel:l.value.length!==0,...L.splitAttrs.listeners.value,onFocus:He,onBlur:at},{...e,rawControl:()=>L.getControl(!0),before:void 0,after:void 0})];return r.value===!0&&x.push(R("div",{ref:A,class:W.value+" scroll",style:i.popupContentStyle,...je.value,onClick:xt,onScrollPassive:E},_n())),R(xs,{ref:T,modelValue:o.value,position:i.useInput===!0?"top":void 0,transitionShow:y,transitionHide:i.transitionHide,transitionDuration:i.transitionDuration,onBeforeShow:Jo,onBeforeHide:ar,onHide:pc,onShow:vc},()=>R("div",{class:"q-select__dialog"+(N.value===!0?" q-select__dialog--dark q-dark":"")+(u.value===!0?" q-select__dialog--focused":"")},x))}function ar(x){Qo(x),T.value!==null&&T.value.__updateRefocusTarget(L.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),L.focused.value=!1}function pc(x){vi(),L.focused.value===!1&&t("blur",x),Ni()}function vc(){const x=document.activeElement;(x===null||x.id!==L.targetUid.value)&&b.value!==null&&b.value!==x&&b.value.focus(),H()}function Di(){o.value!==!0&&(a.value=-1,r.value===!0&&(r.value=!1),L.focused.value===!1&&(m!==null&&(clearTimeout(m),m=null),L.innerLoading.value===!0&&(t("filterAbort"),L.innerLoading.value=!1,c.value=!1)))}function Bi(x){L.editable.value===!0&&(f===!0?(L.onControlFocusin(x),o.value=!0,gt(()=>{L.focus()})):L.focus(),i.onFilter!==void 0?Ue(l.value):(K.value!==!0||e["no-option"]!==void 0)&&(r.value=!0))}function vi(){o.value=!1,Di()}function Ni(){i.useInput===!0&&Be(i.multiple!==!0&&i.fillInput===!0&&P.value.length!==0&&Pe.value(P.value[0])||"",!0,!0)}function lr(x){let j=-1;if(x===!0){if(P.value.length!==0){const G=ye.value(P.value[0]);j=i.options.findIndex(te=>pn(ye.value(te),G))}B(j)}ft(j)}function yc(x,j){r.value===!0&&L.innerLoading.value===!1&&(B(-1,!0),gt(()=>{r.value===!0&&L.innerLoading.value===!1&&(x>j?B():lr(!0))}))}function Zo(){o.value===!1&&I.value!==null&&I.value.updatePosition()}function Jo(x){x!==void 0&&Ut(x),t("popupShow",x),L.hasPopupOpen=!0,L.onControlFocusin(x)}function Qo(x){x!==void 0&&Ut(x),t("popupHide",x),L.hasPopupOpen=!1,L.onControlFocusout(x)}function ea(){f=s.platform.is.mobile!==!0&&i.behavior!=="dialog"?!1:i.behavior!=="menu"&&(i.useInput===!0?e["no-option"]!==void 0||i.onFilter!==void 0||K.value===!1:!0),y=s.platform.is.ios===!0&&f===!0&&i.useInput===!0?"fade":i.transitionShow}return Ol(ea),Mc(Zo),ea(),We(()=>{d!==null&&clearTimeout(d)}),Object.assign(n,{showPopup:Bi,hidePopup:vi,removeAtIndex:pt,add:ht,toggleOption:$e,getOptionIndex:()=>a.value,setOptionIndex:ft,moveOptionSelection:be,filter:Ue,updateMenuPosition:Zo,updateInputValue:Be,isOptionSelected:se,getEmittingOptionValue:et,isOptionDisabled:(...x)=>Se.value.apply(null,x)===!0,getOptionValue:(...x)=>ye.value.apply(null,x),getOptionLabel:(...x)=>Pe.value.apply(null,x)}),Object.assign(L,{innerValue:P,fieldClass:C(()=>`q-select q-field--auto-height q-select--with${i.useInput!==!0?"out":""}-input q-select--with${i.useChips!==!0?"out":""}-chips q-select--${i.multiple===!0?"multiple":"single"}`),inputRef:S,targetRef:b,hasValue:$,showPopup:Bi,floatingLabel:C(()=>i.hideSelected!==!0&&$.value===!0||typeof l.value=="number"||l.value.length!==0||Gr(i.displayValue)),getControlChild:()=>{if(L.editable.value!==!1&&(o.value===!0||K.value!==!0||e["no-option"]!==void 0))return f===!0?wt():tt();L.hasPopupOpen===!0&&(L.hasPopupOpen=!1)},controlEvents:{onFocusin(x){L.onControlFocusin(x)},onFocusout(x){L.onControlFocusout(x,()=>{Ni(),Di()})},onClick(x){if(xt(x),f!==!0&&r.value===!0){Di(),b.value!==null&&b.value.focus();return}Bi(x)}},getControl:x=>{const j=pi(),G=x===!0||o.value!==!0||f!==!0;if(i.useInput===!0)j.push(Qn(x,G));else if(L.editable.value===!0){const _e=G===!0?De.value:void 0;j.push(R("input",{ref:G===!0?b:void 0,key:"d_t",class:"q-select__focus-target",id:G===!0?L.targetUid.value:void 0,value:O.value,readonly:!0,"data-autofocus":x===!0||i.autofocus===!0||void 0,..._e,onKeydown:Ot,onKeyup:de,onKeypress:ot})),G===!0&&typeof i.autocomplete=="string"&&i.autocomplete.length!==0&&j.push(R("input",{class:"q-select__autocomplete-input",autocomplete:i.autocomplete,tabindex:-1,onKeyup:Ce}))}if(V.value!==void 0&&i.disable!==!0&&Oe.value.length!==0){const _e=Oe.value.map(he=>R("option",{value:he,selected:!0}));j.push(R("select",{class:"hidden",name:V.value,multiple:i.multiple},_e))}const te=i.useInput===!0||G!==!0?void 0:L.splitAttrs.attributes.value;return R("div",{class:"q-field__native row items-center",...te,...L.splitAttrs.listeners.value},j)},getInnerAppend:()=>i.loading!==!0&&c.value!==!0&&i.hideDropdownIcon!==!0?[R(qt,{class:"q-select__dropdown-icon"+(r.value===!0?" rotate-180":""),name:mt.value})]:null}),nu(L)}});function zd(i,e){const t=U(null),n=C(()=>i.disable===!0?null:R("span",{ref:t,class:"no-outline",tabindex:-1}));function s(r){const o=e.value;r!==void 0&&r.type.indexOf("key")===0?o!==null&&document.activeElement!==o&&o.contains(document.activeElement)===!0&&o.focus():t.value!==null&&(r===void 0||o!==null&&o.contains(r.target)===!0)&&t.value.focus()}return{refocusTargetEl:n,refocusTarget:s}}var Gd={xs:30,sm:35,md:40,lg:50,xl:60};const Wd={...Ct,...Vl,...fo,modelValue:{required:!0,default:null},val:{},trueValue:{default:!0},falseValue:{default:!1},indeterminateValue:{default:null},checkedIcon:String,uncheckedIcon:String,indeterminateIcon:String,toggleOrder:{type:String,validator:i=>i==="tf"||i==="ft"},toggleIndeterminate:Boolean,label:String,leftLabel:Boolean,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},Xd=["update:modelValue"];function jd(i,e){const{props:t,slots:n,emit:s,proxy:r}=pe(),{$q:o}=r,a=Et(t,o),l=U(null),{refocusTargetEl:u,refocusTarget:c}=zd(t,l),d=ql(t,Gd),h=C(()=>t.val!==void 0&&Array.isArray(t.modelValue)),f=C(()=>{const D=Vi(t.val);return h.value===!0?t.modelValue.findIndex(Y=>Vi(Y)===D):-1}),g=C(()=>h.value===!0?f.value>-1:Vi(t.modelValue)===Vi(t.trueValue)),m=C(()=>h.value===!0?f.value===-1:Vi(t.modelValue)===Vi(t.falseValue)),p=C(()=>g.value===!1&&m.value===!1),y=C(()=>t.disable===!0?-1:t.tabindex||0),_=C(()=>`q-${i} cursor-pointer no-outline row inline no-wrap items-center`+(t.disable===!0?" disabled":"")+(a.value===!0?` q-${i}--dark`:"")+(t.dense===!0?` q-${i}--dense`:"")+(t.leftLabel===!0?" reverse":"")),v=C(()=>{const D=g.value===!0?"truthy":m.value===!0?"falsy":"indet",Y=t.color!==void 0&&(t.keepColor===!0||(i==="toggle"?g.value===!0:m.value!==!0))?` text-${t.color}`:"";return`q-${i}__inner relative-position non-selectable q-${i}__inner--${D}${Y}`}),S=C(()=>{const D={type:"checkbox"};return t.name!==void 0&&Object.assign(D,{".checked":g.value,"^checked":g.value===!0?"checked":void 0,name:t.name,value:h.value===!0?t.val:t.trueValue}),D}),b=ru(S),I=C(()=>{const D={tabindex:y.value,role:i==="toggle"?"switch":"checkbox","aria-label":t.label,"aria-checked":p.value===!0?"mixed":g.value===!0?"true":"false"};return t.disable===!0&&(D["aria-disabled"]="true"),D});function T(D){D!==void 0&&(Ge(D),c(D)),t.disable!==!0&&s("update:modelValue",A(),D)}function A(){if(h.value===!0){if(g.value===!0){const D=t.modelValue.slice();return D.splice(f.value,1),D}return t.modelValue.concat([t.val])}if(g.value===!0){if(t.toggleOrder!=="ft"||t.toggleIndeterminate===!1)return t.falseValue}else if(m.value===!0){if(t.toggleOrder==="ft"||t.toggleIndeterminate===!1)return t.trueValue}else return t.toggleOrder!=="ft"?t.trueValue:t.falseValue;return t.indeterminateValue}function V(D){(D.keyCode===13||D.keyCode===32)&&Ge(D)}function z(D){(D.keyCode===13||D.keyCode===32)&&T(D)}const X=e(g,p);return Object.assign(r,{toggle:T}),()=>{const D=X();t.disable!==!0&&b(D,"unshift",` q-${i}__native absolute q-ma-none q-pa-none`);const Y=[R("div",{class:v.value,style:d.value,"aria-hidden":"true"},D)];u.value!==null&&Y.push(u.value);const ie=t.label!==void 0?Al(n.default,[t.label]):Ae(n.default);return ie!==void 0&&Y.push(R("div",{class:`q-${i}__label q-anchor--skip`},ie)),R("div",{ref:l,class:_.value,...I.value,onClick:T,onKeydown:V,onKeyup:z},Y)}}const Yd=R("div",{key:"svg",class:"q-checkbox__bg absolute"},[R("svg",{class:"q-checkbox__svg fit absolute-full",viewBox:"0 0 24 24"},[R("path",{class:"q-checkbox__truthy",fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"}),R("path",{class:"q-checkbox__indet",d:"M4,14H20V10H4"})])]);var Ia=Ee({name:"QCheckbox",props:Wd,emits:Xd,setup(i){function e(t,n){const s=C(()=>(t.value===!0?i.checkedIcon:n.value===!0?i.indeterminateIcon:i.uncheckedIcon)||null);return()=>s.value!==null?[R("div",{key:"icon",class:"q-checkbox__icon-container absolute-full flex flex-center no-wrap"},[R(qt,{class:"q-checkbox__icon",name:s.value})])]:[Yd]}return jd("checkbox",e)}});const go={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},$d=Object.keys(go);go.all=!0;function La(i){const e={};for(const t of $d)i[t]===!0&&(e[t]=!0);return Object.keys(e).length===0?go:(e.horizontal===!0?e.left=e.right=!0:e.left===!0&&e.right===!0&&(e.horizontal=!0),e.vertical===!0?e.up=e.down=!0:e.up===!0&&e.down===!0&&(e.vertical=!0),e.horizontal===!0&&e.vertical===!0&&(e.all=!0),e)}const Kd=["INPUT","TEXTAREA"];function Aa(i,e){return e.event===void 0&&i.target!==void 0&&i.target.draggable!==!0&&typeof e.handler=="function"&&Kd.includes(i.target.nodeName.toUpperCase())===!1&&(i.qClonedBy===void 0||i.qClonedBy.indexOf(e.uid)===-1)}function Sr(i,e,t){const n=Ln(i);let s,r=n.left-e.event.x,o=n.top-e.event.y,a=Math.abs(r),l=Math.abs(o);const u=e.direction;u.horizontal===!0&&u.vertical!==!0?s=r<0?"left":"right":u.horizontal!==!0&&u.vertical===!0?s=o<0?"up":"down":u.up===!0&&o<0?(s="up",a>l&&(u.left===!0&&r<0?s="left":u.right===!0&&r>0&&(s="right"))):u.down===!0&&o>0?(s="down",a>l&&(u.left===!0&&r<0?s="left":u.right===!0&&r>0&&(s="right"))):u.left===!0&&r<0?(s="left",a<l&&(u.up===!0&&o<0?s="up":u.down===!0&&o>0&&(s="down"))):u.right===!0&&r>0&&(s="right",a<l&&(u.up===!0&&o<0?s="up":u.down===!0&&o>0&&(s="down")));let c=!1;if(s===void 0&&t===!1){if(e.event.isFirst===!0||e.event.lastDir===void 0)return{};s=e.event.lastDir,c=!0,s==="left"||s==="right"?(n.left-=r,a=0,r=0):(n.top-=o,l=0,o=0)}return{synthetic:c,payload:{evt:i,touch:e.event.mouse!==!0,mouse:e.event.mouse===!0,position:n,direction:s,isFirst:e.event.isFirst,isFinal:t===!0,duration:Date.now()-e.event.time,distance:{x:a,y:l},offset:{x:r,y:o},delta:{x:n.left-e.event.lastX,y:n.top-e.event.lastY}}}}let Ud=0;var Hd=Ml({name:"touch-pan",beforeMount(i,{value:e,modifiers:t}){if(t.mouse!==!0&&st.has.touch!==!0)return;function n(r,o){t.mouse===!0&&o===!0?Ge(r):(t.stop===!0&&Ut(r),t.prevent===!0&&xt(r))}const s={uid:"qvtp_"+Ud++,handler:e,modifiers:t,direction:La(t),noop:Dl,mouseStart(r){Aa(r,s)&&Pc(r)&&(li(s,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),s.start(r,!0))},touchStart(r){if(Aa(r,s)){const o=r.target;li(s,"temp",[[o,"touchmove","move","notPassiveCapture"],[o,"touchcancel","end","passiveCapture"],[o,"touchend","end","passiveCapture"]]),s.start(r)}},start(r,o){if(st.is.firefox===!0&&cr(i,!0),s.lastEvt=r,o===!0||t.stop===!0){if(s.direction.all!==!0&&(o!==!0||s.modifiers.mouseAllDir!==!0&&s.modifiers.mousealldir!==!0)){const u=r.type.indexOf("mouse")>-1?new MouseEvent(r.type,r):new TouchEvent(r.type,r);r.defaultPrevented===!0&&xt(u),r.cancelBubble===!0&&Ut(u),Object.assign(u,{qKeyEvent:r.qKeyEvent,qClickOutside:r.qClickOutside,qAnchorHandled:r.qAnchorHandled,qClonedBy:r.qClonedBy===void 0?[s.uid]:r.qClonedBy.concat(s.uid)}),s.initialEvent={target:r.target,event:u}}Ut(r)}const{left:a,top:l}=Ln(r);s.event={x:a,y:l,time:Date.now(),mouse:o===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:a,lastY:l}},move(r){if(s.event===void 0)return;const o=Ln(r),a=o.left-s.event.x,l=o.top-s.event.y;if(a===0&&l===0)return;s.lastEvt=r;const u=s.event.mouse===!0,c=()=>{n(r,u);let f;t.preserveCursor!==!0&&t.preservecursor!==!0&&(f=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),u===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Es(),s.styleCleanup=g=>{if(s.styleCleanup=void 0,f!==void 0&&(document.documentElement.style.cursor=f),document.body.classList.remove("non-selectable"),u===!0){const m=()=>{document.body.classList.remove("no-pointer-events--children")};g!==void 0?setTimeout(()=>{m(),g()},50):m()}else g!==void 0&&g()}};if(s.event.detected===!0){s.event.isFirst!==!0&&n(r,s.event.mouse);const{payload:f,synthetic:g}=Sr(r,s,!1);f!==void 0&&(s.handler(f)===!1?s.end(r):(s.styleCleanup===void 0&&s.event.isFirst===!0&&c(),s.event.lastX=f.position.left,s.event.lastY=f.position.top,s.event.lastDir=g===!0?void 0:f.direction,s.event.isFirst=!1));return}if(s.direction.all===!0||u===!0&&(s.modifiers.mouseAllDir===!0||s.modifiers.mousealldir===!0)){c(),s.event.detected=!0,s.move(r);return}const d=Math.abs(a),h=Math.abs(l);d!==h&&(s.direction.horizontal===!0&&d>h||s.direction.vertical===!0&&d<h||s.direction.up===!0&&d<h&&l<0||s.direction.down===!0&&d<h&&l>0||s.direction.left===!0&&d>h&&a<0||s.direction.right===!0&&d>h&&a>0?(s.event.detected=!0,s.move(r)):s.end(r,!0))},end(r,o){if(s.event!==void 0){if(en(s,"temp"),st.is.firefox===!0&&cr(i,!1),o===!0)s.styleCleanup!==void 0&&s.styleCleanup(),s.event.detected!==!0&&s.initialEvent!==void 0&&s.initialEvent.target.dispatchEvent(s.initialEvent.event);else if(s.event.detected===!0){s.event.isFirst===!0&&s.handler(Sr(r===void 0?s.lastEvt:r,s).payload);const{payload:a}=Sr(r===void 0?s.lastEvt:r,s,!0),l=()=>{s.handler(a)};s.styleCleanup!==void 0?s.styleCleanup(l):l()}s.event=void 0,s.initialEvent=void 0,s.lastEvt=void 0}}};if(i.__qtouchpan=s,t.mouse===!0){const r=t.mouseCapture===!0||t.mousecapture===!0?"Capture":"";li(s,"main",[[i,"mousedown","mouseStart",`passive${r}`]])}st.has.touch===!0&&li(s,"main",[[i,"touchstart","touchStart",`passive${t.capture===!0?"Capture":""}`],[i,"touchmove","noop","notPassiveCapture"]])},updated(i,e){const t=i.__qtouchpan;t!==void 0&&(e.oldValue!==e.value&&(typeof value!="function"&&t.end(),t.handler=e.value),t.direction=La(e.modifiers))},beforeUnmount(i){const e=i.__qtouchpan;e!==void 0&&(e.event!==void 0&&e.end(),en(e,"main"),en(e,"temp"),st.is.firefox===!0&&cr(i,!1),e.styleCleanup!==void 0&&e.styleCleanup(),delete i.__qtouchpan)}});const Ma="q-slider__marker-labels",Zd=i=>({value:i}),Jd=({marker:i})=>R("div",{key:i.value,style:i.style,class:i.classes},i.label),ou=[34,37,40,33,39,38],Qd={...Ct,...fo,min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:i=>i>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,hideSelection:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}},eh=["pan","update:modelValue","change"];function th({updateValue:i,updatePosition:e,getDragging:t,formAttrs:n}){const{props:s,emit:r,slots:o,proxy:{$q:a}}=pe(),l=Et(s,a),u=ru(n),c=U(!1),d=U(!1),h=U(!1),f=U(!1),g=C(()=>s.vertical===!0?"--v":"--h"),m=C(()=>"-"+(s.switchLabelSide===!0?"switched":"standard")),p=C(()=>s.vertical===!0?s.reverse===!0:s.reverse!==(a.lang.rtl===!0)),y=C(()=>isNaN(s.innerMin)===!0||s.innerMin<s.min?s.min:s.innerMin),_=C(()=>isNaN(s.innerMax)===!0||s.innerMax>s.max?s.max:s.innerMax),v=C(()=>s.disable!==!0&&s.readonly!==!0&&y.value<_.value),S=C(()=>(String(s.step).trim().split(".")[1]||"").length),b=C(()=>s.step===0?1:s.step),I=C(()=>v.value===!0?s.tabindex||0:-1),T=C(()=>s.max-s.min),A=C(()=>_.value-y.value),V=C(()=>qe(y.value)),z=C(()=>qe(_.value)),X=C(()=>s.vertical===!0?p.value===!0?"bottom":"top":p.value===!0?"right":"left"),D=C(()=>s.vertical===!0?"height":"width"),Y=C(()=>s.vertical===!0?"width":"height"),ie=C(()=>s.vertical===!0?"vertical":"horizontal"),B=C(()=>{const k={role:"slider","aria-valuemin":y.value,"aria-valuemax":_.value,"aria-orientation":ie.value,"data-step":s.step};return s.disable===!0?k["aria-disabled"]="true":s.readonly===!0&&(k["aria-readonly"]="true"),k}),q=C(()=>`q-slider q-slider${g.value} q-slider--${c.value===!0?"":"in"}active inline no-wrap `+(s.vertical===!0?"row":"column")+(s.disable===!0?" disabled":" q-slider--enabled"+(v.value===!0?" q-slider--editable":""))+(h.value==="both"?" q-slider--focus":"")+(s.label||s.labelAlways===!0?" q-slider--label":"")+(s.labelAlways===!0?" q-slider--label-always":"")+(l.value===!0?" q-slider--dark":"")+(s.dense===!0?" q-slider--dense q-slider--dense"+g.value:""));function E(k){const se="q-slider__"+k;return`${se} ${se}${g.value} ${se}${g.value}${m.value}`}function M(k){const se="q-slider__"+k;return`${se} ${se}${g.value}`}const H=C(()=>{const k=s.selectionColor||s.color;return"q-slider__selection absolute"+(k!==void 0?` text-${k}`:"")}),L=C(()=>M("markers")+" absolute overflow-hidden"),P=C(()=>M("track-container")),w=C(()=>E("pin")),N=C(()=>E("label")),$=C(()=>E("text-container")),F=C(()=>E("marker-labels-container")+(s.markerLabelsClass!==void 0?` ${s.markerLabelsClass}`:"")),W=C(()=>"q-slider__track relative-position no-outline"+(s.trackColor!==void 0?` bg-${s.trackColor}`:"")),K=C(()=>{const k={[Y.value]:s.trackSize};return s.trackImg!==void 0&&(k.backgroundImage=`url(${s.trackImg}) !important`),k}),ne=C(()=>"q-slider__inner absolute"+(s.innerTrackColor!==void 0?` bg-${s.innerTrackColor}`:"")),O=C(()=>{const k={[X.value]:`${100*V.value}%`,[D.value]:`${100*(z.value-V.value)}%`};return s.innerTrackImg!==void 0&&(k.backgroundImage=`url(${s.innerTrackImg}) !important`),k});function me(k){const{min:se,max:ue,step:de}=s;let Ce=se+k*(ue-se);if(de>0){const ot=(Ce-se)%de;Ce+=(Math.abs(ot)>=de/2?(ot<0?-1:1)*de:0)-ot}return S.value>0&&(Ce=parseFloat(Ce.toFixed(S.value))),Hi(Ce,y.value,_.value)}function qe(k){return T.value===0?0:(k-s.min)/T.value}function Xe(k,se){const ue=Ln(k),de=s.vertical===!0?Hi((ue.top-se.top)/se.height,0,1):Hi((ue.left-se.left)/se.width,0,1);return Hi(p.value===!0?1-de:de,V.value,z.value)}const De=C(()=>Oc(s.markers)===!0?s.markers:b.value),je=C(()=>{const k=[],se=De.value,ue=s.max;let de=s.min;do k.push(de),de+=se;while(de<ue);return k.push(ue),k}),Ye=C(()=>{const k=` ${Ma}${g.value}-`;return Ma+`${k}${s.switchMarkerLabelsSide===!0?"switched":"standard"}${k}${p.value===!0?"rtl":"ltr"}`}),ke=C(()=>s.markerLabels===!1?null:Pt(s.markerLabels).map((k,se)=>({index:se,value:k.value,label:k.label||k.value,classes:Ye.value+(k.classes!==void 0?" "+k.classes:""),style:{...ye(k.value),...k.style||{}}}))),mt=C(()=>({markerList:ke.value,markerMap:Pe.value,classes:Ye.value,getStyle:ye})),_t=C(()=>{if(A.value!==0){const k=100*De.value/A.value;return{...O.value,backgroundSize:s.vertical===!0?`2px ${k}%`:`${k}% 2px`}}return null});function Pt(k){if(k===!1)return null;if(k===!0)return je.value.map(Zd);if(typeof k=="function")return je.value.map(ue=>{const de=k(ue);return dr(de)===!0?{...de,value:ue}:{value:ue,label:de}});const se=({value:ue})=>ue>=s.min&&ue<=s.max;return Array.isArray(k)===!0?k.map(ue=>dr(ue)===!0?ue:{value:ue}).filter(se):Object.keys(k).map(ue=>{const de=k[ue],Ce=Number(ue);return dr(de)===!0?{...de,value:Ce}:{value:Ce,label:de}}).filter(se)}function ye(k){return{[X.value]:`${100*(k-s.min)/T.value}%`}}const Pe=C(()=>{if(s.markerLabels===!1)return null;const k={};return ke.value.forEach(se=>{k[se.value]=se}),k});function Se(){if(o["marker-label-group"]!==void 0)return o["marker-label-group"](mt.value);const k=o["marker-label"]||Jd;return ke.value.map(se=>k({marker:se,...mt.value}))}const Oe=C(()=>[[Hd,Qe,void 0,{[ie.value]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function Qe(k){k.isFinal===!0?(f.value!==void 0&&(e(k.evt),k.touch===!0&&i(!0),f.value=void 0,r("pan","end")),c.value=!1,h.value=!1):k.isFirst===!0?(f.value=t(k.evt),e(k.evt),i(),c.value=!0,r("pan","start")):(e(k.evt),i())}function et(){h.value=!1}function pt(k){e(k,t(k)),i(),d.value=!0,c.value=!0,document.addEventListener("mouseup",dt,!0)}function dt(){d.value=!1,c.value=!1,i(!0),et(),document.removeEventListener("mouseup",dt,!0)}function ht(k){e(k,t(k)),i(!0)}function $e(k){ou.includes(k.keyCode)&&i(!0)}function ft(k){if(s.vertical===!0)return null;const se=a.lang.rtl!==s.reverse?1-k:k;return{transform:`translateX(calc(${2*se-1} * ${s.thumbSize} / 2 + ${50-100*se}%))`}}function be(k){const se=C(()=>d.value===!1&&(h.value===k.focusValue||h.value==="both")?" q-slider--focus":""),ue=C(()=>`q-slider__thumb q-slider__thumb${g.value} q-slider__thumb${g.value}-${p.value===!0?"rtl":"ltr"} absolute non-selectable`+se.value+(k.thumbColor.value!==void 0?` text-${k.thumbColor.value}`:"")),de=C(()=>({width:s.thumbSize,height:s.thumbSize,[X.value]:`${100*k.ratio.value}%`,zIndex:h.value===k.focusValue?2:void 0})),Ce=C(()=>k.labelColor.value!==void 0?` text-${k.labelColor.value}`:""),ot=C(()=>ft(k.ratio.value)),Ot=C(()=>"q-slider__text"+(k.labelTextColor.value!==void 0?` text-${k.labelTextColor.value}`:""));return()=>{const vt=[R("svg",{class:"q-slider__thumb-shape absolute-full",viewBox:"0 0 20 20","aria-hidden":"true"},[R("path",{d:s.thumbPath})]),R("div",{class:"q-slider__focus-ring fit"})];return(s.label===!0||s.labelAlways===!0)&&(vt.push(R("div",{class:w.value+" absolute fit no-pointer-events"+Ce.value},[R("div",{class:N.value,style:{minWidth:s.thumbSize}},[R("div",{class:$.value,style:ot.value},[R("span",{class:Ot.value},k.label.value)])])])),s.name!==void 0&&s.disable!==!0&&u(vt,"push")),R("div",{class:ue.value,style:de.value,...k.getNodeData()},vt)}}function mi(k,se,ue,de){const Ce=[];s.innerTrackColor!=="transparent"&&Ce.push(R("div",{key:"inner",class:ne.value,style:O.value})),s.selectionColor!=="transparent"&&Ce.push(R("div",{key:"selection",class:H.value,style:k.value})),s.markers!==!1&&Ce.push(R("div",{key:"marker",class:L.value,style:_t.value})),de(Ce);const ot=[Ll("div",{key:"trackC",class:P.value,tabindex:se.value,...ue.value},[R("div",{class:W.value,style:K.value},Ce)],"slide",v.value,()=>Oe.value)];if(s.markerLabels!==!1){const Ot=s.switchMarkerLabelsSide===!0?"unshift":"push";ot[Ot](R("div",{key:"markerL",class:F.value},Se()))}return ot}return We(()=>{document.removeEventListener("mouseup",dt,!0)}),{state:{active:c,focus:h,preventFocus:d,dragging:f,editable:v,classes:q,tabindex:I,attributes:B,step:b,decimals:S,trackLen:T,innerMin:y,innerMinRatio:V,innerMax:_,innerMaxRatio:z,positionProp:X,sizeProp:D,isReversed:p},methods:{onActivate:pt,onMobileClick:ht,onBlur:et,onKeyup:$e,getContent:mi,getThumbRenderFn:be,convertRatioToModel:me,convertModelToRatio:qe,getDraggingRatio:Xe}}}const ih=()=>({});var nh=Ee({name:"QSlider",props:{...Qd,modelValue:{required:!0,default:null,validator:i=>typeof i=="number"||i===null},labelValue:[String,Number]},emits:eh,setup(i,{emit:e}){const{proxy:{$q:t}}=pe(),{state:n,methods:s}=th({updateValue:g,updatePosition:p,getDragging:m,formAttrs:kd(i)}),r=U(null),o=U(0),a=U(0);function l(){a.value=i.modelValue===null?n.innerMin.value:Hi(i.modelValue,n.innerMin.value,n.innerMax.value)}ge(()=>`${i.modelValue}|${n.innerMin.value}|${n.innerMax.value}`,l),l();const u=C(()=>s.convertModelToRatio(a.value)),c=C(()=>n.active.value===!0?o.value:u.value),d=C(()=>{const v={[n.positionProp.value]:`${100*n.innerMinRatio.value}%`,[n.sizeProp.value]:`${100*(c.value-n.innerMinRatio.value)}%`};return i.selectionImg!==void 0&&(v.backgroundImage=`url(${i.selectionImg}) !important`),v}),h=s.getThumbRenderFn({focusValue:!0,getNodeData:ih,ratio:c,label:C(()=>i.labelValue!==void 0?i.labelValue:a.value),thumbColor:C(()=>i.thumbColor||i.color),labelColor:C(()=>i.labelColor),labelTextColor:C(()=>i.labelTextColor)}),f=C(()=>n.editable.value!==!0?{}:t.platform.is.mobile===!0?{onClick:s.onMobileClick}:{onMousedown:s.onActivate,onFocus:y,onBlur:s.onBlur,onKeydown:_,onKeyup:s.onKeyup});function g(v){a.value!==i.modelValue&&e("update:modelValue",a.value),v===!0&&e("change",a.value)}function m(){return r.value.getBoundingClientRect()}function p(v,S=n.dragging.value){const b=s.getDraggingRatio(v,S);a.value=s.convertRatioToModel(b),o.value=i.snap!==!0||i.step===0?b:s.convertModelToRatio(a.value)}function y(){n.focus.value=!0}function _(v){if(!ou.includes(v.keyCode))return;Ge(v);const S=([34,33].includes(v.keyCode)?10:1)*n.step.value,b=([34,37,40].includes(v.keyCode)?-1:1)*(n.isReversed.value===!0?-1:1)*(i.vertical===!0?-1:1)*S;a.value=Hi(parseFloat((a.value+b).toFixed(n.decimals.value)),n.innerMin.value,n.innerMax.value),g()}return()=>{const v=s.getContent(d,n.tabindex,f,S=>{S.push(h())});return R("div",{ref:r,class:n.classes.value+(i.modelValue===null?" q-slider--no-value":""),...n.attributes.value,"aria-valuenow":i.modelValue},v)}}}),sh=Ee({name:"QBanner",props:{...Ct,inlineActions:Boolean,dense:Boolean,rounded:Boolean},setup(i,{slots:e}){const{proxy:{$q:t}}=pe(),n=Et(i,t),s=C(()=>"q-banner row items-center"+(i.dense===!0?" q-banner--dense":"")+(n.value===!0?" q-banner--dark q-dark":"")+(i.rounded===!0?" rounded-borders":"")),r=C(()=>`q-banner__actions row items-center justify-end col-${i.inlineActions===!0?"auto":"all"}`);return()=>{const o=[R("div",{class:"q-banner__avatar col-auto row items-center self-start"},Ae(e.avatar)),R("div",{class:"q-banner__content col text-body2"},Ae(e.default))],a=Ae(e.action);return a!==void 0&&o.push(R("div",{class:r.value},a)),R("div",{class:s.value+(i.inlineActions===!1&&a!==void 0?" q-banner--top-padding":""),role:"alert"},o)}}});const rh={position:{type:String,default:"bottom-right",validator:i=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(i)},offset:{type:Array,validator:i=>i.length===2},expand:Boolean};function oh(){const{props:i,proxy:{$q:e}}=pe(),t=Cs(Bl,Ht);if(t===Ht)return console.error("QPageSticky needs to be child of QLayout"),Ht;const n=C(()=>{const d=i.position;return{top:d.indexOf("top")>-1,right:d.indexOf("right")>-1,bottom:d.indexOf("bottom")>-1,left:d.indexOf("left")>-1,vertical:d==="top"||d==="bottom",horizontal:d==="left"||d==="right"}}),s=C(()=>t.header.offset),r=C(()=>t.right.offset),o=C(()=>t.footer.offset),a=C(()=>t.left.offset),l=C(()=>{let d=0,h=0;const f=n.value,g=e.lang.rtl===!0?-1:1;f.top===!0&&s.value!==0?h=`${s.value}px`:f.bottom===!0&&o.value!==0&&(h=`${-o.value}px`),f.left===!0&&a.value!==0?d=`${g*a.value}px`:f.right===!0&&r.value!==0&&(d=`${-g*r.value}px`);const m={transform:`translate(${d}, ${h})`};return i.offset&&(m.margin=`${i.offset[1]}px ${i.offset[0]}px`),f.vertical===!0?(a.value!==0&&(m[e.lang.rtl===!0?"right":"left"]=`${a.value}px`),r.value!==0&&(m[e.lang.rtl===!0?"left":"right"]=`${r.value}px`)):f.horizontal===!0&&(s.value!==0&&(m.top=`${s.value}px`),o.value!==0&&(m.bottom=`${o.value}px`)),m}),u=C(()=>`q-page-sticky row flex-center fixed-${i.position} q-page-sticky--${i.expand===!0?"expand":"shrink"}`);function c(d){const h=Ae(d.default);return R("div",{class:u.value,style:l.value},i.expand===!0?h:[R("div",h)])}return{$layout:t,getStickyContent:c}}var Cr=Ee({name:"QPageSticky",props:rh,setup(i,{slots:e}){const{getStickyContent:t}=oh();return()=>t(e)}}),ah=Ee({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(i,{slots:e}){const{proxy:{$q:t}}=pe(),n=Cs(Bl,Ht);if(n===Ht)return console.error("QPage needs to be a deep child of QLayout"),Ht;if(Cs(Fc,Ht)===Ht)return console.error("QPage needs to be child of QPageContainer"),Ht;const r=C(()=>{const a=(n.header.space===!0?n.header.size:0)+(n.footer.space===!0?n.footer.size:0);if(typeof i.styleFn=="function"){const l=n.isContainer.value===!0?n.containerHeight.value:t.screen.height;return i.styleFn(a,l)}return{minHeight:n.isContainer.value===!0?n.containerHeight.value-a+"px":t.screen.height===0?a!==0?`calc(100vh - ${a}px)`:"100vh":t.screen.height-a+"px"}}),o=C(()=>`q-page${i.padding===!0?" q-layout-padding":""}`);return()=>R("main",{class:o.value,style:r.value},Ae(e.default))}});function ka(i){if(i===!1)return 0;if(i===!0||i===void 0)return 1;const e=parseInt(i,10);return isNaN(e)?0:e}var Pa=Ml({name:"close-popup",beforeMount(i,{value:e}){const t={depth:ka(e),handler(n){t.depth!==0&&setTimeout(()=>{const s=Qc(i);s!==void 0&&ed(s,n,t.depth)})},handlerKey(n){jn(n,13)===!0&&t.handler(n)}};i.__qclosepopup=t,i.addEventListener("click",t.handler),i.addEventListener("keyup",t.handlerKey)},updated(i,{value:e,oldValue:t}){e!==t&&(i.__qclosepopup.depth=ka(e))},beforeUnmount(i){const e=i.__qclosepopup;i.removeEventListener("click",e.handler),i.removeEventListener("keyup",e.handlerKey),delete i.__qclosepopup}});class lh{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}var Jt=lh,cn={PROPERTYCHANGE:"propertychange"};class uh{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}var mo=uh;function dn(i,e){return i>e?1:i<e?-1:0}function _o(i,e,t){if(i[0]<=e)return 0;const n=i.length;if(e<=i[n-1])return n-1;if(typeof t=="function"){for(let s=1;s<n;++s){const r=i[s];if(r===e)return s;if(r<e)return t(e,i[s-1],r)>0?s-1:s}return n-1}if(t>0){for(let s=1;s<n;++s)if(i[s]<e)return s-1;return n-1}if(t<0){for(let s=1;s<n;++s)if(i[s]<=e)return s;return n-1}for(let s=1;s<n;++s){if(i[s]==e)return s;if(i[s]<e)return i[s-1]-e<e-i[s]?s-1:s}return n-1}function ch(i,e,t){for(;e<t;){const n=i[e];i[e]=i[t],i[t]=n,++e,--t}}function au(i,e){const t=Array.isArray(e)?e:[e],n=t.length;for(let s=0;s<n;s++)i[i.length]=t[s]}function gi(i,e){const t=i.length;if(t!==e.length)return!1;for(let n=0;n<t;n++)if(i[n]!==e[n])return!1;return!0}function dh(i,e,t){const n=e||dn;return i.every(function(s,r){if(r===0)return!0;const o=n(i[r-1],s);return!(o>0||t&&o===0)})}function Mn(){return!0}function $s(){return!1}function hn(){}function hh(i){let e=!1,t,n,s;return function(){const r=Array.prototype.slice.call(arguments);return(!e||this!==s||!gi(r,n))&&(e=!0,s=this,n=r,t=i.apply(this,arguments)),t}}function $n(i){for(const e in i)delete i[e]}function kn(i){let e;for(e in i)return!1;return!e}class fh extends mo{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const n=this.listeners_||(this.listeners_={}),s=n[e]||(n[e]=[]);s.includes(t)||s.push(t)}dispatchEvent(e){const t=typeof e=="string",n=t?e:e.type,s=this.listeners_&&this.listeners_[n];if(!s)return;const r=t?new Jt(e):e;r.target||(r.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});n in o||(o[n]=0,a[n]=0),++o[n];let l;for(let u=0,c=s.length;u<c;++u)if("handleEvent"in s[u]?l=s[u].handleEvent(r):l=s[u].call(this,r),l===!1||r.propagationStopped){l=!1;break}if(--o[n]===0){let u=a[n];for(delete a[n];u--;)this.removeEventListener(n,hn);delete o[n]}return l}disposeInternal(){this.listeners_&&$n(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){const n=this.listeners_&&this.listeners_[e];if(n){const s=n.indexOf(t);s!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(n[s]=hn,++this.pendingRemovals_[e]):(n.splice(s,1),n.length===0&&delete this.listeners_[e]))}}}var Ks=fh,re={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function le(i,e,t,n,s){if(n&&n!==i&&(t=t.bind(n)),s){const o=t;t=function(){i.removeEventListener(e,t),o.apply(this,arguments)}}const r={target:i,type:e,listener:t};return i.addEventListener(e,t),r}function Ms(i,e,t,n){return le(i,e,t,n,!0)}function xe(i){i&&i.target&&(i.target.removeEventListener(i.type,i.listener),$n(i))}class Us extends Ks{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(re.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const n=e.length,s=new Array(n);for(let r=0;r<n;++r)s[r]=le(this,e[r],t);return s}return le(this,e,t)}onceInternal(e,t){let n;if(Array.isArray(e)){const s=e.length;n=new Array(s);for(let r=0;r<s;++r)n[r]=Ms(this,e[r],t)}else n=Ms(this,e,t);return t.ol_key=n,n}unInternal(e,t){const n=t.ol_key;if(n)gh(n);else if(Array.isArray(e))for(let s=0,r=e.length;s<r;++s)this.removeEventListener(e[s],t);else this.removeEventListener(e,t)}}Us.prototype.on;Us.prototype.once;Us.prototype.un;function gh(i){if(Array.isArray(i))for(let e=0,t=i.length;e<t;++e)xe(i[e]);else xe(i)}var lu=Us;function ae(){throw new Error("Unimplemented abstract method.")}let mh=0;function ce(i){return i.ol_uid||(i.ol_uid=String(++mh))}class Oa extends Jt{constructor(e,t,n){super(e),this.key=t,this.oldValue=n}}class _h extends lu{constructor(e){super(),this.on,this.once,this.un,ce(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}hasProperties(){return!!this.values_}notify(e,t){let n;n=`change:${e}`,this.hasListener(n)&&this.dispatchEvent(new Oa(n,e,t)),n=cn.PROPERTYCHANGE,this.hasListener(n)&&this.dispatchEvent(new Oa(n,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,n){const s=this.values_||(this.values_={});if(n)s[e]=t;else{const r=s[e];s[e]=t,r!==t&&this.notify(e,r)}}setProperties(e,t){for(const n in e)this.set(n,e[n],t)}applyProperties(e){!e.values_||Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const n=this.values_[e];delete this.values_[e],kn(this.values_)&&(this.values_=null),t||this.notify(e,n)}}}var Wt=_h;const ph={1:"The view center is not defined",2:"The view resolution is not defined",3:"The view rotation is not defined",4:"`image` and `src` cannot be provided at the same time",5:"`imgSize` must be set when `image` is provided",7:"`format` must be set when `url` is set",8:"Unknown `serverType` configured",9:"`url` must be configured or set using `#setUrl()`",10:"The default `geometryFunction` can only handle `Point` geometries",11:"`options.featureTypes` must be an Array",12:"`options.geometryName` must also be provided when `options.bbox` is set",13:"Invalid corner",14:"Invalid color",15:"Tried to get a value for a key that does not exist in the cache",16:"Tried to set a value for a key that is used already",17:"`resolutions` must be sorted in descending order",18:"Either `origin` or `origins` must be configured, never both",19:"Number of `tileSizes` and `resolutions` must be equal",20:"Number of `origins` and `resolutions` must be equal",22:"Either `tileSize` or `tileSizes` must be configured, never both",24:"Invalid extent or geometry provided as `geometry`",25:"Cannot fit empty extent provided as `geometry`",26:"Features must have an id set",27:"Features must have an id set",28:'`renderMode` must be `"hybrid"` or `"vector"`',30:"The passed `feature` was already added to the source",31:"Tried to enqueue an `element` that was already added to the queue",32:"Transformation matrix cannot be inverted",33:"Invalid units",34:"Invalid geometry layout",36:"Unknown SRS type",37:"Unknown geometry type found",38:"`styleMapValue` has an unknown type",39:"Unknown geometry type",40:"Expected `feature` to have a geometry",41:"Expected an `ol/style/Style` or an array of `ol/style/Style.js`",42:"Question unknown, the answer is 42",43:"Expected `layers` to be an array or a `Collection`",47:"Expected `controls` to be an array or an `ol/Collection`",48:"Expected `interactions` to be an array or an `ol/Collection`",49:"Expected `overlays` to be an array or an `ol/Collection`",50:"`options.featureTypes` should be an Array",51:"Either `url` or `tileJSON` options must be provided",52:"Unknown `serverType` configured",53:"Unknown `tierSizeCalculation` configured",55:"The {-y} placeholder requires a tile grid with extent",56:"mapBrowserEvent must originate from a pointer event",57:"At least 2 conditions are required",59:"Invalid command found in the PBF",60:"Missing or invalid `size`",61:"Cannot determine IIIF Image API version from provided image information JSON",62:"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`",64:"Layer opacity must be a number",66:"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`",67:"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both",68:"A VectorTile source can only be rendered if it has a projection compatible with the view projection",69:"`width` or `height` cannot be provided together with `scale`"};class vh extends Error{constructor(e){const t=ph[e];super(t),this.code=e,this.name="AssertionError",this.message=t}}var uu=vh,ut={ADD:"add",REMOVE:"remove"};const Fa={LENGTH:"length"};class as extends Jt{constructor(e,t,n){super(e),this.element=t,this.index=n}}class yh extends Wt{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e||[],this.unique_)for(let n=0,s=this.array_.length;n<s;++n)this.assertUnique_(this.array_[n],n);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,n=e.length;t<n;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let n=0,s=t.length;n<s;++n)e(t[n],n,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(Fa.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new as(ut.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let n=0,s=t.length;n<s;++n)if(t[n]===e)return this.removeAt(n)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new as(ut.REMOVE,t,e)),t}setAt(e,t){const n=this.getLength();if(e>=n){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const s=this.array_[e];this.array_[e]=t,this.dispatchEvent(new as(ut.REMOVE,s,e)),this.dispatchEvent(new as(ut.ADD,t,e))}updateLength_(){this.set(Fa.LENGTH,this.array_.length)}assertUnique_(e,t){for(let n=0,s=this.array_.length;n<s;++n)if(this.array_[n]===e&&n!==t)throw new uu(58)}}var Nt=yh;const di=typeof navigator!="undefined"&&typeof navigator.userAgent!="undefined"?navigator.userAgent.toLowerCase():"",xh=di.includes("firefox"),Sh=di.includes("safari")&&!di.includes("chrom");Sh&&(di.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(di));const Ch=di.includes("webkit")&&!di.includes("edge"),Eh=di.includes("macintosh"),cu=typeof devicePixelRatio!="undefined"?devicePixelRatio:1,po=typeof WorkerGlobalScope!="undefined"&&typeof OffscreenCanvas!="undefined"&&self instanceof WorkerGlobalScope,bh=typeof Image!="undefined"&&Image.prototype.decode,du=function(){let i=!1;try{const e=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return i}();function oe(i,e){if(!i)throw new uu(e)}new Array(6);function zt(){return[1,0,0,1,0,0]}function wh(i,e,t,n,s,r,o){return i[0]=e,i[1]=t,i[2]=n,i[3]=s,i[4]=r,i[5]=o,i}function Rh(i,e){return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i[4]=e[4],i[5]=e[5],i}function Ve(i,e){const t=e[0],n=e[1];return e[0]=i[0]*t+i[2]*n+i[4],e[1]=i[1]*t+i[3]*n+i[5],e}function Th(i,e,t){return wh(i,e,0,0,t,0,0)}function hi(i,e,t,n,s,r,o,a){const l=Math.sin(r),u=Math.cos(r);return i[0]=n*u,i[1]=s*l,i[2]=-n*l,i[3]=s*u,i[4]=o*n*u-a*n*l+e,i[5]=o*s*l+a*s*u+t,i}function vo(i,e){const t=Ih(e);oe(t!==0,32);const n=e[0],s=e[1],r=e[2],o=e[3],a=e[4],l=e[5];return i[0]=o/t,i[1]=-s/t,i[2]=-r/t,i[3]=n/t,i[4]=(r*l-o*a)/t,i[5]=-(n*l-s*a)/t,i}function Ih(i){return i[0]*i[3]-i[1]*i[2]}let Da;function hu(i){const e="matrix("+i.join(", ")+")";if(po)return e;const t=Da||(Da=document.createElement("div"));return t.style.transform=e,t.style.transform}var Ne={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function Ba(i){const e=Mt();for(let t=0,n=i.length;t<n;++t)Rn(e,i[t]);return e}function yo(i,e,t){return t?(t[0]=i[0]-e,t[1]=i[1]-e,t[2]=i[2]+e,t[3]=i[3]+e,t):[i[0]-e,i[1]-e,i[2]+e,i[3]+e]}function fu(i,e){return e?(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e):i.slice()}function gu(i,e,t){let n,s;return e<i[0]?n=i[0]-e:i[2]<e?n=e-i[2]:n=0,t<i[1]?s=i[1]-t:i[3]<t?s=t-i[3]:s=0,n*n+s*s}function Hs(i,e){return mu(i,e[0],e[1])}function Zi(i,e){return i[0]<=e[0]&&e[2]<=i[2]&&i[1]<=e[1]&&e[3]<=i[3]}function mu(i,e,t){return i[0]<=e&&e<=i[2]&&i[1]<=t&&t<=i[3]}function Wr(i,e){const t=i[0],n=i[1],s=i[2],r=i[3],o=e[0],a=e[1];let l=Ne.UNKNOWN;return o<t?l=l|Ne.LEFT:o>s&&(l=l|Ne.RIGHT),a<n?l=l|Ne.BELOW:a>r&&(l=l|Ne.ABOVE),l===Ne.UNKNOWN&&(l=Ne.INTERSECTING),l}function Mt(){return[1/0,1/0,-1/0,-1/0]}function fi(i,e,t,n,s){return s?(s[0]=i,s[1]=e,s[2]=t,s[3]=n,s):[i,e,t,n]}function Zs(i){return fi(1/0,1/0,-1/0,-1/0,i)}function Lh(i,e){const t=i[0],n=i[1];return fi(t,n,t,n,e)}function Ah(i,e,t,n,s){const r=Zs(s);return _u(r,i,e,t,n)}function Pn(i,e){return i[0]==e[0]&&i[2]==e[2]&&i[1]==e[1]&&i[3]==e[3]}function Mh(i,e){return e[0]<i[0]&&(i[0]=e[0]),e[2]>i[2]&&(i[2]=e[2]),e[1]<i[1]&&(i[1]=e[1]),e[3]>i[3]&&(i[3]=e[3]),i}function Rn(i,e){e[0]<i[0]&&(i[0]=e[0]),e[0]>i[2]&&(i[2]=e[0]),e[1]<i[1]&&(i[1]=e[1]),e[1]>i[3]&&(i[3]=e[1])}function _u(i,e,t,n,s){for(;t<n;t+=s)kh(i,e[t],e[t+1]);return i}function kh(i,e,t){i[0]=Math.min(i[0],e),i[1]=Math.min(i[1],t),i[2]=Math.max(i[2],e),i[3]=Math.max(i[3],t)}function pu(i,e){let t;return t=e(Js(i)),t||(t=e(Qs(i)),t)||(t=e(er(i)),t)||(t=e(Pi(i)),t)?t:!1}function Xr(i){let e=0;return xo(i)||(e=ve(i)*Gt(i)),e}function Js(i){return[i[0],i[1]]}function Qs(i){return[i[2],i[1]]}function fn(i){return[(i[0]+i[2])/2,(i[1]+i[3])/2]}function Ph(i,e){let t;return e==="bottom-left"?t=Js(i):e==="bottom-right"?t=Qs(i):e==="top-left"?t=Pi(i):e==="top-right"?t=er(i):oe(!1,13),t}function jr(i,e,t,n,s){const[r,o,a,l,u,c,d,h]=Yr(i,e,t,n);return fi(Math.min(r,a,u,d),Math.min(o,l,c,h),Math.max(r,a,u,d),Math.max(o,l,c,h),s)}function Yr(i,e,t,n){const s=e*n[0]/2,r=e*n[1]/2,o=Math.cos(t),a=Math.sin(t),l=s*o,u=s*a,c=r*o,d=r*a,h=i[0],f=i[1];return[h-l+d,f-u-c,h-l-d,f-u+c,h+l-d,f+u+c,h+l+d,f+u-c,h-l+d,f-u-c]}function Gt(i){return i[3]-i[1]}function Tn(i,e,t){const n=t||Mt();return ct(i,e)?(i[0]>e[0]?n[0]=i[0]:n[0]=e[0],i[1]>e[1]?n[1]=i[1]:n[1]=e[1],i[2]<e[2]?n[2]=i[2]:n[2]=e[2],i[3]<e[3]?n[3]=i[3]:n[3]=e[3]):Zs(n),n}function Pi(i){return[i[0],i[3]]}function er(i){return[i[2],i[3]]}function ve(i){return i[2]-i[0]}function ct(i,e){return i[0]<=e[2]&&i[2]>=e[0]&&i[1]<=e[3]&&i[3]>=e[1]}function xo(i){return i[2]<i[0]||i[3]<i[1]}function Oh(i,e){return e?(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e):i}function Fh(i,e,t){let n=!1;const s=Wr(i,e),r=Wr(i,t);if(s===Ne.INTERSECTING||r===Ne.INTERSECTING)n=!0;else{const o=i[0],a=i[1],l=i[2],u=i[3],c=e[0],d=e[1],h=t[0],f=t[1],g=(f-d)/(h-c);let m,p;!!(r&Ne.ABOVE)&&!(s&Ne.ABOVE)&&(m=h-(f-u)/g,n=m>=o&&m<=l),!n&&!!(r&Ne.RIGHT)&&!(s&Ne.RIGHT)&&(p=f-(h-l)*g,n=p>=a&&p<=u),!n&&!!(r&Ne.BELOW)&&!(s&Ne.BELOW)&&(m=h-(f-a)/g,n=m>=o&&m<=l),!n&&!!(r&Ne.LEFT)&&!(s&Ne.LEFT)&&(p=f-(h-o)*g,n=p>=a&&p<=u)}return n}function vu(i,e){const t=e.getExtent(),n=fn(i);if(e.canWrapX()&&(n[0]<t[0]||n[0]>=t[2])){const s=ve(t),o=Math.floor((n[0]-t[0])/s)*s;i[0]-=o,i[2]-=o}return i}function Dh(i,e){if(e.canWrapX()){const t=e.getExtent();if(!isFinite(i[0])||!isFinite(i[2]))return[[t[0],i[1],t[2],i[3]]];vu(i,e);const n=ve(t);if(ve(i)>n)return[[t[0],i[1],t[2],i[3]]];if(i[0]<t[0])return[[i[0]+n,i[1],t[2],i[3]],[t[0],i[1],i[2],i[3]]];if(i[2]>t[2])return[[i[0],i[1],t[2],i[3]],[t[0],i[1],i[2]-n,i[3]]]}return[i]}function Me(i,e,t){return Math.min(Math.max(i,e),t)}function Bh(i,e,t,n,s,r){const o=s-t,a=r-n;if(o!==0||a!==0){const l=((i-t)*o+(e-n)*a)/(o*o+a*a);l>1?(t=s,n=r):l>0&&(t+=o*l,n+=a*l)}return sn(i,e,t,n)}function sn(i,e,t,n){const s=t-i,r=n-e;return s*s+r*r}function Nh(i){const e=i.length;for(let n=0;n<e;n++){let s=n,r=Math.abs(i[n][n]);for(let a=n+1;a<e;a++){const l=Math.abs(i[a][n]);l>r&&(r=l,s=a)}if(r===0)return null;const o=i[s];i[s]=i[n],i[n]=o;for(let a=n+1;a<e;a++){const l=-i[a][n]/i[n][n];for(let u=n;u<e+1;u++)n==u?i[a][u]=0:i[a][u]+=l*i[n][u]}}const t=new Array(e);for(let n=e-1;n>=0;n--){t[n]=i[n][e]/i[n][n];for(let s=n-1;s>=0;s--)i[s][e]-=i[s][n]*t[n]}return t}function Ss(i){return i*Math.PI/180}function rn(i,e){const t=i%e;return t*e<0?t+e:t}function Lt(i,e,t){return i+t*(e-i)}function So(i,e){const t=Math.pow(10,e);return Math.round(i*t)/t}function ls(i,e){return Math.floor(So(i,e))}function us(i,e){return Math.ceil(So(i,e))}const Vh=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,qh=/^([a-z]*)$|^hsla?\(.*\)$/i;function yu(i){return typeof i=="string"?i:xu(i)}function zh(i){const e=document.createElement("div");if(e.style.color=i,e.style.color!==""){document.body.appendChild(e);const t=getComputedStyle(e).color;return document.body.removeChild(e),t}return""}const Gh=function(){const e={};let t=0;return function(n){let s;if(e.hasOwnProperty(n))s=e[n];else{if(t>=1024){let r=0;for(const o in e)(r++&3)===0&&(delete e[o],--t)}s=Wh(n),e[n]=s,++t}return s}}();function ks(i){return Array.isArray(i)?i:Gh(i)}function Wh(i){let e,t,n,s,r;if(qh.exec(i)&&(i=zh(i)),Vh.exec(i)){const o=i.length-1;let a;o<=4?a=1:a=2;const l=o===4||o===8;e=parseInt(i.substr(1+0*a,a),16),t=parseInt(i.substr(1+1*a,a),16),n=parseInt(i.substr(1+2*a,a),16),l?s=parseInt(i.substr(1+3*a,a),16):s=255,a==1&&(e=(e<<4)+e,t=(t<<4)+t,n=(n<<4)+n,l&&(s=(s<<4)+s)),r=[e,t,n,s/255]}else i.startsWith("rgba(")?(r=i.slice(5,-1).split(",").map(Number),Na(r)):i.startsWith("rgb(")?(r=i.slice(4,-1).split(",").map(Number),r.push(1),Na(r)):oe(!1,14);return r}function Na(i){return i[0]=Me(i[0]+.5|0,0,255),i[1]=Me(i[1]+.5|0,0,255),i[2]=Me(i[2]+.5|0,0,255),i[3]=Me(i[3],0,1),i}function xu(i){let e=i[0];e!=(e|0)&&(e=e+.5|0);let t=i[1];t!=(t|0)&&(t=t+.5|0);let n=i[2];n!=(n|0)&&(n=n+.5|0);const s=i[3]===void 0?1:Math.round(i[3]*100)/100;return"rgba("+e+","+t+","+n+","+s+")"}class Xh{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const n=this.cache_[t];(e++&3)===0&&!n.hasListener()&&(delete this.cache_[t],--this.cacheSize_)}}}get(e,t,n){const s=Va(e,t,n);return s in this.cache_?this.cache_[s]:null}set(e,t,n,s){const r=Va(e,t,n);this.cache_[r]=s,++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function Va(i,e,t){const n=t?yu(t):"null";return e+":"+i+":"+n}const Ps=new Xh;var fe={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class jh extends Wt{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[fe.OPACITY]=e.opacity!==void 0?e.opacity:1,oe(typeof t[fe.OPACITY]=="number",64),t[fe.VISIBLE]=e.visible!==void 0?e.visible:!0,t[fe.Z_INDEX]=e.zIndex,t[fe.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[fe.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[fe.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[fe.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},n=this.getZIndex();return t.opacity=Me(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=n===void 0&&!t.managed?1/0:n,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return ae()}getLayerStatesArray(e){return ae()}getExtent(){return this.get(fe.EXTENT)}getMaxResolution(){return this.get(fe.MAX_RESOLUTION)}getMinResolution(){return this.get(fe.MIN_RESOLUTION)}getMinZoom(){return this.get(fe.MIN_ZOOM)}getMaxZoom(){return this.get(fe.MAX_ZOOM)}getOpacity(){return this.get(fe.OPACITY)}getSourceState(){return ae()}getVisible(){return this.get(fe.VISIBLE)}getZIndex(){return this.get(fe.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(fe.EXTENT,e)}setMaxResolution(e){this.set(fe.MAX_RESOLUTION,e)}setMinResolution(e){this.set(fe.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(fe.MAX_ZOOM,e)}setMinZoom(e){this.set(fe.MIN_ZOOM,e)}setOpacity(e){oe(typeof e=="number",64),this.set(fe.OPACITY,e)}setVisible(e){this.set(fe.VISIBLE,e)}setZIndex(e){this.set(fe.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}var Su=jh,ci={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},Je={ANIMATING:0,INTERACTING:1},Rt={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};const Yh=42,Co=256,On={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class $h{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||On[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}var Cu=$h;const Kn=6378137,Ji=Math.PI*Kn,Kh=[-Ji,-Ji,Ji,Ji],Uh=[-180,-85,180,85],cs=Kn*Math.log(Math.tan(Math.PI/2));class qi extends Cu{constructor(e){super({code:e,units:"m",extent:Kh,global:!0,worldExtent:Uh,getPointResolution:function(t,n){return t/Math.cosh(n[1]/Kn)}})}}const qa=[new qi("EPSG:3857"),new qi("EPSG:102100"),new qi("EPSG:102113"),new qi("EPSG:900913"),new qi("http://www.opengis.net/def/crs/EPSG/0/3857"),new qi("http://www.opengis.net/gml/srs/epsg.xml#3857")];function Hh(i,e,t){const n=i.length;t=t>1?t:2,e===void 0&&(t>2?e=i.slice():e=new Array(n));for(let s=0;s<n;s+=t){e[s]=Ji*i[s]/180;let r=Kn*Math.log(Math.tan(Math.PI*(+i[s+1]+90)/360));r>cs?r=cs:r<-cs&&(r=-cs),e[s+1]=r}return e}function Zh(i,e,t){const n=i.length;t=t>1?t:2,e===void 0&&(t>2?e=i.slice():e=new Array(n));for(let s=0;s<n;s+=t)e[s]=180*i[s]/Ji,e[s+1]=360*Math.atan(Math.exp(i[s+1]/Kn))/Math.PI-90;return e}const Jh=6378137,za=[-180,-90,180,90],Qh=Math.PI*Jh/180;class Si extends Cu{constructor(e,t){super({code:e,units:"degrees",extent:za,axisOrientation:t,global:!0,metersPerUnit:Qh,worldExtent:za})}}const Ga=[new Si("CRS:84"),new Si("EPSG:4326","neu"),new Si("urn:ogc:def:crs:OGC:1.3:CRS84"),new Si("urn:ogc:def:crs:OGC:2:84"),new Si("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Si("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Si("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let $r={};function ef(i){return $r[i]||$r[i.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function tf(i,e){$r[i]=e}let on={};function Os(i,e,t){const n=i.getCode(),s=e.getCode();n in on||(on[n]={}),on[n][s]=t}function nf(i,e){let t;return i in on&&e in on[i]&&(t=on[i][e]),t}function sf(i,e){return i[0]+=+e[0],i[1]+=+e[1],i}function Fs(i,e){let t=!0;for(let n=i.length-1;n>=0;--n)if(i[n]!=e[n]){t=!1;break}return t}function Eo(i,e){const t=Math.cos(e),n=Math.sin(e),s=i[0]*t-i[1]*n,r=i[1]*t+i[0]*n;return i[0]=s,i[1]=r,i}function rf(i,e){return i[0]*=e,i[1]*=e,i}function Eu(i,e){if(e.canWrapX()){const t=ve(e.getExtent()),n=of(i,e,t);n&&(i[0]-=n*t)}return i}function of(i,e,t){const n=e.getExtent();let s=0;return e.canWrapX()&&(i[0]<n[0]||i[0]>n[2])&&(t=t||ve(n),s=Math.floor((i[0]-n[0])/t)),s}const af=63710088e-1;function Wa(i,e,t){t=t||af;const n=Ss(i[1]),s=Ss(e[1]),r=(s-n)/2,o=Ss(e[0]-i[0])/2,a=Math.sin(r)*Math.sin(r)+Math.sin(o)*Math.sin(o)*Math.cos(n)*Math.cos(s);return 2*t*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}const bu={info:1,warn:2,error:3,none:4};let lf=bu.info;function wu(...i){lf>bu.warn||console.warn(...i)}let Kr=!0;function Ru(i){Kr=!(i===void 0?!0:i)}function bo(i,e){if(e!==void 0){for(let t=0,n=i.length;t<n;++t)e[t]=i[t];e=e}else e=i.slice();return e}function Tu(i,e){if(e!==void 0&&i!==e){for(let t=0,n=i.length;t<n;++t)e[t]=i[t];i=e}return i}function uf(i){tf(i.getCode(),i),Os(i,i,bo)}function cf(i){i.forEach(uf)}function kt(i){return typeof i=="string"?ef(i):i||null}function Xa(i,e,t,n){i=kt(i);let s;const r=i.getPointResolutionFunc();if(r){if(s=r(e,t),n&&n!==i.getUnits()){const o=i.getMetersPerUnit();o&&(s=s*o/On[n])}}else{const o=i.getUnits();if(o=="degrees"&&!n||n=="degrees")s=e;else{const a=Ro(i,kt("EPSG:4326"));if(a===Tu&&o!=="degrees")s=e*i.getMetersPerUnit();else{let u=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];u=a(u,u,2);const c=Wa(u.slice(0,2),u.slice(2,4)),d=Wa(u.slice(4,6),u.slice(6,8));s=(c+d)/2}const l=n?On[n]:i.getMetersPerUnit();l!==void 0&&(s/=l)}}return s}function ja(i){cf(i),i.forEach(function(e){i.forEach(function(t){e!==t&&Os(e,t,bo)})})}function df(i,e,t,n){i.forEach(function(s){e.forEach(function(r){Os(s,r,t),Os(r,s,n)})})}function wo(i,e){return i?typeof i=="string"?kt(i):i:kt(e)}function hf(i,e){return Ru(),Iu(i,"EPSG:4326",e!==void 0?e:"EPSG:3857")}function ji(i,e){if(i===e)return!0;const t=i.getUnits()===e.getUnits();return(i.getCode()===e.getCode()||Ro(i,e)===bo)&&t}function Ro(i,e){const t=i.getCode(),n=e.getCode();let s=nf(t,n);return s||(s=Tu),s}function Ds(i,e){const t=kt(i),n=kt(e);return Ro(t,n)}function Iu(i,e,t){return Ds(e,t)(i,void 0,i.length)}function Ur(i,e){return i}function $t(i,e){return Kr&&!Fs(i,[0,0])&&i[0]>=-180&&i[0]<=180&&i[1]>=-90&&i[1]<=90&&(Kr=!1,wu("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),i}function Lu(i,e){return i}function wi(i,e){return i}function ff(){ja(qa),ja(Ga),df(Ga,qa,Hh,Zh)}ff();function Ya(i,e,t){return function(n,s,r,o,a){if(!n)return;if(!s&&!e)return n;const l=e?0:r[0]*s,u=e?0:r[1]*s,c=a?a[0]:0,d=a?a[1]:0;let h=i[0]+l/2+c,f=i[2]-l/2+c,g=i[1]+u/2+d,m=i[3]-u/2+d;h>f&&(h=(f+h)/2,f=h),g>m&&(g=(m+g)/2,m=g);let p=Me(n[0],h,f),y=Me(n[1],g,m);if(o&&t&&s){const _=30*s;p+=-_*Math.log(1+Math.max(0,h-n[0])/_)+_*Math.log(1+Math.max(0,n[0]-f)/_),y+=-_*Math.log(1+Math.max(0,g-n[1])/_)+_*Math.log(1+Math.max(0,n[1]-m)/_)}return[p,y]}}function gf(i){return i}function To(i,e,t,n){const s=ve(e)/t[0],r=Gt(e)/t[1];return n?Math.min(i,Math.max(s,r)):Math.min(i,Math.min(s,r))}function Io(i,e,t){let n=Math.min(i,e);const s=50;return n*=Math.log(1+s*Math.max(0,i/e-1))/s+1,t&&(n=Math.max(n,t),n/=Math.log(1+s*Math.max(0,t/i-1))/s+1),Me(n,t/2,e*2)}function mf(i,e,t,n){return e=e!==void 0?e:!0,function(s,r,o,a){if(s!==void 0){const l=i[0],u=i[i.length-1],c=t?To(l,t,o,n):l;if(a)return e?Io(s,c,u):Me(s,u,c);const d=Math.min(c,s),h=Math.floor(_o(i,d,r));return i[h]>c&&h<i.length-1?i[h+1]:i[h]}}}function _f(i,e,t,n,s,r){return n=n!==void 0?n:!0,t=t!==void 0?t:0,function(o,a,l,u){if(o!==void 0){const c=s?To(e,s,l,r):e;if(u)return n?Io(o,c,t):Me(o,t,c);const d=1e-9,h=Math.ceil(Math.log(e/c)/Math.log(i)-d),f=-a*(.5-d)+.5,g=Math.min(c,o),m=Math.floor(Math.log(e/g)/Math.log(i)+f),p=Math.max(h,m),y=e/Math.pow(i,p);return Me(y,t,c)}}}function $a(i,e,t,n,s){return t=t!==void 0?t:!0,function(r,o,a,l){if(r!==void 0){const u=n?To(i,n,a,s):i;return!t||!l?Me(r,e,u):Io(r,u,e)}}}function Lo(i){if(i!==void 0)return 0}function Ka(i){if(i!==void 0)return i}function pf(i){const e=2*Math.PI/i;return function(t,n){if(n)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t}}function vf(i){return i=i||Ss(5),function(e,t){if(t)return e;if(e!==void 0)return Math.abs(e)<=i?0:e}}function Au(i){return Math.pow(i,3)}function mn(i){return 1-Au(1-i)}function yf(i){return 3*i*i-2*i*i*i}function xf(i){return i}function ki(i,e,t,n,s,r){r=r||[];let o=0;for(let a=e;a<t;a+=n){const l=i[a],u=i[a+1];r[o++]=s[0]*l+s[2]*u+s[4],r[o++]=s[1]*l+s[3]*u+s[5]}return r&&r.length!=o&&(r.length=o),r}function Mu(i,e,t,n,s,r,o){o=o||[];const a=Math.cos(s),l=Math.sin(s),u=r[0],c=r[1];let d=0;for(let h=e;h<t;h+=n){const f=i[h]-u,g=i[h+1]-c;o[d++]=u+f*a-g*l,o[d++]=c+f*l+g*a;for(let m=h+2;m<h+n;++m)o[d++]=i[m]}return o&&o.length!=d&&(o.length=d),o}function Sf(i,e,t,n,s,r,o,a){a=a||[];const l=o[0],u=o[1];let c=0;for(let d=e;d<t;d+=n){const h=i[d]-l,f=i[d+1]-u;a[c++]=l+s*h,a[c++]=u+r*f;for(let g=d+2;g<d+n;++g)a[c++]=i[g]}return a&&a.length!=c&&(a.length=c),a}function Cf(i,e,t,n,s,r,o){o=o||[];let a=0;for(let l=e;l<t;l+=n){o[a++]=i[l]+s,o[a++]=i[l+1]+r;for(let u=l+2;u<l+n;++u)o[a++]=i[u]}return o&&o.length!=a&&(o.length=a),o}const Ua=zt();class Ef extends Wt{constructor(){super(),this.extent_=Mt(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=hh(function(e,t,n){if(!n)return this.getSimplifiedGeometry(t);const s=this.clone();return s.applyTransform(n),s.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return ae()}closestPointXY(e,t,n,s){return ae()}containsXY(e,t){const n=this.getClosestPoint([e,t]);return n[0]===e&&n[1]===t}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return ae()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&Zs(t),this.extentRevision_=this.getRevision()}return Oh(this.extent_,e)}rotate(e,t){ae()}scale(e,t,n){ae()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return ae()}getType(){return ae()}applyTransform(e){ae()}intersectsExtent(e){return ae()}translate(e,t){ae()}transform(e,t){const n=kt(e),s=n.getUnits()=="tile-pixels"?function(r,o,a){const l=n.getExtent(),u=n.getWorldExtent(),c=Gt(u)/Gt(l);return hi(Ua,u[0],u[3],c,-c,0,0,0),ki(r,0,r.length,a,Ua,o),Ds(n,t)(r,o,a)}:Ds(n,t);return this.applyTransform(s),this}}var bf=Ef;class wf extends bf{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(e){return Ah(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return ae()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=Ha(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){ae()}setLayout(e,t,n){let s;if(e)s=Ha(e);else{for(let r=0;r<n;++r){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}s=t.length,e=Rf(s)}this.layout=e,this.stride=s}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(e,t){const n=this.getFlatCoordinates();if(n){const s=this.getStride();Mu(n,0,n.length,s,e,t,n),this.changed()}}scale(e,t,n){t===void 0&&(t=e),n||(n=fn(this.getExtent()));const s=this.getFlatCoordinates();if(s){const r=this.getStride();Sf(s,0,s.length,r,e,t,n,s),this.changed()}}translate(e,t){const n=this.getFlatCoordinates();if(n){const s=this.getStride();Cf(n,0,n.length,s,e,t,n),this.changed()}}}function Rf(i){let e;return i==2?e="XY":i==3?e="XYZ":i==4&&(e="XYZM"),e}function Ha(i){let e;return i=="XY"?e=2:i=="XYZ"||i=="XYM"?e=3:i=="XYZM"&&(e=4),e}function Tf(i,e,t){const n=i.getFlatCoordinates();if(!n)return null;const s=i.getStride();return ki(n,0,n.length,s,e,t)}var Ao=wf;function Za(i,e,t,n,s,r,o){const a=i[e],l=i[e+1],u=i[t]-a,c=i[t+1]-l;let d;if(u===0&&c===0)d=e;else{const h=((s-a)*u+(r-l)*c)/(u*u+c*c);if(h>1)d=t;else if(h>0){for(let f=0;f<n;++f)o[f]=Lt(i[e+f],i[t+f],h);o.length=n;return}else d=e}for(let h=0;h<n;++h)o[h]=i[d+h];o.length=n}function ku(i,e,t,n,s){let r=i[e],o=i[e+1];for(e+=n;e<t;e+=n){const a=i[e],l=i[e+1],u=sn(r,o,a,l);u>s&&(s=u),r=a,o=l}return s}function If(i,e,t,n,s){for(let r=0,o=t.length;r<o;++r){const a=t[r];s=ku(i,e,a,n,s),e=a}return s}function Pu(i,e,t,n,s,r,o,a,l,u,c){if(e==t)return u;let d,h;if(s===0){if(h=sn(o,a,i[e],i[e+1]),h<u){for(d=0;d<n;++d)l[d]=i[e+d];return l.length=n,h}return u}c=c||[NaN,NaN];let f=e+n;for(;f<t;)if(Za(i,f-n,f,n,o,a,c),h=sn(o,a,c[0],c[1]),h<u){for(u=h,d=0;d<n;++d)l[d]=c[d];l.length=n,f+=n}else f+=n*Math.max((Math.sqrt(h)-Math.sqrt(u))/s|0,1);if(r&&(Za(i,t-n,e,n,o,a,c),h=sn(o,a,c[0],c[1]),h<u)){for(u=h,d=0;d<n;++d)l[d]=c[d];l.length=n}return u}function Lf(i,e,t,n,s,r,o,a,l,u,c){c=c||[NaN,NaN];for(let d=0,h=t.length;d<h;++d){const f=t[d];u=Pu(i,e,f,n,s,r,o,a,l,u,c),e=f}return u}function Af(i,e,t,n){for(let s=0,r=t.length;s<r;++s)i[e++]=t[s];return e}function Ou(i,e,t,n){for(let s=0,r=t.length;s<r;++s){const o=t[s];for(let a=0;a<n;++a)i[e++]=o[a]}return e}function Mf(i,e,t,n,s){s=s||[];let r=0;for(let o=0,a=t.length;o<a;++o){const l=Ou(i,e,t[o],n);s[r++]=l,e=l}return s.length=r,s}function kf(i,e,t,n,s,r,o){const a=(t-e)/n;if(a<3){for(;e<t;e+=n)r[o++]=i[e],r[o++]=i[e+1];return o}const l=new Array(a);l[0]=1,l[a-1]=1;const u=[e,t-n];let c=0;for(;u.length>0;){const d=u.pop(),h=u.pop();let f=0;const g=i[h],m=i[h+1],p=i[d],y=i[d+1];for(let _=h+n;_<d;_+=n){const v=i[_],S=i[_+1],b=Bh(v,S,g,m,p,y);b>f&&(c=_,f=b)}f>s&&(l[(c-e)/n]=1,h+n<c&&u.push(h,c),c+n<d&&u.push(c,d))}for(let d=0;d<a;++d)l[d]&&(r[o++]=i[e+d*n],r[o++]=i[e+d*n+1]);return o}function Ei(i,e){return e*Math.round(i/e)}function Pf(i,e,t,n,s,r,o){if(e==t)return o;let a=Ei(i[e],s),l=Ei(i[e+1],s);e+=n,r[o++]=a,r[o++]=l;let u,c;do if(u=Ei(i[e],s),c=Ei(i[e+1],s),e+=n,e==t)return r[o++]=u,r[o++]=c,o;while(u==a&&c==l);for(;e<t;){const d=Ei(i[e],s),h=Ei(i[e+1],s);if(e+=n,d==u&&h==c)continue;const f=u-a,g=c-l,m=d-a,p=h-l;if(f*p==g*m&&(f<0&&m<f||f==m||f>0&&m>f)&&(g<0&&p<g||g==p||g>0&&p>g)){u=d,c=h;continue}r[o++]=u,r[o++]=c,a=u,l=c,u=d,c=h}return r[o++]=u,r[o++]=c,o}function Of(i,e,t,n,s,r,o,a){for(let l=0,u=t.length;l<u;++l){const c=t[l];o=Pf(i,e,c,n,s,r,o),a.push(o),e=c}return o}function Qi(i,e,t,n,s){s=s!==void 0?s:[];let r=0;for(let o=e;o<t;o+=n)s[r++]=i.slice(o,o+n);return s.length=r,s}function Bs(i,e,t,n,s){s=s!==void 0?s:[];let r=0;for(let o=0,a=t.length;o<a;++o){const l=t[o];s[r++]=Qi(i,e,l,n,s[r]),e=l}return s.length=r,s}function Ja(i,e,t,n,s){s=s!==void 0?s:[];let r=0;for(let o=0,a=t.length;o<a;++o){const l=t[o];s[r++]=l.length===1&&l[0]===e?[]:Bs(i,e,l,n,s[r]),e=l[l.length-1]}return s.length=r,s}function Fu(i,e,t,n){let s=0,r=i[t-n],o=i[t-n+1];for(;e<t;e+=n){const a=i[e],l=i[e+1];s+=o*a-r*l,r=a,o=l}return s/2}function Ff(i,e,t,n){let s=0;for(let r=0,o=t.length;r<o;++r){const a=t[r];s+=Fu(i,e,a,n),e=a}return s}class Ns extends Ao{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new Ns(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,n,s){return s<gu(this.getExtent(),e,t)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(ku(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Pu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,n,s))}getArea(){return Fu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return Qi(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=kf(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new Ns(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Ou(this.flatCoordinates,0,e,this.stride),this.changed()}}var Qa=Ns;class Mo extends Ao{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new Mo(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,n,s){const r=this.flatCoordinates,o=sn(e,t,r[0],r[1]);if(o<s){const a=this.stride;for(let l=0;l<a;++l)n[l]=r[l];return n.length=a,o}return s}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(e){return Lh(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return mu(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Af(this.flatCoordinates,0,e,this.stride),this.changed()}}var Du=Mo;function Df(i,e,t,n,s){return!pu(s,function(o){return!Ri(i,e,t,n,o[0],o[1])})}function Ri(i,e,t,n,s,r){let o=0,a=i[t-n],l=i[t-n+1];for(;e<t;e+=n){const u=i[e],c=i[e+1];l<=r?c>r&&(u-a)*(r-l)-(s-a)*(c-l)>0&&o++:c<=r&&(u-a)*(r-l)-(s-a)*(c-l)<0&&o--,a=u,l=c}return o!==0}function Bu(i,e,t,n,s,r){if(t.length===0||!Ri(i,e,t[0],n,s,r))return!1;for(let o=1,a=t.length;o<a;++o)if(Ri(i,t[o-1],t[o],n,s,r))return!1;return!0}function Bf(i,e,t,n,s,r,o){let a,l,u,c,d,h,f;const g=s[r+1],m=[];for(let _=0,v=t.length;_<v;++_){const S=t[_];for(c=i[S-n],h=i[S-n+1],a=e;a<S;a+=n)d=i[a],f=i[a+1],(g<=h&&f<=g||h<=g&&g<=f)&&(u=(g-h)/(f-h)*(d-c)+c,m.push(u)),c=d,h=f}let p=NaN,y=-1/0;for(m.sort(dn),c=m[0],a=1,l=m.length;a<l;++a){d=m[a];const _=Math.abs(d-c);_>y&&(u=(c+d)/2,Bu(i,e,t,n,u,g)&&(p=u,y=_)),c=d}return isNaN(p)&&(p=s[r]),o?(o.push(p,g,y),o):[p,g,y]}function Nf(i,e,t,n,s){let r;for(e+=n;e<t;e+=n)if(r=s(i.slice(e-n,e),i.slice(e,e+n)),r)return r;return!1}function Nu(i,e,t,n,s){const r=_u(Mt(),i,e,t,n);return ct(s,r)?Zi(s,r)||r[0]>=s[0]&&r[2]<=s[2]||r[1]>=s[1]&&r[3]<=s[3]?!0:Nf(i,e,t,n,function(o,a){return Fh(s,o,a)}):!1}function Vu(i,e,t,n,s){return!!(Nu(i,e,t,n,s)||Ri(i,e,t,n,s[0],s[1])||Ri(i,e,t,n,s[0],s[3])||Ri(i,e,t,n,s[2],s[1])||Ri(i,e,t,n,s[2],s[3]))}function Vf(i,e,t,n,s){if(!Vu(i,e,t[0],n,s))return!1;if(t.length===1)return!0;for(let r=1,o=t.length;r<o;++r)if(Df(i,t[r-1],t[r],n,s)&&!Nu(i,t[r-1],t[r],n,s))return!1;return!0}function qf(i,e,t,n){for(;e<t-n;){for(let s=0;s<n;++s){const r=i[e+s];i[e+s]=i[t-n+s],i[t-n+s]=r}e+=n,t-=n}}function qu(i,e,t,n){let s=0,r=i[t-n],o=i[t-n+1];for(;e<t;e+=n){const a=i[e],l=i[e+1];s+=(a-r)*(l+o),r=a,o=l}return s===0?void 0:s>0}function zf(i,e,t,n,s){s=s!==void 0?s:!1;for(let r=0,o=t.length;r<o;++r){const a=t[r],l=qu(i,e,a,n);if(r===0){if(s&&l||!s&&!l)return!1}else if(s&&!l||!s&&l)return!1;e=a}return!0}function el(i,e,t,n,s){s=s!==void 0?s:!1;for(let r=0,o=t.length;r<o;++r){const a=t[r],l=qu(i,e,a,n);(r===0?s&&l||!s&&!l:s&&!l||!s&&l)&&qf(i,e,a,n),e=a}return e}class Fn extends Ao{constructor(e,t,n){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&n?(this.setFlatCoordinates(t,e),this.ends_=n):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?au(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Fn(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,n,s){return s<gu(this.getExtent(),e,t)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(If(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Lf(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,n,s))}containsXY(e,t){return Bu(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return Ff(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),el(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,Bs(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=fn(this.getExtent());this.flatInteriorPoint_=Bf(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Du(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new Qa(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,n=this.ends_,s=[];let r=0;for(let o=0,a=n.length;o<a;++o){const l=n[o],u=new Qa(t.slice(r,l),e);s.push(u),r=l}return s}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;zf(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=el(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],n=[];return t.length=Of(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,n),new Fn(t,"XY",n)}getType(){return"Polygon"}intersectsExtent(e){return Vf(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=Mf(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}}function tl(i){const e=i[0],t=i[1],n=i[2],s=i[3],r=[e,t,e,s,n,s,n,t,e,t];return new Fn(r,"XY",[r.length])}const Er=0;class Gf extends Wt{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=wo(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&Ru(),e.center&&(e.center=$t(e.center,this.projection_)),e.extent&&(e.extent=wi(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const a in Rt)delete t[a];this.setProperties(t,!0);const n=Xf(e);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=n.minZoom;const s=Wf(e),r=n.constraint,o=jf(e);this.constraints_={center:s,resolution:r,rotation:o},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const n=this.getCenterInternal();if(n){const s=e||[0,0,0,0];t=t||[0,0,0,0];const r=this.getResolution(),o=r/2*(s[3]-t[3]+t[1]-s[1]),a=r/2*(s[0]-t[0]+t[2]-s[2]);this.setCenterInternal([n[0]+o,n[1]-a])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let n=0;n<t.length;++n){let s=arguments[n];s.center&&(s=Object.assign({},s),s.center=$t(s.center,this.getProjection())),s.anchor&&(s=Object.assign({},s),s.anchor=$t(s.anchor,this.getProjection())),t[n]=s}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,n;t>1&&typeof arguments[t-1]=="function"&&(n=arguments[t-1],--t);let s=0;for(;s<t&&!this.isDef();++s){const c=arguments[s];c.center&&this.setCenterInternal(c.center),c.zoom!==void 0?this.setZoom(c.zoom):c.resolution&&this.setResolution(c.resolution),c.rotation!==void 0&&this.setRotation(c.rotation)}if(s===t){n&&ds(n,!0);return}let r=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_;const u=[];for(;s<t;++s){const c=arguments[s],d={start:r,complete:!1,anchor:c.anchor,duration:c.duration!==void 0?c.duration:1e3,easing:c.easing||yf,callback:n};if(c.center&&(d.sourceCenter=o,d.targetCenter=c.center.slice(),o=d.targetCenter),c.zoom!==void 0?(d.sourceResolution=a,d.targetResolution=this.getResolutionForZoom(c.zoom),a=d.targetResolution):c.resolution&&(d.sourceResolution=a,d.targetResolution=c.resolution,a=d.targetResolution),c.rotation!==void 0){d.sourceRotation=l;const h=rn(c.rotation-l+Math.PI,2*Math.PI)-Math.PI;d.targetRotation=l+h,l=d.targetRotation}Yf(d)?d.complete=!0:r+=d.duration,u.push(d)}this.animations_.push(u),this.setHint(Je.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[Je.ANIMATING]>0}getInteracting(){return this.hints_[Je.INTERACTING]>0}cancelAnimations(){this.setHint(Je.ANIMATING,-this.hints_[Je.ANIMATING]);let e;for(let t=0,n=this.animations_.length;t<n;++t){const s=this.animations_[t];if(s[0].callback&&ds(s[0].callback,!1),!e)for(let r=0,o=s.length;r<o;++r){const a=s[r];if(!a.complete){e=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let n=this.animations_.length-1;n>=0;--n){const s=this.animations_[n];let r=!0;for(let o=0,a=s.length;o<a;++o){const l=s[o];if(l.complete)continue;const u=e-l.start;let c=l.duration>0?u/l.duration:1;c>=1?(l.complete=!0,c=1):r=!1;const d=l.easing(c);if(l.sourceCenter){const h=l.sourceCenter[0],f=l.sourceCenter[1],g=l.targetCenter[0],m=l.targetCenter[1];this.nextCenter_=l.targetCenter;const p=h+d*(g-h),y=f+d*(m-f);this.targetCenter_=[p,y]}if(l.sourceResolution&&l.targetResolution){const h=d===1?l.targetResolution:l.sourceResolution+d*(l.targetResolution-l.sourceResolution);if(l.anchor){const f=this.getViewportSize_(this.getRotation()),g=this.constraints_.resolution(h,0,f,!0);this.targetCenter_=this.calculateCenterZoom(g,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=h,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){const h=d===1?rn(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+d*(l.targetRotation-l.sourceRotation);if(l.anchor){const f=this.constraints_.rotation(h,!0);this.targetCenter_=this.calculateCenterRotate(f,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=h}if(this.applyTargetState_(!0),t=!0,!l.complete)break}if(r){this.animations_[n]=null,this.setHint(Je.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const o=s[0].callback;o&&ds(o,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let n;const s=this.getCenterInternal();return s!==void 0&&(n=[s[0]-t[0],s[1]-t[1]],Eo(n,e-this.getRotation()),sf(n,t)),n}calculateCenterZoom(e,t){let n;const s=this.getCenterInternal(),r=this.getResolution();if(s!==void 0&&r!==void 0){const o=t[0]-e*(t[0]-s[0])/r,a=t[1]-e*(t[1]-s[1])/r;n=[o,a]}return n}getViewportSize_(e){const t=this.viewportSize_;if(e){const n=t[0],s=t[1];return[Math.abs(n*Math.cos(e))+Math.abs(s*Math.sin(e)),Math.abs(n*Math.sin(e))+Math.abs(s*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&Ur(e,this.getProjection())}getCenterInternal(){return this.get(Rt.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return Lu(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();oe(t,1);const n=this.getResolution();oe(n!==void 0,2);const s=this.getRotation();return oe(s!==void 0,3),jr(t,n,s,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(Rt.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(wi(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const n=ve(e)/t[0],s=Gt(e)/t[1];return Math.max(n,s)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,s=Math.log(t/n)/Math.log(e);return function(r){return t/Math.pow(e,r*s)}}getRotation(){return this.get(Rt.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),n=this.getConstrainedResolution(this.maxResolution_),s=this.minResolution_,r=Math.log(n/s)/t;return function(o){return Math.log(n/o)/t/r}}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const n=this.padding_;return n&&(t=[t[0]-n[1]-n[3],t[1]-n[0]-n[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),n=this.getRotation();let s=this.getCenterInternal();const r=this.padding_;if(r){const o=this.getViewportSizeMinusPadding_();s=br(s,this.getViewportSize_(),[o[0]/2+r[3],o[1]/2+r[0]],t,n)}return{center:s.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,n,s;if(this.resolutions_){const r=_o(this.resolutions_,e,1);t=r,n=this.resolutions_[r],r==this.resolutions_.length-1?s=2:s=n/this.resolutions_[r+1]}else n=this.maxResolution_,s=this.zoomFactor_;return t+Math.log(n/e)/Math.log(s)}getResolutionForZoom(e){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const t=Me(Math.floor(e),0,this.resolutions_.length-2),n=this.resolutions_[t]/this.resolutions_[t+1];return this.resolutions_[t]/Math.pow(n,Me(e-t,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let n;if(oe(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function",24),Array.isArray(e)){oe(!xo(e),25);const s=wi(e,this.getProjection());n=tl(s)}else if(e.getType()==="Circle"){const s=wi(e.getExtent(),this.getProjection());n=tl(s),n.rotate(this.getRotation(),fn(s))}else n=e;this.fitInternal(n,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),n=Math.cos(t),s=Math.sin(-t),r=e.getFlatCoordinates(),o=e.getStride();let a=1/0,l=1/0,u=-1/0,c=-1/0;for(let d=0,h=r.length;d<h;d+=o){const f=r[d]*n-r[d+1]*s,g=r[d]*s+r[d+1]*n;a=Math.min(a,f),l=Math.min(l,g),u=Math.max(u,f),c=Math.max(c,g)}return[a,l,u,c]}fitInternal(e,t){t=t||{};let n=t.size;n||(n=this.getViewportSizeMinusPadding_());const s=t.padding!==void 0?t.padding:[0,0,0,0],r=t.nearest!==void 0?t.nearest:!1;let o;t.minResolution!==void 0?o=t.minResolution:t.maxZoom!==void 0?o=this.getResolutionForZoom(t.maxZoom):o=0;const a=this.rotatedExtentForGeometry(e);let l=this.getResolutionForExtentInternal(a,[n[0]-s[1]-s[3],n[1]-s[0]-s[2]]);l=isNaN(l)?o:Math.max(l,o),l=this.getConstrainedResolution(l,r?0:1);const u=this.getRotation(),c=Math.sin(u),d=Math.cos(u),h=fn(a);h[0]+=(s[1]-s[3])/2*l,h[1]+=(s[0]-s[2])/2*l;const f=h[0]*d-h[1]*c,g=h[1]*d+h[0]*c,m=this.getConstrainedCenter([f,g],l),p=t.callback?t.callback:hn;t.duration!==void 0?this.animateInternal({resolution:l,center:m,duration:t.duration,easing:t.easing},p):(this.targetResolution_=l,this.targetCenter_=m,this.applyTargetState_(!1,!0),ds(p,!0))}centerOn(e,t,n){this.centerOnInternal($t(e,this.getProjection()),t,n)}centerOnInternal(e,t,n){this.setCenterInternal(br(e,t,n,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,n,s){let r;const o=this.padding_;if(o&&e){const a=this.getViewportSizeMinusPadding_(-n),l=br(e,s,[a[0]/2+o[3],a[1]/2+o[0]],t,n);r=[e[0]-l[0],e[1]-l[1]]}return r}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=Ur(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&$t(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const n=this.getAnimating()||this.getInteracting(),s=this.getViewportSize_(this.getRotation()),r=this.constraints_.resolution(this.targetResolution_*e,0,s,n);t&&(this.targetCenter_=this.calculateCenterZoom(r,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=$t(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const n=this.getAnimating()||this.getInteracting(),s=this.constraints_.rotation(this.targetRotation_+e,n);t&&(this.targetCenter_=this.calculateCenterRotate(s,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&$t(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const n=this.getAnimating()||this.getInteracting()||t,s=this.constraints_.rotation(this.targetRotation_,n),r=this.getViewportSize_(s),o=this.constraints_.resolution(this.targetResolution_,0,r,n),a=this.constraints_.center(this.targetCenter_,o,r,n,this.calculateCenterShift(this.targetCenter_,o,s,r));this.get(Rt.ROTATION)!==s&&this.set(Rt.ROTATION,s),this.get(Rt.RESOLUTION)!==o&&(this.set(Rt.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(Rt.CENTER)||!Fs(this.get(Rt.CENTER),a))&&this.set(Rt.CENTER,a),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,n){e=e!==void 0?e:200;const s=t||0,r=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(r),a=this.constraints_.resolution(this.targetResolution_,s,o),l=this.constraints_.center(this.targetCenter_,a,o,!1,this.calculateCenterShift(this.targetCenter_,a,r,o));if(e===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=r,this.targetCenter_=l,this.applyTargetState_();return}n=n||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==r||!this.getCenterInternal()||!Fs(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:r,center:l,resolution:a,duration:e,easing:mn,anchor:n}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Je.INTERACTING,1)}endInteraction(e,t,n){n=n&&$t(n,this.getProjection()),this.endInteractionInternal(e,t,n)}endInteractionInternal(e,t,n){!this.getInteracting()||(this.setHint(Je.INTERACTING,-1),this.resolveConstraints(e,t,n))}getConstrainedCenter(e,t){const n=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),n)}getConstrainedZoom(e,t){const n=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(n,t))}getConstrainedResolution(e,t){t=t||0;const n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,n)}}function ds(i,e){setTimeout(function(){i(e)},0)}function Wf(i){if(i.extent!==void 0){const t=i.smoothExtentConstraint!==void 0?i.smoothExtentConstraint:!0;return Ya(i.extent,i.constrainOnlyCenter,t)}const e=wo(i.projection,"EPSG:3857");if(i.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,Ya(t,!1,!1)}return gf}function Xf(i){let e,t,n,o=i.minZoom!==void 0?i.minZoom:Er,a=i.maxZoom!==void 0?i.maxZoom:28;const l=i.zoomFactor!==void 0?i.zoomFactor:2,u=i.multiWorld!==void 0?i.multiWorld:!1,c=i.smoothResolutionConstraint!==void 0?i.smoothResolutionConstraint:!0,d=i.showFullExtent!==void 0?i.showFullExtent:!1,h=wo(i.projection,"EPSG:3857"),f=h.getExtent();let g=i.constrainOnlyCenter,m=i.extent;if(!u&&!m&&h.isGlobal()&&(g=!1,m=f),i.resolutions!==void 0){const p=i.resolutions;t=p[o],n=p[a]!==void 0?p[a]:p[p.length-1],i.constrainResolution?e=mf(p,c,!g&&m,d):e=$a(t,n,c,!g&&m,d)}else{const y=(f?Math.max(ve(f),Gt(f)):360*On.degrees/h.getMetersPerUnit())/Co/Math.pow(2,Er),_=y/Math.pow(2,28-Er);t=i.maxResolution,t!==void 0?o=0:t=y/Math.pow(l,o),n=i.minResolution,n===void 0&&(i.maxZoom!==void 0?i.maxResolution!==void 0?n=t/Math.pow(l,a):n=y/Math.pow(l,a):n=_),a=o+Math.floor(Math.log(t/n)/Math.log(l)),n=t/Math.pow(l,a-o),i.constrainResolution?e=_f(l,t,n,c,!g&&m,d):e=$a(t,n,c,!g&&m,d)}return{constraint:e,maxResolution:t,minResolution:n,minZoom:o,zoomFactor:l}}function jf(i){if(i.enableRotation!==void 0?i.enableRotation:!0){const t=i.constrainRotation;return t===void 0||t===!0?vf():t===!1?Ka:typeof t=="number"?pf(t):Ka}return Lo}function Yf(i){return!(i.sourceCenter&&i.targetCenter&&!Fs(i.sourceCenter,i.targetCenter)||i.sourceResolution!==i.targetResolution||i.sourceRotation!==i.targetRotation)}function br(i,e,t,n,s){const r=Math.cos(-s);let o=Math.sin(-s),a=i[0]*r-i[1]*o,l=i[1]*r+i[0]*o;a+=(e[0]/2-t[0])*n,l+=(t[1]-e[1]/2)*n,o=-o;const u=a*r-l*o,c=l*r+a*o;return[u,c]}var Dt=Gf;class $f extends Su{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(fe.SOURCE,this.handleSourcePropertyChange_);const n=e.source?e.source:null;this.setSource(n)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(fe.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(xe(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=le(e,re.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const n=this.getMapInternal();!e&&n&&(e=n.getView()),e instanceof Dt?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&n&&(t.layerStatesArray=n.getLayerGroup().getLayerStatesArray());let s;t.layerStatesArray?s=t.layerStatesArray.find(o=>o.layer===this):s=this.getLayerState();const r=this.getExtent();return ko(s,t.viewState)&&(!r||ct(r,t.extent))}getAttributions(e){if(!this.isVisible(e))return[];let t;const n=this.getSource();if(n&&(t=n.getAttributions()),!t)return[];const s=e instanceof Dt?e.getViewStateAndExtent():e;let r=t(s);return Array.isArray(r)||(r=[r]),r}render(e,t){const n=this.getRenderer();return n.prepareFrame(e)?(this.rendered=!0,n.renderFrame(e,t)):null}unrender(){this.rendered=!1}setMapInternal(e){e||this.unrender(),this.set(fe.MAP,e)}getMapInternal(){return this.get(fe.MAP)}setMap(e){this.mapPrecomposeKey_&&(xe(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(xe(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=le(e,ci.PRECOMPOSE,function(t){const s=t.frameState.layerStatesArray,r=this.getLayerState(!1);oe(!s.some(function(o){return o.layer===r.layer}),67),s.push(r)},this),this.mapRenderKey_=le(this,re.CHANGE,e.render,e),this.changed())}setSource(e){this.set(fe.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}function ko(i,e){if(!i.visible)return!1;const t=e.resolution;if(t<i.minResolution||t>=i.maxResolution)return!1;const n=e.zoom;return n>i.minZoom&&n<=i.maxZoom}var tr=$f;class Kf extends mo{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){ae()}calculateMatrices2D(e){const t=e.viewState,n=e.coordinateToPixelTransform,s=e.pixelToCoordinateTransform;hi(n,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),vo(s,n)}forEachFeatureAtCoordinate(e,t,n,s,r,o,a,l){let u;const c=t.viewState;function d(S,b,I,T){return r.call(o,b,S?I:null,T)}const h=c.projection,f=Eu(e.slice(),h),g=[[0,0]];if(h.canWrapX()&&s){const S=h.getExtent(),b=ve(S);g.push([-b,0],[b,0])}const m=t.layerStatesArray,p=m.length,y=[],_=[];for(let S=0;S<g.length;S++)for(let b=p-1;b>=0;--b){const I=m[b],T=I.layer;if(T.hasRenderer()&&ko(I,c)&&a.call(l,T)){const A=T.getRenderer(),V=T.getSource();if(A&&V){const z=V.getWrapX()?f:e,X=d.bind(null,I.managed);_[0]=z[0]+g[S][0],_[1]=z[1]+g[S][1],u=A.forEachFeatureAtCoordinate(_,t,n,X,y)}if(u)return u}}if(y.length===0)return;const v=1/y.length;return y.forEach((S,b)=>S.distanceSq+=b*v),y.sort((S,b)=>S.distanceSq-b.distanceSq),y.some(S=>u=S.callback(S.feature,S.layer,S.geometry)),u}hasFeatureAtCoordinate(e,t,n,s,r,o){return this.forEachFeatureAtCoordinate(e,t,n,s,Mn,this,r,o)!==void 0}getMap(){return this.map_}renderFrame(e){ae()}scheduleExpireIconCache(e){Ps.canExpireCache()&&e.postRenderFunctions.push(Uf)}}function Uf(i,e){Ps.expire()}var Hf=Kf;class Zf extends Jt{constructor(e,t,n,s){super(e),this.inversePixelTransform=t,this.frameState=n,this.context=s}}var zu=Zf;const hs="ol-hidden",ir="ol-unselectable",Po="ol-control",il="ol-collapsed",Jf=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),nl=["style","variant","weight","size","lineHeight","family"],Gu=function(i){const e=i.match(Jf);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let n=0,s=nl.length;n<s;++n){const r=e[n+1];r!==void 0&&(t[nl[n]]=r)}return t.families=t.family.split(/,\s?/),t};function rt(i,e,t,n){let s;return t&&t.length?s=t.shift():po?s=new OffscreenCanvas(i||300,e||300):s=document.createElement("canvas"),i&&(s.width=i),e&&(s.height=e),s.getContext("2d",n)}function nr(i){const e=i.canvas;e.width=1,e.height=1,i.clearRect(0,0,1,1)}function sl(i,e){const t=e.parentNode;t&&t.replaceChild(i,e)}function Hr(i){return i&&i.parentNode?i.parentNode.removeChild(i):null}function Qf(i){for(;i.lastChild;)i.removeChild(i.lastChild)}function eg(i,e){const t=i.childNodes;for(let n=0;;++n){const s=t[n],r=e[n];if(!s&&!r)break;if(s!==r){if(!s){i.appendChild(r);continue}if(!r){i.removeChild(s),--n;continue}i.insertBefore(r,s)}}}const Wu="10px sans-serif",Zt="#000",Vs="round",Dn=[],Bn=0,gn="round",Nn=10,Vn="#000",qn="center",qs="middle",Ti=[0,0,0,0],zn=1,Kt=new Wt;let Yi=null,Zr;const Jr={},tg=function(){const e="32px ",t=["monospace","serif"],n=t.length,s="wmytzilWMYTZIL@#/&?$%10\uF013";let r,o;function a(u,c,d){let h=!0;for(let f=0;f<n;++f){const g=t[f];if(o=zs(u+" "+c+" "+e+g,s),d!=g){const m=zs(u+" "+c+" "+e+d+","+g,s);h=h&&m!=o}}return!!h}function l(){let u=!0;const c=Kt.getKeys();for(let d=0,h=c.length;d<h;++d){const f=c[d];Kt.get(f)<100&&(a.apply(this,f.split(`
`))?($n(Jr),Yi=null,Zr=void 0,Kt.set(f,100)):(Kt.set(f,Kt.get(f)+1,!0),u=!1))}u&&(clearInterval(r),r=void 0)}return function(u){const c=Gu(u);if(!c)return;const d=c.families;for(let h=0,f=d.length;h<f;++h){const g=d[h],m=c.style+`
`+c.weight+`
`+g;Kt.get(m)===void 0&&(Kt.set(m,100,!0),a(c.style,c.weight,g)||(Kt.set(m,0,!0),r===void 0&&(r=setInterval(l,32))))}}}(),ig=function(){let i;return function(e){let t=Jr[e];if(t==null){if(po){const n=Gu(e),s=Xu(e,"\u017Dg");t=(isNaN(Number(n.lineHeight))?1.2:Number(n.lineHeight))*(s.actualBoundingBoxAscent+s.actualBoundingBoxDescent)}else i||(i=document.createElement("div"),i.innerHTML="M",i.style.minHeight="0",i.style.maxHeight="none",i.style.height="auto",i.style.padding="0",i.style.border="none",i.style.position="absolute",i.style.display="block",i.style.left="-99999px"),i.style.font=e,document.body.appendChild(i),t=i.offsetHeight,document.body.removeChild(i);Jr[e]=t}return t}}();function Xu(i,e){return Yi||(Yi=rt(1,1)),i!=Zr&&(Yi.font=i,Zr=Yi.font),Yi.measureText(e)}function zs(i,e){return Xu(i,e).width}function rl(i,e,t){if(e in t)return t[e];const n=e.split(`
`).reduce((s,r)=>Math.max(s,zs(i,r)),0);return t[e]=n,n}function ng(i,e){const t=[],n=[],s=[];let r=0,o=0,a=0,l=0;for(let u=0,c=e.length;u<=c;u+=2){const d=e[u];if(d===`
`||u===c){r=Math.max(r,o),s.push(o),o=0,a+=l;continue}const h=e[u+1]||i.font,f=zs(h,d);t.push(f),o+=f;const g=ig(h);n.push(g),l=Math.max(l,g)}return{width:r,height:a,widths:t,heights:n,lineWidths:s}}function sg(i,e,t,n,s,r,o,a,l,u,c){i.save(),t!==1&&(i.globalAlpha*=t),e&&i.setTransform.apply(i,e),n.contextInstructions?(i.translate(l,u),i.scale(c[0],c[1]),rg(n,i)):c[0]<0||c[1]<0?(i.translate(l,u),i.scale(c[0],c[1]),i.drawImage(n,s,r,o,a,0,0,o,a)):i.drawImage(n,s,r,o,a,l,u,o*c[0],a*c[1]),i.restore()}function rg(i,e){const t=i.contextInstructions;for(let n=0,s=t.length;n<s;n+=2)Array.isArray(t[n+1])?e[t[n]].apply(e,t[n+1]):e[t[n]]=t[n+1]}class og extends Hf{constructor(e){super(e),this.fontChangeListenerKey_=le(Kt,cn.PROPERTYCHANGE,e.redrawText.bind(e)),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=ir+" ol-layers";const n=e.getViewport();n.insertBefore(this.element_,n.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const n=this.getMap();if(n.hasListener(e)){const s=new zu(e,void 0,t);n.dispatchEvent(s)}}disposeInternal(){xe(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(ci.PRECOMPOSE,e);const t=e.layerStatesArray.sort(function(o,a){return o.zIndex-a.zIndex}),n=e.viewState;this.children_.length=0;const s=[];let r=null;for(let o=0,a=t.length;o<a;++o){const l=t[o];e.layerIndex=o;const u=l.layer,c=u.getSourceState();if(!ko(l,n)||c!="ready"&&c!="undefined"){u.unrender();continue}const d=u.render(e,r);!d||(d!==r&&(this.children_.push(d),r=d),"getDeclutter"in u&&s.push(u))}for(let o=s.length-1;o>=0;--o)s[o].renderDeclutter(e);eg(this.element_,this.children_),this.dispatchRenderEvent(ci.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}}var ag=og;class ai extends Jt{constructor(e,t){super(e),this.layer=t}}const wr={LAYERS:"layers"};class Oo extends Su{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let n=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(wr.LAYERS,this.handleLayersChanged_),n?Array.isArray(n)?n=new Nt(n.slice(),{unique:!0}):oe(typeof n.getArray=="function",43):n=new Nt(void 0,{unique:!0}),this.setLayers(n)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(xe),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(le(e,ut.ADD,this.handleLayersAdd_,this),le(e,ut.REMOVE,this.handleLayersRemove_,this));for(const n in this.listenerKeys_)this.listenerKeys_[n].forEach(xe);$n(this.listenerKeys_);const t=e.getArray();for(let n=0,s=t.length;n<s;n++){const r=t[n];this.registerLayerListeners_(r),this.dispatchEvent(new ai("addlayer",r))}this.changed()}registerLayerListeners_(e){const t=[le(e,cn.PROPERTYCHANGE,this.handleLayerChange_,this),le(e,re.CHANGE,this.handleLayerChange_,this)];e instanceof Oo&&t.push(le(e,"addlayer",this.handleLayerGroupAdd_,this),le(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[ce(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new ai("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new ai("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new ai("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,n=ce(t);this.listenerKeys_[n].forEach(xe),delete this.listenerKeys_[n],this.dispatchEvent(new ai("removelayer",t)),this.changed()}getLayers(){return this.get(wr.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const n=t.getArray();for(let s=0,r=n.length;s<r;++s)this.dispatchEvent(new ai("removelayer",n[s]))}this.set(wr.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],n=t.length;this.getLayers().forEach(function(o){o.getLayerStatesArray(t)});const s=this.getLayerState();let r=s.zIndex;!e&&s.zIndex===void 0&&(r=0);for(let o=n,a=t.length;o<a;o++){const l=t[o];l.opacity*=s.opacity,l.visible=l.visible&&s.visible,l.maxResolution=Math.min(l.maxResolution,s.maxResolution),l.minResolution=Math.max(l.minResolution,s.minResolution),l.minZoom=Math.max(l.minZoom,s.minZoom),l.maxZoom=Math.min(l.maxZoom,s.maxZoom),s.extent!==void 0&&(l.extent!==void 0?l.extent=Tn(l.extent,s.extent):l.extent=s.extent),l.zIndex===void 0&&(l.zIndex=r)}return t}getSourceState(){return"ready"}}var sr=Oo;class lg extends Jt{constructor(e,t,n){super(e),this.map=t,this.frameState=n!==void 0?n:null}}var $i=lg;class ug extends $i{constructor(e,t,n,s,r,o){super(e,t,r),this.originalEvent=n,this.pixel_=null,this.coordinate_=null,this.dragging=s!==void 0?s:!1,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}var ri=ug,Te={SINGLECLICK:"singleclick",CLICK:re.CLICK,DBLCLICK:re.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Qr={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class cg extends Ks{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const n=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=n,this.pointerdownListenerKey_=le(n,Qr.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=le(n,Qr.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(re.TOUCHMOVE,this.boundHandleTouchMove_,du?{passive:!1}:!1)}emulateClick_(e){let t=new ri(Te.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new ri(Te.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const n=new ri(Te.SINGLECLICK,this.map_,e);this.dispatchEvent(n)},250)}updateActivePointers_(e){const t=e,n=t.pointerId;if(t.type==Te.POINTERUP||t.type==Te.POINTERCANCEL){delete this.trackedTouches_[n];for(const s in this.trackedTouches_)if(this.trackedTouches_[s].target!==t.target){delete this.trackedTouches_[s];break}}else(t.type==Te.POINTERDOWN||t.type==Te.POINTERMOVE)&&(this.trackedTouches_[n]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new ri(Te.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(xe),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new ri(Te.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const n=this.map_.getOwnerDocument();this.dragListenerKeys_.push(le(n,Te.POINTERMOVE,this.handlePointerMove_,this),le(n,Te.POINTERUP,this.handlePointerUp_,this),le(this.element_,Te.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==n&&this.dragListenerKeys_.push(le(this.element_.getRootNode(),Te.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new ri(Te.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new ri(Te.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(xe(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(re.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(xe(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(xe),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}var dg=cg,oi={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},Ze={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"};const Gs=1/0;class hg{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,$n(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,n=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const s=this.keyFunction_(n);return delete this.queuedElements_[s],n}enqueue(e){oe(!(this.keyFunction_(e)in this.queuedElements_),31);const t=this.priorityFunction_(e);return t!=Gs?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,n=this.priorities_,s=t.length,r=t[e],o=n[e],a=e;for(;e<s>>1;){const l=this.getLeftChildIndex_(e),u=this.getRightChildIndex_(e),c=u<s&&n[u]<n[l]?u:l;t[e]=t[c],n[e]=n[c],e=c}t[e]=r,n[e]=o,this.siftDown_(a,e)}siftDown_(e,t){const n=this.elements_,s=this.priorities_,r=n[t],o=s[t];for(;t>e;){const a=this.getParentIndex_(t);if(s[a]>o)n[t]=n[a],s[t]=s[a],t=a;else break}n[t]=r,s[t]=o}reprioritize(){const e=this.priorityFunction_,t=this.elements_,n=this.priorities_;let s=0;const r=t.length;let o,a,l;for(a=0;a<r;++a)o=t[a],l=e(o),l==Gs?delete this.queuedElements_[this.keyFunction_(o)]:(n[s]=l,t[s++]=o);t.length=s,n.length=s,this.heapify_()}}var fg=hg,J={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class gg extends fg{constructor(e,t){super(function(n){return e.apply(null,n)},function(n){return n[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(re.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,n=t.getState();if(n===J.LOADED||n===J.ERROR||n===J.EMPTY){n!==J.ERROR&&t.removeEventListener(re.CHANGE,this.boundHandleTileChange_);const s=t.getKey();s in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[s],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let n=0,s,r,o;for(;this.tilesLoading_<e&&n<t&&this.getCount()>0;)r=this.dequeue()[0],o=r.getKey(),s=r.getState(),s===J.IDLE&&!(o in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++n,r.load())}}var mg=gg;function _g(i,e,t,n,s){if(!i||!(t in i.wantedTiles)||!i.wantedTiles[t][e.getKey()])return Gs;const r=i.viewState.center,o=n[0]-r[0],a=n[1]-r[1];return 65536*Math.log(s)+Math.sqrt(o*o+a*a)/s}class pg extends Wt{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){Hr(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&Hr(this.element);for(let t=0,n=this.listenerKeys.length;t<n;++t)xe(this.listenerKeys[t]);this.listenerKeys.length=0,this.map_=e,e&&((this.target_?this.target_:e.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==hn&&this.listenerKeys.push(le(e,oi.POSTRENDER,this.render,this)),e.render())}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}var Fo=pg;class vg extends Fo{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1);const t=e.className!==void 0?e.className:"ol-attribution",n=e.tipLabel!==void 0?e.tipLabel:"Attributions",s=e.expandClassName!==void 0?e.expandClassName:t+"-expand",r=e.collapseLabel!==void 0?e.collapseLabel:"\u203A",o=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof r=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=r,this.collapseLabel_.className=o):this.collapseLabel_=r;const a=e.label!==void 0?e.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=s):this.label_=a;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=n,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(re.CLICK,this.handleClick_.bind(this),!1);const u=t+" "+ir+" "+Po+(this.collapsed_&&this.collapsible_?" "+il:"")+(this.collapsible_?"":" ol-uncollapsible"),c=this.element;c.className=u,c.appendChild(this.toggleButton_),c.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=Array.from(new Set(this.getMap().getAllLayers().flatMap(s=>s.getAttributions(e)))),n=!this.getMap().getAllLayers().some(s=>s.getSource()&&s.getSource().getAttributionsCollapsible()===!1);return this.overrideCollapsible_||this.setCollapsible(n),t}updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=this.collectSourceAttributions_(e),n=t.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!gi(t,this.renderedAttributions_)){Qf(this.ulElement_);for(let s=0,r=t.length;s<r;++s){const o=document.createElement("li");o.innerHTML=t[s],this.ulElement_.appendChild(o)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(il),this.collapsed_?sl(this.collapseLabel_,this.label_):sl(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}var yg=vg;class xg extends Fo{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",n=e.label!==void 0?e.label:"\u21E7",s=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof n=="string"?(this.label_=document.createElement("span"),this.label_.className=s,this.label_.textContent=n):(this.label_=n,this.label_.classList.add(s));const r=e.tipLabel?e.tipLabel:"Reset rotation",o=document.createElement("button");o.className=t+"-reset",o.setAttribute("type","button"),o.title=r,o.appendChild(this.label_),o.addEventListener(re.CLICK,this.handleClick_.bind(this),!1);const a=t+" "+ir+" "+Po,l=this.element;l.className=a,l.appendChild(o),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(hs)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const n=t.getRotation();n!==void 0&&(this.duration_>0&&n%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:mn}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const n=t.viewState.rotation;if(n!=this.rotation_){const s="rotate("+n+"rad)";if(this.autoHide_){const r=this.element.classList.contains(hs);!r&&n===0?this.element.classList.add(hs):r&&n!==0&&this.element.classList.remove(hs)}this.label_.style.transform=s}this.rotation_=n}}var Sg=xg;class Cg extends Fo{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",n=e.delta!==void 0?e.delta:1,s=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",r=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",o=e.zoomInLabel!==void 0?e.zoomInLabel:"+",a=e.zoomOutLabel!==void 0?e.zoomOutLabel:"\u2013",l=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",u=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",c=document.createElement("button");c.className=s,c.setAttribute("type","button"),c.title=l,c.appendChild(typeof o=="string"?document.createTextNode(o):o),c.addEventListener(re.CLICK,this.handleClick_.bind(this,n),!1);const d=document.createElement("button");d.className=r,d.setAttribute("type","button"),d.title=u,d.appendChild(typeof a=="string"?document.createTextNode(a):a),d.addEventListener(re.CLICK,this.handleClick_.bind(this,-n),!1);const h=t+" "+ir+" "+Po,f=this.element;f.className=h,f.appendChild(c),f.appendChild(d),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const n=this.getMap().getView();if(!n)return;const s=n.getZoom();if(s!==void 0){const r=n.getConstrainedZoom(s+e);this.duration_>0?(n.getAnimating()&&n.cancelAnimations(),n.animate({zoom:r,duration:this.duration_,easing:mn})):n.setZoom(r)}}}var Eg=Cg;function bg(i){i=i||{};const e=new Nt;return(i.zoom!==void 0?i.zoom:!0)&&e.push(new Eg(i.zoomOptions)),(i.rotate!==void 0?i.rotate:!0)&&e.push(new Sg(i.rotateOptions)),(i.attribution!==void 0?i.attribution:!0)&&e.push(new yg(i.attributionOptions)),e}var ol={ACTIVE:"active"};class wg extends Wt{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(ol.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(ol.ACTIVE,e)}setMap(e){this.map_=e}}function Rg(i,e,t){const n=i.getCenterInternal();if(n){const s=[n[0]+e[0],n[1]+e[1]];i.animateInternal({duration:t!==void 0?t:250,easing:xf,center:i.getConstrainedCenter(s)})}}function Do(i,e,t,n){const s=i.getZoom();if(s===void 0)return;const r=i.getConstrainedZoom(s+e),o=i.getResolutionForZoom(r);i.getAnimating()&&i.cancelAnimations(),i.animate({resolution:o,anchor:t,duration:n!==void 0?n:250,easing:mn})}var Un=wg;class Tg extends Un{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==Te.DBLCLICK){const n=e.originalEvent,s=e.map,r=e.coordinate,o=n.shiftKey?-this.delta_:this.delta_,a=s.getView();Do(a,o,r,this.duration_),n.preventDefault(),t=!0}return!t}}var Ig=Tg;class Lg extends Un{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==Te.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==Te.POINTERUP){const n=this.handleUpEvent(e);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(e.type==Te.POINTERDOWN){const n=this.handleDownEvent(e);this.handlingDownUpSequence=n,t=this.stopDown(n)}else e.type==Te.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function Bo(i){const e=i.length;let t=0,n=0;for(let s=0;s<e;s++)t+=i[s].clientX,n+=i[s].clientY;return{clientX:t/e,clientY:n/e}}var Hn=Lg;function eo(i){const e=arguments;return function(t){let n=!0;for(let s=0,r=e.length;s<r&&(n=n&&e[s](t),!!n);++s);return n}}const Ag=function(i){const e=i.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Mg=function(i){const e=i.map.getTargetElement(),t=i.map.getOwnerDocument().activeElement;return e.contains(t)},ju=function(i){return i.map.getTargetElement().hasAttribute("tabindex")?Mg(i):!0},kg=Mn,Yu=function(i){const e=i.originalEvent;return e.button==0&&!(Ch&&Eh&&e.ctrlKey)},$u=function(i){const e=i.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},Pg=function(i){const e=i.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Ku=function(i){const e=i.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},Rr=function(i){const e=i.originalEvent;return oe(e!==void 0,56),e.pointerType=="mouse"},Og=function(i){const e=i.originalEvent;return oe(e!==void 0,56),e.isPrimary&&e.button===0};class Fg extends Hn{constructor(e){super({stopDown:$s}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:eo($u,Og);this.condition_=e.onFocusOnly?eo(ju,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const n=this.targetPointers,s=t.getEventPixel(Bo(n));if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(s[0],s[1]),this.lastCentroid){const r=[this.lastCentroid[0]-s[0],s[1]-this.lastCentroid[1]],a=e.map.getView();rf(r,a.getResolution()),Eo(r,a.getRotation()),a.adjustCenterInternal(r)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=s,this.lastPointersCount_=n.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,n=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const s=this.kinetic_.getDistance(),r=this.kinetic_.getAngle(),o=n.getCenterInternal(),a=t.getPixelFromCoordinateInternal(o),l=t.getCoordinateFromPixelInternal([a[0]-s*Math.cos(r),a[1]-s*Math.sin(r)]);n.animateInternal({center:n.getConstrainedCenter(l),duration:500,easing:mn})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const n=e.map.getView();return this.lastCentroid=null,n.getAnimating()&&n.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}var Dg=Fg;class Bg extends Hn{constructor(e){e=e||{},super({stopDown:$s}),this.condition_=e.condition?e.condition:Ag,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!Rr(e))return;const t=e.map,n=t.getView();if(n.getConstraints().rotation===Lo)return;const s=t.getSize(),r=e.pixel,o=Math.atan2(s[1]/2-r[1],r[0]-s[0]/2);if(this.lastAngle_!==void 0){const a=o-this.lastAngle_;n.adjustRotationInternal(-a)}this.lastAngle_=o}handleUpEvent(e){return Rr(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return Rr(e)&&Yu(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}var Ng=Bg;class Vg extends mo{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,n="px",s=this.element_.style;s.left=Math.min(e[0],t[0])+n,s.top=Math.min(e[1],t[1])+n,s.width=Math.abs(t[0]-e[0])+n,s.height=Math.abs(t[1]-e[1])+n}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const e=this.startPixel_,t=this.endPixel_,s=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);s[4]=s[0].slice(),this.geometry_?this.geometry_.setCoordinates([s]):this.geometry_=new Fn([s])}getGeometry(){return this.geometry_}}var qg=Vg;const fs={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class Tr extends Jt{constructor(e,t,n){super(e),this.coordinate=t,this.mapBrowserEvent=n}}class zg extends Hn{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.box_=new qg(e.className||"ol-dragbox"),this.minArea_=e.minArea!==void 0?e.minArea:64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition?e.condition:Yu,this.boxEndCondition_=e.boxEndCondition?e.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,n){const s=n[0]-t[0],r=n[1]-t[1];return s*s+r*r>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new Tr(fs.BOXDRAG,e.coordinate,e))}handleUpEvent(e){this.box_.setMap(null);const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new Tr(t?fs.BOXEND:fs.BOXCANCEL,e.coordinate,e)),!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Tr(fs.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}}var Gg=zg;class Wg extends Gg{constructor(e){e=e||{};const t=e.condition?e.condition:Pg;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const n=this.getMap().getView();let s=this.getGeometry();if(this.out_){const r=n.rotatedExtentForGeometry(s),o=n.getResolutionForExtentInternal(r),a=n.getResolution()/o;s=s.clone(),s.scale(a*a)}n.fitInternal(s,{duration:this.duration_,easing:mn})}}var Xg=Wg,Ci={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class jg extends Un{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return $u(t)&&Ku(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==re.KEYDOWN){const n=e.originalEvent,s=n.key;if(this.condition_(e)&&(s==Ci.DOWN||s==Ci.LEFT||s==Ci.RIGHT||s==Ci.UP)){const o=e.map.getView(),a=o.getResolution()*this.pixelDelta_;let l=0,u=0;s==Ci.DOWN?u=-a:s==Ci.LEFT?l=-a:s==Ci.RIGHT?l=a:u=a;const c=[l,u];Eo(c,o.getRotation()),Rg(o,c,this.duration_),n.preventDefault(),t=!0}}return!t}}var Yg=jg;class $g extends Un{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:Ku,this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==re.KEYDOWN||e.type==re.KEYPRESS){const n=e.originalEvent,s=n.key;if(this.condition_(e)&&(s==="+"||s==="-")){const r=e.map,o=s==="+"?this.delta_:-this.delta_,a=r.getView();Do(a,o,void 0,this.duration_),n.preventDefault(),t=!0}}return!t}}var Kg=$g;class Ug{constructor(e,t,n){this.decay_=e,this.minVelocity_=t,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let n=t-3;for(;n>0&&this.points_[n+2]>e;)n-=3;const s=this.points_[t+2]-this.points_[n+2];if(s<1e3/60)return!1;const r=this.points_[t]-this.points_[n],o=this.points_[t+1]-this.points_[n+1];return this.angle_=Math.atan2(o,r),this.initialVelocity_=Math.sqrt(r*r+o*o)/s,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}var Hg=Ug;class Zg extends Un{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:kg;this.condition_=e.onFocusOnly?eo(ju,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(e){if(!this.condition_(e)||e.type!==re.WHEEL)return!0;const n=e.map,s=e.originalEvent;s.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.coordinate);let r;if(e.type==re.WHEEL&&(r=s.deltaY,xh&&s.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(r/=cu),s.deltaMode===WheelEvent.DOM_DELTA_LINE&&(r*=40)),r===0)return!1;this.lastDelta_=r;const o=Date.now();this.startTime_===void 0&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(r)<4?"trackpad":"wheel");const a=n.getView();if(this.mode_==="trackpad"&&!(a.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-r/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=o,!1;this.totalDelta_+=r;const l=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),l),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let n=-Me(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),Do(t,n,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}var Jg=Zg;class Qg extends Hn{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=$s),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const n=this.targetPointers[0],s=this.targetPointers[1],r=Math.atan2(s.clientY-n.clientY,s.clientX-n.clientX);if(this.lastAngle_!==void 0){const l=r-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=l}this.lastAngle_=r;const o=e.map,a=o.getView();a.getConstraints().rotation!==Lo&&(this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(Bo(this.targetPointers))),this.rotating_&&(o.render(),a.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}var em=Qg;class tm extends Hn{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=$s),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const n=this.targetPointers[0],s=this.targetPointers[1],r=n.clientX-s.clientX,o=n.clientY-s.clientY,a=Math.sqrt(r*r+o*o);this.lastDistance_!==void 0&&(t=this.lastDistance_/a),this.lastDistance_=a;const l=e.map,u=l.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(Bo(this.targetPointers))),l.render(),u.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const n=e.map.getView(),s=this.lastScaleDelta_>1?1:-1;return n.endInteraction(this.duration_,s),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}var im=tm;function nm(i){i=i||{};const e=new Nt,t=new Hg(-.005,.05,100);return(i.altShiftDragRotate!==void 0?i.altShiftDragRotate:!0)&&e.push(new Ng),(i.doubleClickZoom!==void 0?i.doubleClickZoom:!0)&&e.push(new Ig({delta:i.zoomDelta,duration:i.zoomDuration})),(i.dragPan!==void 0?i.dragPan:!0)&&e.push(new Dg({onFocusOnly:i.onFocusOnly,kinetic:t})),(i.pinchRotate!==void 0?i.pinchRotate:!0)&&e.push(new em),(i.pinchZoom!==void 0?i.pinchZoom:!0)&&e.push(new im({duration:i.zoomDuration})),(i.keyboard!==void 0?i.keyboard:!0)&&(e.push(new Yg),e.push(new Kg({delta:i.zoomDelta,duration:i.zoomDuration}))),(i.mouseWheelZoom!==void 0?i.mouseWheelZoom:!0)&&e.push(new Jg({onFocusOnly:i.onFocusOnly,duration:i.zoomDuration})),(i.shiftDragZoom!==void 0?i.shiftDragZoom:!0)&&e.push(new Xg({duration:i.zoomDuration})),e}function al(i){return i[0]>0&&i[1]>0}function sm(i,e,t){return t===void 0&&(t=[0,0]),t[0]=i[0]*e+.5|0,t[1]=i[1]*e+.5|0,t}function St(i,e){return Array.isArray(i)?i:(e===void 0?e=[i,i]:(e[0]=i,e[1]=i),e)}function Uu(i){if(i instanceof tr){i.setMapInternal(null);return}i instanceof sr&&i.getLayers().forEach(Uu)}function Hu(i,e){if(i instanceof tr){i.setMapInternal(e);return}if(i instanceof sr){const t=i.getLayers().getArray();for(let n=0,s=t.length;n<s;++n)Hu(t[n],e)}}class rm extends Wt{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=om(e);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:cu,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=zt(),this.pixelToCoordinateTransform_=zt(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=t.controls||bg(),this.interactions=t.interactions||nm({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new mg(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(Ze.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(Ze.VIEW,this.handleViewChanged_),this.addChangeListener(Ze.SIZE,this.handleSizeChanged_),this.addChangeListener(Ze.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const n=this;e.view&&!(e.view instanceof Dt)&&e.view.then(function(s){n.setView(new Dt(s))}),this.controls.addEventListener(ut.ADD,s=>{s.element.setMap(this)}),this.controls.addEventListener(ut.REMOVE,s=>{s.element.setMap(null)}),this.interactions.addEventListener(ut.ADD,s=>{s.element.setMap(this)}),this.interactions.addEventListener(ut.REMOVE,s=>{s.element.setMap(null)}),this.overlays_.addEventListener(ut.ADD,s=>{this.addOverlayInternal_(s.element)}),this.overlays_.addEventListener(ut.REMOVE,s=>{const r=s.element.getId();r!==void 0&&delete this.overlayIdIndex_[r.toString()],s.element.setMap(null)}),this.controls.forEach(s=>{s.setMap(this)}),this.interactions.forEach(s=>{s.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){Hu(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,n){if(!this.frameState_||!this.renderer_)return;const s=this.getCoordinateFromPixelInternal(e);n=n!==void 0?n:{};const r=n.hitTolerance!==void 0?n.hitTolerance:0,o=n.layerFilter!==void 0?n.layerFilter:Mn,a=n.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(s,this.frameState_,r,a,t,null,o,null)}getFeaturesAtPixel(e,t){const n=[];return this.forEachFeatureAtPixel(e,function(s){n.push(s)},t),n}getAllLayers(){const e=[];function t(n){n.forEach(function(s){s instanceof sr?t(s.getLayers()):e.push(s)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const n=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const s=t.layerFilter!==void 0?t.layerFilter:Mn,r=t.hitTolerance!==void 0?t.hitTolerance:0,o=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,r,o,s,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const n=this.viewport_.getBoundingClientRect(),s=this.getSize(),r=n.width/s[0],o=n.height/s[1],a="changedTouches"in e?e.changedTouches[0]:e;return[(a.clientX-n.left)/r,(a.clientY-n.top)/o]}getTarget(){return this.get(Ze.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return Ur(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?Ve(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(Ze.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof Nt){t.setLayers(e);return}const n=t.getLayers();n.clear(),n.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,n=e.length;t<n;++t){const s=e[t];if(!s.visible)continue;const r=s.layer.getRenderer();if(r&&!r.ready)return!0;const o=s.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(e){const t=$t(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?Ve(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(Ze.SIZE)}getView(){return this.get(Ze.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,n,s){return _g(this.frameState_,e,t,n,s)}handleBrowserEvent(e,t){t=t||e.type;const n=new ri(t,this,e);this.handleMapBrowserEvent(n)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,n=t.type;if(n===Qr.POINTERDOWN||n===re.WHEEL||n===re.KEYDOWN){const s=this.getOwnerDocument(),r=this.viewport_.getRootNode?this.viewport_.getRootNode():s,o=t.target;if(this.overlayContainerStopEvent_.contains(o)||!(r===s?s.documentElement:r).contains(o))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const s=this.getInteractions().getArray().slice();for(let r=s.length-1;r>=0;r--){const o=s[r];if(o.getMap()!==this||!o.getActive()||!this.getTargetElement())continue;if(!o.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let s=this.maxTilesLoading_,r=s;if(e){const o=e.viewHints;if(o[Je.ANIMATING]||o[Je.INTERACTING]){const a=Date.now()-e.time>8;s=a?0:8,r=a?0:2}}t.getTilesLoading()<s&&(t.reprioritize(),t.loadMoreTiles(s,r))}e&&this.renderer_&&!e.animate&&(this.renderComplete_===!0?(this.hasListener(ci.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(ci.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new $i(oi.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new $i(oi.LOADSTART,this,e))));const n=this.postRenderFunctions_;for(let s=0,r=n.length;s<r;++s)n[s](this,e);n.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let n=0,s=this.targetChangeHandlerKeys_.length;n<s;++n)xe(this.targetChangeHandlerKeys_[n]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(re.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(re.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,Hr(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const n=this.targetElement_.getRootNode();n instanceof ShadowRoot&&this.resizeObserver_.unobserve(n.host),this.setSize(void 0)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new ag(this)),this.mapBrowserEventHandler_=new dg(this,this.moveTolerance_);for(const r in Te)this.mapBrowserEventHandler_.addEventListener(Te[r],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(re.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(re.WHEEL,this.boundHandleBrowserEvent_,du?{passive:!1}:!1);const n=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.targetChangeHandlerKeys_=[le(n,re.KEYDOWN,this.handleBrowserEvent,this),le(n,re.KEYPRESS,this.handleBrowserEvent,this)];const s=t.getRootNode();s instanceof ShadowRoot&&this.resizeObserver_.observe(s.host),this.resizeObserver_.observe(t)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(xe(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(xe(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=le(e,cn.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=le(e,re.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(xe),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new ai("addlayer",e)),this.layerGroupPropertyListenerKeys_=[le(e,cn.PROPERTYCHANGE,this.render,this),le(e,re.CHANGE,this.render,this),le(e,"addlayer",this.handleLayerAdd_,this),le(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,n=e.length;t<n;++t){const s=e[t].layer;s.hasRenderer()&&s.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){Uu(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),n=this.getView(),s=this.frameState_;let r=null;if(t!==void 0&&al(t)&&n&&n.isDef()){const o=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=n.getState();if(r={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:jr(a.center,a.resolution,a.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{},mapId:ce(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const l=isNaN(a.nextRotation)?a.rotation:a.nextRotation;r.nextExtent=jr(a.nextCenter,a.nextResolution,l,t)}}this.frameState_=r,this.renderer_.renderFrame(r),r&&(r.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,r.postRenderFunctions),s&&(!this.previousExtent_||!xo(this.previousExtent_)&&!Pn(r.extent,this.previousExtent_))&&(this.dispatchEvent(new $i(oi.MOVESTART,this,s)),this.previousExtent_=Zs(this.previousExtent_)),this.previousExtent_&&!r.viewHints[Je.ANIMATING]&&!r.viewHints[Je.INTERACTING]&&!Pn(r.extent,this.previousExtent_)&&(this.dispatchEvent(new $i(oi.MOVEEND,this,r)),fu(r.extent,this.previousExtent_))),this.dispatchEvent(new $i(oi.POSTRENDER,this,r)),this.renderComplete_=this.hasListener(oi.LOADSTART)||this.hasListener(oi.LOADEND)||this.hasListener(ci.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new ai("removelayer",t)),this.set(Ze.LAYERGROUP,e)}setSize(e){this.set(Ze.SIZE,e)}setTarget(e){this.set(Ze.TARGET,e)}setView(e){if(!e||e instanceof Dt){this.set(Ze.VIEW,e);return}this.set(Ze.VIEW,new Dt);const t=this;e.then(function(n){t.setView(new Dt(n))})}updateSize(){const e=this.getTargetElement();let t;if(e){const s=getComputedStyle(e),r=e.offsetWidth-parseFloat(s.borderLeftWidth)-parseFloat(s.paddingLeft)-parseFloat(s.paddingRight)-parseFloat(s.borderRightWidth),o=e.offsetHeight-parseFloat(s.borderTopWidth)-parseFloat(s.paddingTop)-parseFloat(s.paddingBottom)-parseFloat(s.borderBottomWidth);!isNaN(r)&&!isNaN(o)&&(t=[r,o],!al(t)&&!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&wu("No map visible because the map container's width or height are 0."))}const n=this.getSize();t&&(!n||!gi(t,n))&&(this.setSize(t),this.updateViewportSize_())}updateViewportSize_(){const e=this.getView();if(e){let t;const n=getComputedStyle(this.viewport_);n.width&&n.height&&(t=[parseInt(n.width,10),parseInt(n.height,10)]),e.setViewportSize(t)}}}function om(i){let e=null;i.keyboardEventTarget!==void 0&&(e=typeof i.keyboardEventTarget=="string"?document.getElementById(i.keyboardEventTarget):i.keyboardEventTarget);const t={},n=i.layers&&typeof i.layers.getLayers=="function"?i.layers:new sr({layers:i.layers});t[Ze.LAYERGROUP]=n,t[Ze.TARGET]=i.target,t[Ze.VIEW]=i.view instanceof Dt?i.view:new Dt;let s;i.controls!==void 0&&(Array.isArray(i.controls)?s=new Nt(i.controls.slice()):(oe(typeof i.controls.getArray=="function",47),s=i.controls));let r;i.interactions!==void 0&&(Array.isArray(i.interactions)?r=new Nt(i.interactions.slice()):(oe(typeof i.interactions.getArray=="function",48),r=i.interactions));let o;return i.overlays!==void 0?Array.isArray(i.overlays)?o=new Nt(i.overlays.slice()):(oe(typeof i.overlays.getArray=="function",49),o=i.overlays):o=new Nt,{controls:s,interactions:r,keyboardEventTarget:e,overlays:o,values:t}}var am=rm;class lm extends Ks{constructor(e,t,n){super(),n=n||{},this.tileCoord=e,this.state=t,this.interimTile=null,this.key="",this.transition_=n.transition===void 0?250:n.transition,this.transitionStarts_={},this.interpolate=!!n.interpolate}changed(){this.dispatchEvent(re.CHANGE)}release(){this.state===J.ERROR&&this.setState(J.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let e=this.interimTile;do{if(e.getState()==J.LOADED)return this.transition_=0,e;e=e.interimTile}while(e);return this}refreshInterimChain(){if(!this.interimTile)return;let e=this.interimTile,t=this;do{if(e.getState()==J.LOADED){e.interimTile=null;break}else e.getState()==J.LOADING?t=e:e.getState()==J.IDLE?t.interimTile=e.interimTile:t=e;e=t.interimTile}while(e)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==J.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}load(){ae()}getAlpha(e,t){if(!this.transition_)return 1;let n=this.transitionStarts_[e];if(!n)n=t,this.transitionStarts_[e]=n;else if(n===-1)return 1;const s=t-n+1e3/60;return s>=this.transition_?1:Au(s/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}}var Zu=lm,Le={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function Ju(i,e,t){const n=i;let s=!0,r=!1,o=!1;const a=[Ms(n,re.LOAD,function(){o=!0,r||e()})];return n.src&&bh?(r=!0,n.decode().then(function(){s&&e()}).catch(function(l){s&&(o?e():t())})):a.push(Ms(n,re.ERROR,t)),function(){s=!1,a.forEach(xe)}}class um extends Zu{constructor(e,t,n,s,r,o){super(e,t,o),this.crossOrigin_=s,this.src_=n,this.key=n,this.image_=new Image,s!==null&&(this.image_.crossOrigin=s),this.unlisten_=null,this.tileLoadFunction_=r}getImage(){return this.image_}setImage(e){this.image_=e,this.state=J.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=J.ERROR,this.unlistenImage_(),this.image_=cm(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=J.LOADED:this.state=J.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==J.ERROR&&(this.state=J.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==J.IDLE&&(this.state=J.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=Ju(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function cm(){const i=rt(1,1);return i.fillStyle="rgba(0,0,0,0)",i.fillRect(0,0,1,1),i.canvas}var Qu=um;const dm=.5,hm=10,ll=.25;class fm{constructor(e,t,n,s,r,o){this.sourceProj_=e,this.targetProj_=t;let a={};const l=Ds(this.targetProj_,this.sourceProj_);this.transformInv_=function(_){const v=_[0]+"/"+_[1];return a[v]||(a[v]=l(_)),a[v]},this.maxSourceExtent_=s,this.errorThresholdSquared_=r*r,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!s&&!!this.sourceProj_.getExtent()&&ve(s)>=ve(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?ve(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?ve(this.targetProj_.getExtent()):null;const u=Pi(n),c=er(n),d=Qs(n),h=Js(n),f=this.transformInv_(u),g=this.transformInv_(c),m=this.transformInv_(d),p=this.transformInv_(h),y=hm+(o?Math.max(0,Math.ceil(Math.log2(Xr(n)/(o*o*256*256)))):0);if(this.addQuad_(u,c,d,h,f,g,m,p,y),this.wrapsXInSource_){let _=1/0;this.triangles_.forEach(function(v,S,b){_=Math.min(_,v.source[0][0],v.source[1][0],v.source[2][0])}),this.triangles_.forEach(v=>{if(Math.max(v.source[0][0],v.source[1][0],v.source[2][0])-_>this.sourceWorldWidth_/2){const S=[[v.source[0][0],v.source[0][1]],[v.source[1][0],v.source[1][1]],[v.source[2][0],v.source[2][1]]];S[0][0]-_>this.sourceWorldWidth_/2&&(S[0][0]-=this.sourceWorldWidth_),S[1][0]-_>this.sourceWorldWidth_/2&&(S[1][0]-=this.sourceWorldWidth_),S[2][0]-_>this.sourceWorldWidth_/2&&(S[2][0]-=this.sourceWorldWidth_);const b=Math.min(S[0][0],S[1][0],S[2][0]);Math.max(S[0][0],S[1][0],S[2][0])-b<this.sourceWorldWidth_/2&&(v.source=S)}})}a={}}addTriangle_(e,t,n,s,r,o){this.triangles_.push({source:[s,r,o],target:[e,t,n]})}addQuad_(e,t,n,s,r,o,a,l,u){const c=Ba([r,o,a,l]),d=this.sourceWorldWidth_?ve(c)/this.sourceWorldWidth_:null,h=this.sourceWorldWidth_,f=this.sourceProj_.canWrapX()&&d>.5&&d<1;let g=!1;if(u>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const p=Ba([e,t,n,s]);g=ve(p)/this.targetWorldWidth_>ll||g}!f&&this.sourceProj_.isGlobal()&&d&&(g=d>ll||g)}if(!g&&this.maxSourceExtent_&&isFinite(c[0])&&isFinite(c[1])&&isFinite(c[2])&&isFinite(c[3])&&!ct(c,this.maxSourceExtent_))return;let m=0;if(!g&&(!isFinite(r[0])||!isFinite(r[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(l[0])||!isFinite(l[1]))){if(u>0)g=!0;else if(m=(!isFinite(r[0])||!isFinite(r[1])?8:0)+(!isFinite(o[0])||!isFinite(o[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),m!=1&&m!=2&&m!=4&&m!=8)return}if(u>0){if(!g){const p=[(e[0]+n[0])/2,(e[1]+n[1])/2],y=this.transformInv_(p);let _;f?_=(rn(r[0],h)+rn(a[0],h))/2-rn(y[0],h):_=(r[0]+a[0])/2-y[0];const v=(r[1]+a[1])/2-y[1];g=_*_+v*v>this.errorThresholdSquared_}if(g){if(Math.abs(e[0]-n[0])<=Math.abs(e[1]-n[1])){const p=[(t[0]+n[0])/2,(t[1]+n[1])/2],y=this.transformInv_(p),_=[(s[0]+e[0])/2,(s[1]+e[1])/2],v=this.transformInv_(_);this.addQuad_(e,t,p,_,r,o,y,v,u-1),this.addQuad_(_,p,n,s,v,y,a,l,u-1)}else{const p=[(e[0]+t[0])/2,(e[1]+t[1])/2],y=this.transformInv_(p),_=[(n[0]+s[0])/2,(n[1]+s[1])/2],v=this.transformInv_(_);this.addQuad_(e,p,_,s,r,y,v,l,u-1),this.addQuad_(p,t,n,_,y,o,a,v,u-1)}return}}if(f){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(m&11)==0&&this.addTriangle_(e,n,s,r,a,l),(m&14)==0&&this.addTriangle_(e,n,t,r,a,o),m&&((m&13)==0&&this.addTriangle_(t,s,e,o,l,r),(m&7)==0&&this.addTriangle_(t,s,n,o,l,a))}calculateSourceExtent(){const e=Mt();return this.triangles_.forEach(function(t,n,s){const r=t.source;Rn(e,r[0]),Rn(e,r[1]),Rn(e,r[2])}),e}getTriangles(){return this.triangles_}}var gm=fm;let Ir;const an=[];function ul(i,e,t,n,s){i.beginPath(),i.moveTo(0,0),i.lineTo(e,t),i.lineTo(n,s),i.closePath(),i.save(),i.clip(),i.fillRect(0,0,Math.max(e,n)+1,Math.max(t,s)),i.restore()}function Lr(i,e){return Math.abs(i[e*4]-210)>2||Math.abs(i[e*4+3]-.75*255)>2}function mm(){if(Ir===void 0){const i=rt(6,6,an);i.globalCompositeOperation="lighter",i.fillStyle="rgba(210, 0, 0, 0.75)",ul(i,4,5,4,0),ul(i,4,5,0,5);const e=i.getImageData(0,0,3,3).data;Ir=Lr(e,0)||Lr(e,4)||Lr(e,8),nr(i),an.push(i.canvas)}return Ir}function cl(i,e,t,n){const s=Iu(t,e,i);let r=Xa(e,n,t);const o=e.getMetersPerUnit();o!==void 0&&(r*=o);const a=i.getMetersPerUnit();a!==void 0&&(r/=a);const l=i.getExtent();if(!l||Hs(l,s)){const u=Xa(i,r,s)/r;isFinite(u)&&u>0&&(r/=u)}return r}function _m(i,e,t,n){const s=fn(t);let r=cl(i,e,s,n);return(!isFinite(r)||r<=0)&&pu(t,function(o){return r=cl(i,e,o,n),isFinite(r)&&r>0}),r}function pm(i,e,t,n,s,r,o,a,l,u,c,d){const h=rt(Math.round(t*i),Math.round(t*e),an);if(d||(h.imageSmoothingEnabled=!1),l.length===0)return h.canvas;h.scale(t,t);function f(S){return Math.round(S*t)/t}h.globalCompositeOperation="lighter";const g=Mt();l.forEach(function(S,b,I){Mh(g,S.extent)});const m=ve(g),p=Gt(g),y=rt(Math.round(t*m/n),Math.round(t*p/n),an);d||(y.imageSmoothingEnabled=!1);const _=t/n;l.forEach(function(S,b,I){const T=S.extent[0]-g[0],A=-(S.extent[3]-g[3]),V=ve(S.extent),z=Gt(S.extent);S.image.width>0&&S.image.height>0&&y.drawImage(S.image,u,u,S.image.width-2*u,S.image.height-2*u,T*_,A*_,V*_,z*_)});const v=Pi(o);return a.getTriangles().forEach(function(S,b,I){const T=S.source,A=S.target;let V=T[0][0],z=T[0][1],X=T[1][0],D=T[1][1],Y=T[2][0],ie=T[2][1];const B=f((A[0][0]-v[0])/r),q=f(-(A[0][1]-v[1])/r),E=f((A[1][0]-v[0])/r),M=f(-(A[1][1]-v[1])/r),H=f((A[2][0]-v[0])/r),L=f(-(A[2][1]-v[1])/r),P=V,w=z;V=0,z=0,X-=P,D-=w,Y-=P,ie-=w;const N=[[X,D,0,0,E-B],[Y,ie,0,0,H-B],[0,0,X,D,M-q],[0,0,Y,ie,L-q]],$=Nh(N);if(!!$){if(h.save(),h.beginPath(),mm()||!d){h.moveTo(E,M);const F=4,W=B-E,K=q-M;for(let ne=0;ne<F;ne++)h.lineTo(E+f((ne+1)*W/F),M+f(ne*K/(F-1))),ne!=F-1&&h.lineTo(E+f((ne+1)*W/F),M+f((ne+1)*K/(F-1)));h.lineTo(H,L)}else h.moveTo(E,M),h.lineTo(B,q),h.lineTo(H,L);h.clip(),h.transform($[0],$[2],$[1],$[3],B,q),h.translate(g[0]-P,g[3]-w),h.scale(n/t,-n/t),h.drawImage(y.canvas,0,0),h.restore()}}),nr(y),an.push(y.canvas),c&&(h.save(),h.globalCompositeOperation="source-over",h.strokeStyle="black",h.lineWidth=1,a.getTriangles().forEach(function(S,b,I){const T=S.target,A=(T[0][0]-v[0])/r,V=-(T[0][1]-v[1])/r,z=(T[1][0]-v[0])/r,X=-(T[1][1]-v[1])/r,D=(T[2][0]-v[0])/r,Y=-(T[2][1]-v[1])/r;h.beginPath(),h.moveTo(z,X),h.lineTo(A,V),h.lineTo(D,Y),h.closePath(),h.stroke()}),h.restore()),h.canvas}class vm extends Zu{constructor(e,t,n,s,r,o,a,l,u,c,d,h){super(r,J.IDLE,{interpolate:!!h}),this.renderEdges_=d!==void 0?d:!1,this.pixelRatio_=a,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=s,this.wrappedTileCoord_=o||r,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const f=s.getTileCoordExtent(this.wrappedTileCoord_),g=this.targetTileGrid_.getExtent();let m=this.sourceTileGrid_.getExtent();const p=g?Tn(f,g):f;if(Xr(p)===0){this.state=J.EMPTY;return}const y=e.getExtent();y&&(m?m=Tn(m,y):m=y);const _=s.getResolution(this.wrappedTileCoord_[0]),v=_m(e,n,p,_);if(!isFinite(v)||v<=0){this.state=J.EMPTY;return}const S=c!==void 0?c:dm;if(this.triangulation_=new gm(e,n,p,m,v*S,_),this.triangulation_.getTriangles().length===0){this.state=J.EMPTY;return}this.sourceZ_=t.getZForResolution(v);let b=this.triangulation_.calculateSourceExtent();if(m&&(e.canWrapX()?(b[1]=Me(b[1],m[1],m[3]),b[3]=Me(b[3],m[1],m[3])):b=Tn(b,m)),!Xr(b))this.state=J.EMPTY;else{const I=t.getTileRangeForExtentAndZ(b,this.sourceZ_);for(let T=I.minX;T<=I.maxX;T++)for(let A=I.minY;A<=I.maxY;A++){const V=u(this.sourceZ_,T,A,a);V&&this.sourceTiles_.push(V)}this.sourceTiles_.length===0&&(this.state=J.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{t&&t.getState()==J.LOADED&&e.push({extent:this.sourceTileGrid_.getTileCoordExtent(t.tileCoord),image:t.getImage()})}),this.sourceTiles_.length=0,e.length===0)this.state=J.ERROR;else{const t=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(t),s=typeof n=="number"?n:n[0],r=typeof n=="number"?n:n[1],o=this.targetTileGrid_.getResolution(t),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=pm(s,r,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,l,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=J.LOADED}this.changed()}load(){if(this.state==J.IDLE){this.state=J.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(t=>{const n=t.getState();if(n==J.IDLE||n==J.LOADING){e++;const s=le(t,re.CHANGE,function(r){const o=t.getState();(o==J.LOADED||o==J.ERROR||o==J.EMPTY)&&(xe(s),e--,e===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(s)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(t,n,s){t.getState()==J.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(xe),this.sourcesListenerKeys_=null}release(){this.canvas_&&(nr(this.canvas_.getContext("2d")),an.push(this.canvas_),this.canvas_=null),super.release()}}var to=vm;class ym{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const n=this.entries_[e];return oe(n!==void 0,15),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_}remove(e){const t=this.entries_[e];return oe(t!==void 0,15),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,n;for(n=this.newest_;n;n=n.older)e[t++]=n.key_;return e}getValues(){const e=new Array(this.count_);let t=0,n;for(n=this.newest_;n;n=n.older)e[t++]=n.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){if(!!this.containsKey(e))return this.entries_[e].value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){oe(!(e in this.entries_),16);const n={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[e]=n,++this.count_}setSize(e){this.highWaterMark=e}}var xm=ym;function dl(i,e,t,n){return n!==void 0?(n[0]=i,n[1]=e,n[2]=t,n):[i,e,t]}function rr(i,e,t){return i+"/"+e+"/"+t}function ec(i){return rr(i[0],i[1],i[2])}function Sm(i){return i.split("/").map(Number)}function Cm(i){return(i[1]<<i[0])+i[2]}function Em(i,e){const t=i[0],n=i[1],s=i[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const r=e.getFullTileRange(t);return r?r.containsXY(n,s):!0}class bm extends xm{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(e){for(;this.canExpireCache()&&!(this.peekLast().getKey()in e);)this.pop().release()}pruneExceptNewestZ(){if(this.getCount()===0)return;const e=this.peekFirstKey(),n=Sm(e)[0];this.forEach(s=>{s.tileCoord[0]!==n&&(this.remove(ec(s.tileCoord)),s.release())})}}var tc=bm,Ar={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class wm extends Wt{constructor(e){super(),this.projection=kt(e.projection),this.attributions_=hl(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible!==void 0?e.attributionsCollapsible:!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(n,s){t.viewResolver=n,t.viewRejector=s})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=hl(e),this.changed()}setState(e){this.state_=e,this.changed()}}function hl(i){return i?Array.isArray(i)?function(e){return i}:typeof i=="function"?i:function(e){return[i]}:null}var ic=wm;class nc{constructor(e,t,n,s){this.minX=e,this.maxX=t,this.minY=n,this.maxY=s}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function zi(i,e,t,n,s){return s!==void 0?(s.minX=i,s.maxX=e,s.minY=t,s.maxY=n,s):new nc(i,e,t,n)}var sc=nc;const Gi=[0,0,0],ti=5;class Rm{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,oe(dh(this.resolutions_,function(s,r){return r-s},!0),17);let t;if(!e.origins){for(let s=0,r=this.resolutions_.length-1;s<r;++s)if(!t)t=this.resolutions_[s]/this.resolutions_[s+1];else if(this.resolutions_[s]/this.resolutions_[s+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,oe(this.origins_.length==this.resolutions_.length,20));const n=e.extent;n!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=Pi(n)),oe(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,oe(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:Co,oe(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=n!==void 0?n:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map(function(s,r){const o=new sc(Math.min(0,s[0]),Math.max(s[0]-1,-1),Math.min(0,s[1]),Math.max(s[1]-1,-1));if(n){const a=this.getTileRangeForExtentAndZ(n,r);o.minX=Math.max(a.minX,o.minX),o.maxX=Math.min(a.maxX,o.maxX),o.minY=Math.max(a.minY,o.minY),o.maxY=Math.min(a.maxY,o.maxY)}return o},this):n&&this.calculateTileRanges_(n)}forEachTileCoord(e,t,n){const s=this.getTileRangeForExtentAndZ(e,t);for(let r=s.minX,o=s.maxX;r<=o;++r)for(let a=s.minY,l=s.maxY;a<=l;++a)n([t,r,a])}forEachTileCoordParentTileRange(e,t,n,s){let r,o,a,l=null,u=e[0]-1;for(this.zoomFactor_===2?(o=e[1],a=e[2]):l=this.getTileCoordExtent(e,s);u>=this.minZoom;){if(this.zoomFactor_===2?(o=Math.floor(o/2),a=Math.floor(a/2),r=zi(o,o,a,a,n)):r=this.getTileRangeForExtentAndZ(l,u,n),t(u,r))return!0;--u}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,n){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const r=e[1]*2,o=e[2]*2;return zi(r,r+1,o,o+1,t)}const s=this.getTileCoordExtent(e,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(s,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,n){if(t>this.maxZoom||t<this.minZoom)return null;const s=e[0],r=e[1],o=e[2];if(t===s)return zi(r,o,r,o,n);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,t-s),u=Math.floor(r*l),c=Math.floor(o*l);if(t<s)return zi(u,u,c,c,n);const d=Math.floor(l*(r+1))-1,h=Math.floor(l*(o+1))-1;return zi(u,d,c,h,n)}const a=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,t,n)}getTileRangeForExtentAndZ(e,t,n){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,Gi);const s=Gi[1],r=Gi[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,Gi);const o=Gi[1],a=Gi[2];return zi(s,o,r,a,n)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),n=this.getResolution(e[0]),s=St(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*s[0]*n,t[1]-(e[2]+.5)*s[1]*n]}getTileCoordExtent(e,t){const n=this.getOrigin(e[0]),s=this.getResolution(e[0]),r=St(this.getTileSize(e[0]),this.tmpSize_),o=n[0]+e[1]*r[0]*s,a=n[1]-(e[2]+1)*r[1]*s,l=o+r[0]*s,u=a+r[1]*s;return fi(o,a,l,u,t)}getTileCoordForCoordAndResolution(e,t,n){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,n)}getTileCoordForXYAndResolution_(e,t,n,s,r){const o=this.getZForResolution(n),a=n/this.getResolution(o),l=this.getOrigin(o),u=St(this.getTileSize(o),this.tmpSize_);let c=a*(e-l[0])/n/u[0],d=a*(l[1]-t)/n/u[1];return s?(c=us(c,ti)-1,d=us(d,ti)-1):(c=ls(c,ti),d=ls(d,ti)),dl(o,c,d,r)}getTileCoordForXYAndZ_(e,t,n,s,r){const o=this.getOrigin(n),a=this.getResolution(n),l=St(this.getTileSize(n),this.tmpSize_);let u=(e-o[0])/a/l[0],c=(o[1]-t)/a/l[1];return s?(u=us(u,ti)-1,c=us(c,ti)-1):(u=ls(u,ti),c=ls(c,ti)),dl(n,u,c,r)}getTileCoordForCoordAndZ(e,t,n){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,n)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const n=_o(this.resolutions_,e,t||0);return Me(n,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return Vu(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,n=new Array(t);for(let s=this.minZoom;s<t;++s)n[s]=this.getTileRangeForExtentAndZ(e,s);this.fullTileRanges_=n}}var rc=Rm;function oc(i){let e=i.getDefaultTileGrid();return e||(e=Am(i),i.setDefaultTileGrid(e)),e}function Tm(i,e,t){const n=e[0],s=i.getTileCoordCenter(e),r=No(t);if(!Hs(r,s)){const o=ve(r),a=Math.ceil((r[0]-s[0])/o);return s[0]+=o*a,i.getTileCoordForCoordAndZ(s,n)}return e}function Im(i,e,t,n){n=n!==void 0?n:"top-left";const s=ac(i,e,t);return new rc({extent:i,origin:Ph(i,n),resolutions:s,tileSize:t})}function Lm(i){const e=i||{},t=e.extent||kt("EPSG:3857").getExtent(),n={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:ac(t,e.maxZoom,e.tileSize,e.maxResolution)};return new rc(n)}function ac(i,e,t,n){e=e!==void 0?e:Yh,t=St(t!==void 0?t:Co);const s=Gt(i),r=ve(i);n=n>0?n:Math.max(r/t[0],s/t[1]);const o=e+1,a=new Array(o);for(let l=0;l<o;++l)a[l]=n/Math.pow(2,l);return a}function Am(i,e,t,n){const s=No(i);return Im(s,e,t,n)}function No(i){i=kt(i);let e=i.getExtent();if(!e){const t=180*On.degrees/i.getMetersPerUnit();e=fi(-t,-t,t,t)}return e}class Mm extends ic{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.opaque_=e.opaque!==void 0?e.opaque:!1,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&St(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tileCache=new tc(e.cacheSize||0),this.tmpSize=[0,0],this.key_=e.key||"",this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(e,t){const n=this.getTileCacheForProjection(e);n&&n.expireCache(t)}forEachLoadedTile(e,t,n,s){const r=this.getTileCacheForProjection(e);if(!r)return!1;let o=!0,a,l,u;for(let c=n.minX;c<=n.maxX;++c)for(let d=n.minY;d<=n.maxY;++d)l=rr(t,c,d),u=!1,r.containsKey(l)&&(a=r.get(l),u=a.getState()===J.LOADED,u&&(u=s(a)!==!1)),u||(o=!1);return o}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getOpaque(e){return this.opaque_}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,n,s,r){return ae()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:oc(e)}getTileCacheForProjection(e){const t=this.getProjection();return oe(t===null||ji(t,e),68),this.tileCache}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,n){const s=this.getTileGridForProjection(n),r=this.getTilePixelRatio(t),o=St(s.getTileSize(e),this.tmpSize);return r==1?o:sm(o,r,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){t=t!==void 0?t:this.getProjection();const n=this.getTileGridForProjection(t);return this.getWrapX()&&t.isGlobal()&&(e=Tm(n,e,t)),Em(e,n)?e:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(e,t){const n=this.getTileCacheForProjection(t);e>n.highWaterMark&&(n.highWaterMark=e)}useTile(e,t,n,s){}}class km extends Jt{constructor(e,t){super(e),this.tile=t}}var Pm=Mm;function Om(i,e){const t=/\{z\}/g,n=/\{x\}/g,s=/\{y\}/g,r=/\{-y\}/g;return function(o,a,l){if(!!o)return i.replace(t,o[0].toString()).replace(n,o[1].toString()).replace(s,o[2].toString()).replace(r,function(){const u=o[0],c=e.getFullTileRange(u);return oe(c,55),(c.getHeight()-o[2]-1).toString()})}}function Fm(i,e){const t=i.length,n=new Array(t);for(let s=0;s<t;++s)n[s]=Om(i[s],e);return Dm(n)}function Dm(i){return i.length===1?i[0]:function(e,t,n){if(!e)return;const s=Cm(e),r=rn(s,i.length);return i[r](e,t,n)}}function Bm(i){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(i);if(t){const n=t[1].charCodeAt(0),s=t[2].charCodeAt(0);let r;for(r=n;r<=s;++r)e.push(i.replace(t[0],String.fromCharCode(r)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(i),t){const n=parseInt(t[2],10);for(let s=parseInt(t[1],10);s<=n;s++)e.push(i.replace(t[0],s.toString()));return e}return e.push(i),e}class Vo extends Pm{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===Vo.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,n=ce(t),s=t.getState();let r;s==J.LOADING?(this.tileLoadingKeys_[n]=!0,r=Ar.TILELOADSTART):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],r=s==J.ERROR?Ar.TILELOADERROR:s==J.LOADED?Ar.TILELOADEND:void 0),r!=null&&this.dispatchEvent(new km(r,t))}setTileLoadFunction(e){this.tileCache.clear(),this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,this.tileCache.pruneExceptNewestZ(),typeof t!="undefined"?this.setKey(t):this.changed()}setUrl(e){const t=Bm(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(Fm(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,n){}useTile(e,t,n){const s=rr(e,t,n);this.tileCache.containsKey(s)&&this.tileCache.get(s)}}var Nm=Vo;class Vm extends Nm{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:qm,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:Qu,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const e in this.tileCacheForProjection)if(this.tileCacheForProjection[e].canExpireCache())return!0;return!1}expireCache(e,t){const n=this.getTileCacheForProjection(e);this.tileCache.expireCache(this.tileCache==n?t:{});for(const s in this.tileCacheForProjection){const r=this.tileCacheForProjection[s];r.expireCache(r==n?t:{})}}getGutterForProjection(e){return this.getProjection()&&e&&!ji(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getOpaque(e){return this.getProjection()&&e&&!ji(this.getProjection(),e)?!1:super.getOpaque(e)}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||ji(t,e)))return this.tileGrid;const n=ce(e);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=oc(e)),this.tileGridForProjection[n]}getTileCacheForProjection(e){const t=this.getProjection();if(!t||ji(t,e))return this.tileCache;const n=ce(e);return n in this.tileCacheForProjection||(this.tileCacheForProjection[n]=new tc(this.tileCache.highWaterMark)),this.tileCacheForProjection[n]}createTile_(e,t,n,s,r,o){const a=[e,t,n],l=this.getTileCoordForTileUrlFunction(a,r),u=l?this.tileUrlFunction(l,s,r):void 0,c=new this.tileClass(a,u!==void 0?J.IDLE:J.EMPTY,u!==void 0?u:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return c.key=o,c.addEventListener(re.CHANGE,this.handleTileChange.bind(this)),c}getTile(e,t,n,s,r){const o=this.getProjection();if(!o||!r||ji(o,r))return this.getTileInternal(e,t,n,s,o||r);const a=this.getTileCacheForProjection(r),l=[e,t,n];let u;const c=ec(l);a.containsKey(c)&&(u=a.get(c));const d=this.getKey();if(u&&u.key==d)return u;const h=this.getTileGridForProjection(o),f=this.getTileGridForProjection(r),g=this.getTileCoordForTileUrlFunction(l,r),m=new to(o,h,r,f,l,g,this.getTilePixelRatio(s),this.getGutter(),(p,y,_,v)=>this.getTileInternal(p,y,_,v,o),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return m.key=d,u?(m.interimTile=u,m.refreshInterimChain(),a.replace(c,m)):a.set(c,m),m}getTileInternal(e,t,n,s,r){let o=null;const a=rr(e,t,n),l=this.getKey();if(!this.tileCache.containsKey(a))o=this.createTile_(e,t,n,s,r,l),this.tileCache.set(a,o);else if(o=this.tileCache.get(a),o.key!=l){const u=o;o=this.createTile_(e,t,n,s,r,l),u.getState()==J.IDLE?o.interimTile=u.interimTile:o.interimTile=u,o.refreshInterimChain(),this.tileCache.replace(a,o)}return o}setRenderReprojectionEdges(e){if(this.renderReprojectionEdges_!=e){this.renderReprojectionEdges_=e;for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear();this.changed()}}setTileGridForProjection(e,t){const n=kt(e);if(n){const s=ce(n);s in this.tileGridForProjection||(this.tileGridForProjection[s]=t)}}clear(){super.clear();for(const e in this.tileCacheForProjection)this.tileCacheForProjection[e].clear()}}function qm(i,e){i.getImage().src=e}var zm=Vm;class Gm extends zm{constructor(e){e=e||{};const t=e.projection!==void 0?e.projection:"EPSG:3857",n=e.tileGrid!==void 0?e.tileGrid:Lm({extent:No(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,opaque:e.opaque,projection:t,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:n,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}}var Wm=Gm;const Xm='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class jm extends Wm{constructor(e){e=e||{};let t;e.attributions!==void 0?t=e.attributions:t=[Xm];const n=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",s=e.url!==void 0?e.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:t,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:n,interpolate:e.interpolate,maxZoom:e.maxZoom!==void 0?e.maxZoom:19,opaque:e.opaque!==void 0?e.opaque:!0,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:s,wrapX:e.wrapX,zDirection:e.zDirection})}}var Ym=jm,gs={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class $m extends tr{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getPreload(){return this.get(gs.PRELOAD)}setPreload(e){this.set(gs.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(gs.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(gs.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}var Km=$m;class Um extends lu{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.declutterExecutorGroup=null}getFeatures(e){return ae()}getData(e){return null}prepareFrame(e){return ae()}renderFrame(e,t){return ae()}loadedTileCallback(e,t,n){e[t]||(e[t]={}),e[t][n.tileCoord.toString()]=n}createLoadedTileFinder(e,t,n){return(s,r)=>{const o=this.loadedTileCallback.bind(this,n,s);return e.forEachLoadedTile(t,s,r,o)}}forEachFeatureAtCoordinate(e,t,n,s,r){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){e.target.getState()===Le.LOADED&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=Le.LOADED&&t!=Le.ERROR&&e.addEventListener(re.CHANGE,this.boundHandleImageChange_),t==Le.IDLE&&(e.load(),t=e.getState()),t==Le.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}}var Hm=Um;const fl=[];let Ki=null;function Zm(){Ki=rt(1,1,void 0,{willReadFrequently:!0})}class Jm extends Hm{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=zt(),this.pixelTransform=zt(),this.inversePixelTransform=zt(),this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(e,t,n){Ki||Zm(),Ki.clearRect(0,0,1,1);let s;try{Ki.drawImage(e,t,n,1,1,0,0,1,1),s=Ki.getImageData(0,0,1,1).data}catch{return Ki=null,null}return s}getBackground(e){let n=this.getLayer().getBackground();return typeof n=="function"&&(n=n(e.viewState.resolution)),n||void 0}useContainer(e,t,n){const s=this.getLayer().getClassName();let r,o;if(e&&e.className===s&&(!n||e&&e.style.backgroundColor&&gi(ks(e.style.backgroundColor),ks(n)))){const a=e.firstElementChild;a instanceof HTMLCanvasElement&&(o=a.getContext("2d"))}if(o&&o.canvas.style.transform===t?(this.container=e,this.context=o,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){r=document.createElement("div"),r.className=s;let a=r.style;a.position="absolute",a.width="100%",a.height="100%",o=rt();const l=o.canvas;r.appendChild(l),a=l.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=r,this.context=o}!this.containerReused&&n&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=n)}clipUnrotated(e,t,n){const s=Pi(n),r=er(n),o=Qs(n),a=Js(n);Ve(t.coordinateToPixelTransform,s),Ve(t.coordinateToPixelTransform,r),Ve(t.coordinateToPixelTransform,o),Ve(t.coordinateToPixelTransform,a);const l=this.inversePixelTransform;Ve(l,s),Ve(l,r),Ve(l,o),Ve(l,a),e.save(),e.beginPath(),e.moveTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(r[0]),Math.round(r[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.clip()}dispatchRenderEvent_(e,t,n){const s=this.getLayer();if(s.hasListener(e)){const r=new zu(e,this.inversePixelTransform,n,t);s.dispatchEvent(r)}}preRender(e,t){this.frameState=t,this.dispatchRenderEvent_(ci.PRERENDER,e,t)}postRender(e,t){this.dispatchRenderEvent_(ci.POSTRENDER,e,t)}getRenderTransform(e,t,n,s,r,o,a){const l=r/2,u=o/2,c=s/t,d=-c,h=-e[0]+a,f=-e[1];return hi(this.tempTransform,l,u,c,d,-n,h,f)}disposeInternal(){delete this.frameState,super.disposeInternal()}}var lc=Jm;class Qm extends lc{constructor(e){super(e),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=Mt(),this.tmpTileRange_=new sc(0,0,0,0)}isDrawableTile(e){const t=this.getLayer(),n=e.getState(),s=t.getUseInterimTilesOnError();return n==J.LOADED||n==J.EMPTY||n==J.ERROR&&!s}getTile(e,t,n,s){const r=s.pixelRatio,o=s.viewState.projection,a=this.getLayer();let u=a.getSource().getTile(e,t,n,r,o);return u.getState()==J.ERROR&&a.getUseInterimTilesOnError()&&a.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(u)||(u=u.getInterimTile()),u}getData(e){const t=this.frameState;if(!t)return null;const n=this.getLayer(),s=Ve(t.pixelToCoordinateTransform,e.slice()),r=n.getExtent();if(r&&!Hs(r,s))return null;const o=t.pixelRatio,a=t.viewState.projection,l=t.viewState,u=n.getRenderSource(),c=u.getTileGridForProjection(l.projection),d=u.getTilePixelRatio(t.pixelRatio);for(let h=c.getZForResolution(l.resolution);h>=c.getMinZoom();--h){const f=c.getTileCoordForCoordAndZ(s,h),g=u.getTile(h,f[1],f[2],o,a);if(!(g instanceof Qu||g instanceof to)||g instanceof to&&g.getState()===J.EMPTY)return null;if(g.getState()!==J.LOADED)continue;const m=c.getOrigin(h),p=St(c.getTileSize(h)),y=c.getResolution(h),_=Math.floor(d*((s[0]-m[0])/y-f[1]*p[0])),v=Math.floor(d*((m[1]-s[1])/y-f[2]*p[1])),S=Math.round(d*u.getGutterForProjection(l.projection));return this.getImageData(g.getImage(),_+S,v+S)}return null}loadedTileCallback(e,t,n){return this.isDrawableTile(n)?super.loadedTileCallback(e,t,n):!1}prepareFrame(e){return!!this.getLayer().getSource()}renderFrame(e,t){const n=e.layerStatesArray[e.layerIndex],s=e.viewState,r=s.projection,o=s.resolution,a=s.center,l=s.rotation,u=e.pixelRatio,c=this.getLayer(),d=c.getSource(),h=d.getRevision(),f=d.getTileGridForProjection(r),g=f.getZForResolution(o,d.zDirection),m=f.getResolution(g);let p=e.extent;const y=e.viewState.resolution,_=d.getTilePixelRatio(u),v=Math.round(ve(p)/y*u),S=Math.round(Gt(p)/y*u),b=n.extent&&wi(n.extent);b&&(p=Tn(p,wi(n.extent)));const I=m*v/2/_,T=m*S/2/_,A=[a[0]-I,a[1]-T,a[0]+I,a[1]+T],V=f.getTileRangeForExtentAndZ(p,g),z={};z[g]={};const X=this.createLoadedTileFinder(d,r,z),D=this.tmpExtent,Y=this.tmpTileRange_;this.newTiles_=!1;const ie=l?Yr(s.center,y,l,e.size):void 0;for(let N=V.minX;N<=V.maxX;++N)for(let $=V.minY;$<=V.maxY;++$){if(l&&!f.tileCoordIntersectsViewport([g,N,$],ie))continue;const F=this.getTile(g,N,$,e);if(this.isDrawableTile(F)){const ne=ce(this);if(F.getState()==J.LOADED){z[g][F.tileCoord.toString()]=F;let O=F.inTransition(ne);O&&n.opacity!==1&&(F.endTransition(ne),O=!1),!this.newTiles_&&(O||!this.renderedTiles.includes(F))&&(this.newTiles_=!0)}if(F.getAlpha(ne,e.time)===1)continue}const W=f.getTileCoordChildTileRange(F.tileCoord,Y,D);let K=!1;W&&(K=X(g+1,W)),K||f.forEachTileCoordParentTileRange(F.tileCoord,X,Y,D)}const B=m/o*u/_;hi(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/u,1/u,l,-v/2,-S/2);const q=hu(this.pixelTransform);this.useContainer(t,q,this.getBackground(e));const E=this.context,M=E.canvas;vo(this.inversePixelTransform,this.pixelTransform),hi(this.tempTransform,v/2,S/2,B,B,0,-v/2,-S/2),M.width!=v||M.height!=S?(M.width=v,M.height=S):this.containerReused||E.clearRect(0,0,v,S),b&&this.clipUnrotated(E,e,b),d.getInterpolate()||(E.imageSmoothingEnabled=!1),this.preRender(E,e),this.renderedTiles.length=0;let H=Object.keys(z).map(Number);H.sort(dn);let L,P,w;n.opacity===1&&(!this.containerReused||d.getOpaque(e.viewState.projection))?H=H.reverse():(L=[],P=[]);for(let N=H.length-1;N>=0;--N){const $=H[N],F=d.getTilePixelSize($,u,r),K=f.getResolution($)/m,ne=F[0]*K*B,O=F[1]*K*B,me=f.getTileCoordForCoordAndZ(Pi(A),$),qe=f.getTileCoordExtent(me),Xe=Ve(this.tempTransform,[_*(qe[0]-A[0])/m,_*(A[3]-qe[3])/m]),De=_*d.getGutterForProjection(r),je=z[$];for(const Ye in je){const ke=je[Ye],mt=ke.tileCoord,_t=me[1]-mt[1],Pt=Math.round(Xe[0]-(_t-1)*ne),ye=me[2]-mt[2],Pe=Math.round(Xe[1]-(ye-1)*O),Se=Math.round(Xe[0]-_t*ne),Oe=Math.round(Xe[1]-ye*O),Qe=Pt-Se,et=Pe-Oe,pt=g===$,dt=pt&&ke.getAlpha(ce(this),e.time)!==1;let ht=!1;if(!dt)if(L){w=[Se,Oe,Se+Qe,Oe,Se+Qe,Oe+et,Se,Oe+et];for(let $e=0,ft=L.length;$e<ft;++$e)if(g!==$&&$<P[$e]){const be=L[$e];ct([Se,Oe,Se+Qe,Oe+et],[be[0],be[3],be[4],be[7]])&&(ht||(E.save(),ht=!0),E.beginPath(),E.moveTo(w[0],w[1]),E.lineTo(w[2],w[3]),E.lineTo(w[4],w[5]),E.lineTo(w[6],w[7]),E.moveTo(be[6],be[7]),E.lineTo(be[4],be[5]),E.lineTo(be[2],be[3]),E.lineTo(be[0],be[1]),E.clip())}L.push(w),P.push($)}else E.clearRect(Se,Oe,Qe,et);this.drawTileImage(ke,e,Se,Oe,Qe,et,De,pt),L&&!dt?(ht&&E.restore(),this.renderedTiles.unshift(ke)):this.renderedTiles.push(ke),this.updateUsedTiles(e.usedTiles,d,ke)}}return this.renderedRevision=h,this.renderedResolution=m,this.extentChanged=!this.renderedExtent_||!Pn(this.renderedExtent_,A),this.renderedExtent_=A,this.renderedPixelRatio=u,this.renderedProjection=r,this.manageTilePyramid(e,d,f,u,r,p,g,c.getPreload()),this.scheduleExpireCache(e,d),this.postRender(E,e),n.extent&&E.restore(),E.imageSmoothingEnabled=!0,q!==M.style.transform&&(M.style.transform=q),this.container}drawTileImage(e,t,n,s,r,o,a,l){const u=this.getTileImage(e);if(!u)return;const c=ce(this),d=t.layerStatesArray[t.layerIndex],h=d.opacity*(l?e.getAlpha(c,t.time):1),f=h!==this.context.globalAlpha;f&&(this.context.save(),this.context.globalAlpha=h),this.context.drawImage(u,a,a,u.width-2*a,u.height-2*a,n,s,r,o),f&&this.context.restore(),h!==d.opacity?t.animate=!0:l&&e.endTransition(c)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}scheduleExpireCache(e,t){if(t.canExpireCache()){const n=function(s,r,o){const a=ce(s);a in o.usedTiles&&s.expireCache(o.viewState.projection,o.usedTiles[a])}.bind(null,t);e.postRenderFunctions.push(n)}}updateUsedTiles(e,t,n){const s=ce(t);s in e||(e[s]={}),e[s][n.getKey()]=!0}manageTilePyramid(e,t,n,s,r,o,a,l,u){const c=ce(t);c in e.wantedTiles||(e.wantedTiles[c]={});const d=e.wantedTiles[c],h=e.tileQueue,f=n.getMinZoom(),g=e.viewState.rotation,m=g?Yr(e.viewState.center,e.viewState.resolution,g,e.size):void 0;let p=0,y,_,v,S,b,I;for(I=f;I<=a;++I)for(_=n.getTileRangeForExtentAndZ(o,I,_),v=n.getResolution(I),S=_.minX;S<=_.maxX;++S)for(b=_.minY;b<=_.maxY;++b)g&&!n.tileCoordIntersectsViewport([I,S,b],m)||(a-I<=l?(++p,y=t.getTile(I,S,b,s,r),y.getState()==J.IDLE&&(d[y.getKey()]=!0,h.isKeyQueued(y.getKey())||h.enqueue([y,c,n.getTileCoordCenter(y.tileCoord),v])),u!==void 0&&u(y)):t.useTile(I,S,b,r));t.updateCacheSize(p,r)}}var e_=Qm;class t_ extends Km{constructor(e){super(e)}createRenderer(){return new e_(this)}}var i_=t_;function n_(i,e,t,n,s){uc(i,e,t||0,n||i.length-1,s||s_)}function uc(i,e,t,n,s){for(;n>t;){if(n-t>600){var r=n-t+1,o=e-t+1,a=Math.log(r),l=.5*Math.exp(2*a/3),u=.5*Math.sqrt(a*l*(r-l)/r)*(o-r/2<0?-1:1),c=Math.max(t,Math.floor(e-o*l/r+u)),d=Math.min(n,Math.floor(e+(r-o)*l/r+u));uc(i,e,c,d,s)}var h=i[e],f=t,g=n;for(xn(i,t,e),s(i[n],h)>0&&xn(i,t,n);f<g;){for(xn(i,f,g),f++,g--;s(i[f],h)<0;)f++;for(;s(i[g],h)>0;)g--}s(i[t],h)===0?xn(i,t,g):(g++,xn(i,g,n)),g<=e&&(t=g+1),e<=g&&(n=g-1)}}function xn(i,e,t){var n=i[e];i[e]=i[t],i[t]=n}function s_(i,e){return i<e?-1:i>e?1:0}class cc{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const n=[];if(!_s(e,t))return n;const s=this.toBBox,r=[];for(;t;){for(let o=0;o<t.children.length;o++){const a=t.children[o],l=t.leaf?s(a):a;_s(e,l)&&(t.leaf?n.push(a):kr(e,l)?this._all(a,n):r.push(a))}t=r.pop()}return n}collides(e){let t=this.data;if(!_s(e,t))return!1;const n=[];for(;t;){for(let s=0;s<t.children.length;s++){const r=t.children[s],o=t.leaf?this.toBBox(r):r;if(_s(e,o)){if(t.leaf||kr(e,o))return!0;n.push(r)}}t=n.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let n=0;n<e.length;n++)this.insert(e[n]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const n=this.data;this.data=t,t=n}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=Ui([]),this}remove(e,t){if(!e)return this;let n=this.data;const s=this.toBBox(e),r=[],o=[];let a,l,u;for(;n||r.length;){if(n||(n=r.pop(),l=r[r.length-1],a=o.pop(),u=!0),n.leaf){const c=r_(e,n.children,t);if(c!==-1)return n.children.splice(c,1),r.push(n),this._condense(r),this}!u&&!n.leaf&&kr(n,s)?(r.push(n),o.push(a),a=0,l=n,n=n.children[0]):l?(a++,n=l.children[a],u=!1):n=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const n=[];for(;e;)e.leaf?t.push(...e.children):n.push(...e.children),e=n.pop();return t}_build(e,t,n,s){const r=n-t+1;let o=this._maxEntries,a;if(r<=o)return a=Ui(e.slice(t,n+1)),Wi(a,this.toBBox),a;s||(s=Math.ceil(Math.log(r)/Math.log(o)),o=Math.ceil(r/Math.pow(o,s-1))),a=Ui([]),a.leaf=!1,a.height=s;const l=Math.ceil(r/o),u=l*Math.ceil(Math.sqrt(o));gl(e,t,n,u,this.compareMinX);for(let c=t;c<=n;c+=u){const d=Math.min(c+u-1,n);gl(e,c,d,l,this.compareMinY);for(let h=c;h<=d;h+=l){const f=Math.min(h+l-1,d);a.children.push(this._build(e,h,f,s-1))}}return Wi(a,this.toBBox),a}_chooseSubtree(e,t,n,s){for(;s.push(t),!(t.leaf||s.length-1===n);){let r=1/0,o=1/0,a;for(let l=0;l<t.children.length;l++){const u=t.children[l],c=Mr(u),d=l_(e,u)-c;d<o?(o=d,r=c<r?c:r,a=u):d===o&&c<r&&(r=c,a=u)}t=a||t.children[0]}return t}_insert(e,t,n){const s=n?e:this.toBBox(e),r=[],o=this._chooseSubtree(s,this.data,t,r);for(o.children.push(e),bn(o,s);t>=0&&r[t].children.length>this._maxEntries;)this._split(r,t),t--;this._adjustParentBBoxes(s,r,t)}_split(e,t){const n=e[t],s=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,s);const o=this._chooseSplitIndex(n,r,s),a=Ui(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,Wi(n,this.toBBox),Wi(a,this.toBBox),t?e[t-1].children.push(a):this._splitRoot(n,a)}_splitRoot(e,t){this.data=Ui([e,t]),this.data.height=e.height+1,this.data.leaf=!1,Wi(this.data,this.toBBox)}_chooseSplitIndex(e,t,n){let s,r=1/0,o=1/0;for(let a=t;a<=n-t;a++){const l=En(e,0,a,this.toBBox),u=En(e,a,n,this.toBBox),c=u_(l,u),d=Mr(l)+Mr(u);c<r?(r=c,s=a,o=d<o?d:o):c===r&&d<o&&(o=d,s=a)}return s||n-t}_chooseSplitAxis(e,t,n){const s=e.leaf?this.compareMinX:o_,r=e.leaf?this.compareMinY:a_,o=this._allDistMargin(e,t,n,s),a=this._allDistMargin(e,t,n,r);o<a&&e.children.sort(s)}_allDistMargin(e,t,n,s){e.children.sort(s);const r=this.toBBox,o=En(e,0,t,r),a=En(e,n-t,n,r);let l=ms(o)+ms(a);for(let u=t;u<n-t;u++){const c=e.children[u];bn(o,e.leaf?r(c):c),l+=ms(o)}for(let u=n-t-1;u>=t;u--){const c=e.children[u];bn(a,e.leaf?r(c):c),l+=ms(a)}return l}_adjustParentBBoxes(e,t,n){for(let s=n;s>=0;s--)bn(t[s],e)}_condense(e){for(let t=e.length-1,n;t>=0;t--)e[t].children.length===0?t>0?(n=e[t-1].children,n.splice(n.indexOf(e[t]),1)):this.clear():Wi(e[t],this.toBBox)}}function r_(i,e,t){if(!t)return e.indexOf(i);for(let n=0;n<e.length;n++)if(t(i,e[n]))return n;return-1}function Wi(i,e){En(i,0,i.children.length,e,i)}function En(i,e,t,n,s){s||(s=Ui(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(let r=e;r<t;r++){const o=i.children[r];bn(s,i.leaf?n(o):o)}return s}function bn(i,e){return i.minX=Math.min(i.minX,e.minX),i.minY=Math.min(i.minY,e.minY),i.maxX=Math.max(i.maxX,e.maxX),i.maxY=Math.max(i.maxY,e.maxY),i}function o_(i,e){return i.minX-e.minX}function a_(i,e){return i.minY-e.minY}function Mr(i){return(i.maxX-i.minX)*(i.maxY-i.minY)}function ms(i){return i.maxX-i.minX+(i.maxY-i.minY)}function l_(i,e){return(Math.max(e.maxX,i.maxX)-Math.min(e.minX,i.minX))*(Math.max(e.maxY,i.maxY)-Math.min(e.minY,i.minY))}function u_(i,e){const t=Math.max(i.minX,e.minX),n=Math.max(i.minY,e.minY),s=Math.min(i.maxX,e.maxX),r=Math.min(i.maxY,e.maxY);return Math.max(0,s-t)*Math.max(0,r-n)}function kr(i,e){return i.minX<=e.minX&&i.minY<=e.minY&&e.maxX<=i.maxX&&e.maxY<=i.maxY}function _s(i,e){return e.minX<=i.maxX&&e.minY<=i.maxY&&e.maxX>=i.minX&&e.maxY>=i.minY}function Ui(i){return{children:i,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function gl(i,e,t,n,s){const r=[e,t];for(;r.length;){if(t=r.pop(),e=r.pop(),t-e<=n)continue;const o=e+Math.ceil((t-e)/n/2)*n;n_(i,o,e,t,s),r.push(e,o,o,t)}}class qo{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=St(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new qo({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return ae()}getImage(e){return ae()}getHitDetectionImage(){return ae()}getPixelRatio(e){return 1}getImageState(){return ae()}getImageSize(){return ae()}getOrigin(){return ae()}getSize(){return ae()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=St(e)}listenImageChange(e){ae()}load(){ae()}unlistenImageChange(e){ae()}}var dc=qo;function Vt(i){return Array.isArray(i)?xu(i):i}class zo extends dc{constructor(e){const t=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:1,rotateWithView:t,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius_=e.radius!==void 0?e.radius:e.radius1,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){const e=this.getScale(),t=new zo({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_;if(!e)return null;const t=this.getDisplacement(),n=this.getScaleArray();return[e[0]/2-t[0]/n[0],e[1]/2+t[1]/n[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(e){let t=this.canvas_[e];if(!t){const n=this.renderOptions_,s=rt(n.size*e,n.size*e);this.draw_(n,s,e),t=s.canvas,this.canvas_[e]=t}return t}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return Le.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,n){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let s=this.radius_,r=this.radius2_===void 0?s:this.radius2_;if(s<r){const I=s;s=r,r=I}const o=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/o,l=r*Math.sin(a),u=Math.sqrt(r*r-l*l),c=s-u,d=Math.sqrt(l*l+c*c),h=d/l;if(e==="miter"&&h<=n)return h*t;const f=t/2/h,g=t/2*(c/d),p=Math.sqrt((s+f)*(s+f)+g*g)-s;if(this.radius2_===void 0||e==="bevel")return p*2;const y=s*Math.sin(a),_=Math.sqrt(s*s-y*y),v=r-_,b=Math.sqrt(y*y+v*v)/y;if(b<=n){const I=b*t/2-r-s;return 2*Math.max(p,I)}return p*2}createRenderOptions(){let e=gn,t=0,n=null,s=0,r,o=0;this.stroke_&&(r=this.stroke_.getColor(),r===null&&(r=Vn),r=Vt(r),o=this.stroke_.getWidth(),o===void 0&&(o=zn),n=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset(),e=this.stroke_.getLineJoin(),e===void 0&&(e=gn),t=this.stroke_.getMiterLimit(),t===void 0&&(t=Nn));const a=this.calculateLineJoinSize_(e,o,t),l=Math.max(this.radius_,this.radius2_||0),u=Math.ceil(2*l+a);return{strokeStyle:r,strokeWidth:o,size:u,lineDash:n,lineDashOffset:s,lineJoin:e,miterLimit:t}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.canvas_={},this.size_=[e,e]}draw_(e,t,n){if(t.scale(n,n),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let s=this.fill_.getColor();s===null&&(s=Zt),t.fillStyle=Vt(s),t.fill()}this.stroke_&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){if(this.fill_){let t=this.fill_.getColor(),n=0;if(typeof t=="string"&&(t=ks(t)),t===null?n=1:Array.isArray(t)&&(n=t.length===4?t[3]:1),n===0){const s=rt(e.size,e.size);this.hitDetectionCanvas_=s.canvas,this.drawHitDetectionCanvas_(e,s)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(e){let t=this.points_;const n=this.radius_;if(t===1/0)e.arc(0,0,n,0,2*Math.PI);else{const s=this.radius2_===void 0?n:this.radius2_;this.radius2_!==void 0&&(t*=2);const r=this.angle_-Math.PI/2,o=2*Math.PI/t;for(let a=0;a<t;a++){const l=r+a*o,u=a%2===0?n:s;e.lineTo(u*Math.cos(l),u*Math.sin(l))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=Zt,t.fill(),this.stroke_&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}}var hc=zo;class Go extends hc{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new Go({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius_=e,this.render()}}var fc=Go;class Wo{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null}clone(){const e=this.getColor();return new Wo({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){this.color_=e}}var Xo=Wo;class jo{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new jo({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}var Yo=jo;class or{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=ml,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new or({geometry:e,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=ml,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function c_(i){let e;if(typeof i=="function")e=i;else{let t;Array.isArray(i)?t=i:(oe(typeof i.getZIndex=="function",41),t=[i]),e=function(){return t}}return e}let Pr=null;function d_(i,e){if(!Pr){const t=new Xo({color:"rgba(255,255,255,0.4)"}),n=new Yo({color:"#3399CC",width:1.25});Pr=[new or({image:new fc({fill:t,stroke:n,radius:5}),fill:t,stroke:n})]}return Pr}function ml(i){return i.getGeometry()}var Gn=or;let Sn=null;class h_ extends Ks{constructor(e,t,n,s,r,o){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=s,this.canvas_={},this.color_=o,this.unlisten_=null,this.imageState_=r,this.size_=n,this.src_=t,this.tainted_}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===Le.LOADED){Sn||(Sn=rt(1,1,void 0,{willReadFrequently:!0})),Sn.drawImage(this.image_,0,0);try{Sn.getImageData(0,0,1,1),this.tainted_=!1}catch{Sn=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(re.CHANGE)}handleImageError_(){this.imageState_=Le.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=Le.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],n=rt(e,t);n.fillRect(0,0,e,t),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===Le.IDLE){this.image_||this.initializeImage_(),this.imageState_=Le.LOADING;try{this.image_.src=this.src_}catch{this.handleImageError_()}this.unlisten_=Ju(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==Le.LOADED)return;const t=this.image_,n=document.createElement("canvas");n.width=Math.ceil(t.width*e),n.height=Math.ceil(t.height*e);const s=n.getContext("2d");s.scale(e,e),s.drawImage(t,0,0),s.globalCompositeOperation="multiply",s.fillStyle=yu(this.color_),s.fillRect(0,0,n.width/e,n.height/e),s.globalCompositeOperation="destination-in",s.drawImage(t,0,0),this.canvas_[e]=n}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function f_(i,e,t,n,s,r){let o=Ps.get(e,n,r);return o||(o=new h_(i,e,t,n,s,r),Ps.set(e,n,r,o)),o}function _l(i,e,t,n){return t!==void 0&&n!==void 0?[t/i,n/e]:t!==void 0?t/i:n!==void 0?n/e:1}class $o extends dc{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,n=e.rotation!==void 0?e.rotation:0,s=e.scale!==void 0?e.scale:1,r=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:n,scale:s,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:r,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const o=e.img!==void 0?e.img:null;this.imgSize_=e.imgSize;let a=e.src;oe(!(a!==void 0&&o),4),oe(!o||o&&this.imgSize_,5),(a===void 0||a.length===0)&&o&&(a=o.src||ce(o)),oe(a!==void 0&&a.length>0,6),oe(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),69);const l=e.src!==void 0?Le.IDLE:Le.LOADED;if(this.color_=e.color!==void 0?ks(e.color):null,this.iconImage_=f_(o,a,this.imgSize_!==void 0?this.imgSize_:null,this.crossOrigin_,l,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,e.width!==void 0||e.height!==void 0){let u,c;if(e.size)[u,c]=e.size;else{const d=this.getImage(1);if(d instanceof HTMLCanvasElement||d.src&&d.complete)u=d.width,c=d.height;else{this.initialOptions_=e;const h=()=>{if(this.unlistenImageChange(h),!this.initialOptions_)return;const f=this.iconImage_.getSize();this.setScale(_l(f[0],f[1],e.width,e.height))};this.listenImageChange(h);return}}u!==void 0&&this.setScale(_l(u,c,e.width,e.height))}}clone(){let e,t,n;return this.initialOptions_?(t=this.initialOptions_.width,n=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new $o({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:n,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const s=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!s)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=s[0]),this.anchorYUnits_=="fraction"&&(e[1]*=s[1])}if(this.anchorOrigin_!="top-left"){if(!s)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+s[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+s[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),n=this.getScaleArray();return[e[0]-t[0]/n[0],e[1]+t[1]/n[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),n=this.iconImage_.getSize();if(!t||!n)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=n[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=n[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==Le.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==Le.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(re.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(re.CHANGE,e)}}var Ko=$o;const g_="#333";class Uo{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.scaleArray_=St(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new Xo({color:g_}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding}clone(){const e=this.getScale();return new Uo({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=St(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}var m_=Uo;function pl(i){return new Gn({fill:Wn(i,""),stroke:Xn(i,""),text:__(i),image:p_(i)})}function Wn(i,e){const t=i[e+"fill-color"];if(!!t)return new Xo({color:t})}function Xn(i,e){const t=i[e+"stroke-width"],n=i[e+"stroke-color"];if(!(!t&&!n))return new Yo({width:t,color:n,lineCap:i[e+"stroke-line-cap"],lineJoin:i[e+"stroke-line-join"],lineDash:i[e+"stroke-line-dash"],lineDashOffset:i[e+"stroke-line-dash-offset"],miterLimit:i[e+"stroke-miter-limit"]})}function __(i){const e=i["text-value"];return e?new m_({text:e,font:i["text-font"],maxAngle:i["text-max-angle"],offsetX:i["text-offset-x"],offsetY:i["text-offset-y"],overflow:i["text-overflow"],placement:i["text-placement"],repeat:i["text-repeat"],scale:i["text-scale"],rotateWithView:i["text-rotate-with-view"],rotation:i["text-rotation"],textAlign:i["text-align"],justify:i["text-justify"],textBaseline:i["text-baseline"],padding:i["text-padding"],fill:Wn(i,"text-"),backgroundFill:Wn(i,"text-background-"),stroke:Xn(i,"text-"),backgroundStroke:Xn(i,"text-background-")}):void 0}function p_(i){const e=i["icon-src"],t=i["icon-img"];if(e||t)return new Ko({src:e,img:t,imgSize:i["icon-img-size"],anchor:i["icon-anchor"],anchorOrigin:i["icon-anchor-origin"],anchorXUnits:i["icon-anchor-x-units"],anchorYUnits:i["icon-anchor-y-units"],color:i["icon-color"],crossOrigin:i["icon-cross-origin"],offset:i["icon-offset"],displacement:i["icon-displacement"],opacity:i["icon-opacity"],scale:i["icon-scale"],width:i["icon-width"],height:i["icon-height"],rotation:i["icon-rotation"],rotateWithView:i["icon-rotate-with-view"],size:i["icon-size"],declutterMode:i["icon-declutter-mode"]});const n=i["shape-points"];if(n){const r="shape-";return new hc({points:n,fill:Wn(i,r),stroke:Xn(i,r),radius:i["shape-radius"],radius1:i["shape-radius1"],radius2:i["shape-radius2"],angle:i["shape-angle"],displacement:i["shape-displacement"],rotation:i["shape-rotation"],rotateWithView:i["shape-rotate-with-view"],scale:i["shape-scale"],declutterMode:i["shape-declutter-mode"]})}const s=i["circle-radius"];if(s){const r="circle-";return new fc({radius:s,fill:Wn(i,r),stroke:Xn(i,r),displacement:i["circle-displacement"],scale:i["circle-scale"],rotation:i["circle-rotation"],rotateWithView:i["circle-rotate-with-view"],declutterMode:i["circle-declutter-mode"]})}}const vl={RENDER_ORDER:"renderOrder"};class v_ extends tr{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter!==void 0?e.declutter:!1,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(vl.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e){e.declutterTree||(e.declutterTree=new cc(9)),this.getRenderer().renderDeclutter(e)}setRenderOrder(e){this.set(vl.RENDER_ORDER,e)}setStyle(e){let t;if(e===void 0)t=d_;else if(e===null)t=null;else if(typeof e=="function")t=e;else if(e instanceof Gn)t=e;else if(Array.isArray(e)){const n=e.length,s=new Array(n);for(let r=0;r<n;++r){const o=e[r];o instanceof Gn?s[r]=o:s[r]=pl(o)}t=s}else t=pl(e);this.style_=t,this.styleFunction_=e===null?void 0:c_(this.style_),this.changed()}}var y_=v_;const Zn={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},ps=[Zn.FILL],ui=[Zn.STROKE],Ii=[Zn.BEGIN_PATH],yl=[Zn.CLOSE_PATH];var Q=Zn;class x_{drawCustom(e,t,n,s){}drawGeometry(e){}setStyle(e){}drawCircle(e,t){}drawFeature(e,t){}drawGeometryCollection(e,t){}drawLineString(e,t){}drawMultiLineString(e,t){}drawMultiPoint(e,t){}drawMultiPolygon(e,t){}drawPoint(e,t){}drawPolygon(e,t){}drawText(e,t){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}var gc=x_;class S_ extends gc{constructor(e,t,n,s){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=s,this.maxLineWidth=0,this.resolution=n,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(n){return n*t})}appendFlatPointCoordinates(e,t){const n=this.getBufferedMaxExtent(),s=this.tmpCoordinate_,r=this.coordinates;let o=r.length;for(let a=0,l=e.length;a<l;a+=t)s[0]=e[a],s[1]=e[a+1],Hs(n,s)&&(r[o++]=s[0],r[o++]=s[1]);return o}appendFlatLineCoordinates(e,t,n,s,r,o){const a=this.coordinates;let l=a.length;const u=this.getBufferedMaxExtent();o&&(t+=s);let c=e[t],d=e[t+1];const h=this.tmpCoordinate_;let f=!0,g,m,p;for(g=t+s;g<n;g+=s)h[0]=e[g],h[1]=e[g+1],p=Wr(u,h),p!==m?(f&&(a[l++]=c,a[l++]=d,f=!1),a[l++]=h[0],a[l++]=h[1]):p===Ne.INTERSECTING?(a[l++]=h[0],a[l++]=h[1],f=!1):f=!0,c=h[0],d=h[1],m=p;return(r&&f||g===t+s)&&(a[l++]=c,a[l++]=d),l}drawCustomCoordinates_(e,t,n,s,r){for(let o=0,a=n.length;o<a;++o){const l=n[o],u=this.appendFlatLineCoordinates(e,t,l,s,!1,!1);r.push(u),t=l}return t}drawCustom(e,t,n,s){this.beginGeometry(e,t);const r=e.getType(),o=e.getStride(),a=this.coordinates.length;let l,u,c,d,h;switch(r){case"MultiPolygon":l=e.getOrientedFlatCoordinates(),d=[];const f=e.getEndss();h=0;for(let g=0,m=f.length;g<m;++g){const p=[];h=this.drawCustomCoordinates_(l,h,f[g],o,p),d.push(p)}this.instructions.push([Q.CUSTOM,a,d,e,n,Ja]),this.hitDetectionInstructions.push([Q.CUSTOM,a,d,e,s||n,Ja]);break;case"Polygon":case"MultiLineString":c=[],l=r=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),h=this.drawCustomCoordinates_(l,0,e.getEnds(),o,c),this.instructions.push([Q.CUSTOM,a,c,e,n,Bs]),this.hitDetectionInstructions.push([Q.CUSTOM,a,c,e,s||n,Bs]);break;case"LineString":case"Circle":l=e.getFlatCoordinates(),u=this.appendFlatLineCoordinates(l,0,l.length,o,!1,!1),this.instructions.push([Q.CUSTOM,a,u,e,n,Qi]),this.hitDetectionInstructions.push([Q.CUSTOM,a,u,e,s||n,Qi]);break;case"MultiPoint":l=e.getFlatCoordinates(),u=this.appendFlatPointCoordinates(l,o),u>a&&(this.instructions.push([Q.CUSTOM,a,u,e,n,Qi]),this.hitDetectionInstructions.push([Q.CUSTOM,a,u,e,s||n,Qi]));break;case"Point":l=e.getFlatCoordinates(),this.coordinates.push(l[0],l[1]),u=this.coordinates.length,this.instructions.push([Q.CUSTOM,a,u,e,n]),this.hitDetectionInstructions.push([Q.CUSTOM,a,u,e,s||n]);break}this.endGeometry(t)}beginGeometry(e,t){this.beginGeometryInstruction1_=[Q.BEGIN_GEOMETRY,t,0,e],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Q.BEGIN_GEOMETRY,t,0,e],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const n=e.length;let s,r,o=-1;for(t=0;t<n;++t)s=e[t],r=s[0],r==Q.END_GEOMETRY?o=t:r==Q.BEGIN_GEOMETRY&&(s[2]=t,ch(this.hitDetectionInstructions,o,t),o=-1)}setFillStrokeStyle(e,t){const n=this.state;if(e){const s=e.getColor();n.fillStyle=Vt(s||Zt)}else n.fillStyle=void 0;if(t){const s=t.getColor();n.strokeStyle=Vt(s||Vn);const r=t.getLineCap();n.lineCap=r!==void 0?r:Vs;const o=t.getLineDash();n.lineDash=o?o.slice():Dn;const a=t.getLineDashOffset();n.lineDashOffset=a||Bn;const l=t.getLineJoin();n.lineJoin=l!==void 0?l:gn;const u=t.getWidth();n.lineWidth=u!==void 0?u:zn;const c=t.getMiterLimit();n.miterLimit=c!==void 0?c:Nn,n.lineWidth>this.maxLineWidth&&(this.maxLineWidth=n.lineWidth,this.bufferedMaxExtent_=null)}else n.strokeStyle=void 0,n.lineCap=void 0,n.lineDash=null,n.lineDashOffset=void 0,n.lineJoin=void 0,n.lineWidth=void 0,n.miterLimit=void 0}createFill(e){const t=e.fillStyle,n=[Q.SET_FILL_STYLE,t];return typeof t!="string"&&n.push(!0),n}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[Q.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const n=e.fillStyle;(typeof n!="string"||e.currentFillStyle!=n)&&(n!==void 0&&this.instructions.push(t.call(this,e)),e.currentFillStyle=n)}updateStrokeStyle(e,t){const n=e.strokeStyle,s=e.lineCap,r=e.lineDash,o=e.lineDashOffset,a=e.lineJoin,l=e.lineWidth,u=e.miterLimit;(e.currentStrokeStyle!=n||e.currentLineCap!=s||r!=e.currentLineDash&&!gi(e.currentLineDash,r)||e.currentLineDashOffset!=o||e.currentLineJoin!=a||e.currentLineWidth!=l||e.currentMiterLimit!=u)&&(n!==void 0&&t.call(this,e),e.currentStrokeStyle=n,e.currentLineCap=s,e.currentLineDash=r,e.currentLineDashOffset=o,e.currentLineJoin=a,e.currentLineWidth=l,e.currentMiterLimit=u)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[Q.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=fu(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;yo(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}var Jn=S_;class C_ extends Jn{constructor(e,t,n,s){super(e,t,n,s),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t){if(!this.image_)return;this.beginGeometry(e,t);const n=e.getFlatCoordinates(),s=e.getStride(),r=this.coordinates.length,o=this.appendFlatPointCoordinates(n,s);this.instructions.push([Q.DRAW_IMAGE,r,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Q.DRAW_IMAGE,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t){if(!this.image_)return;this.beginGeometry(e,t);const n=e.getFlatCoordinates(),s=e.getStride(),r=this.coordinates.length,o=this.appendFlatPointCoordinates(n,s);this.instructions.push([Q.DRAW_IMAGE,r,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Q.DRAW_IMAGE,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const n=e.getAnchor(),s=e.getSize(),r=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=n[0],this.anchorY_=n[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=s[1],this.opacity_=e.getOpacity(),this.originX_=r[0],this.originY_=r[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=s[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}var E_=C_;class b_ extends Jn{constructor(e,t,n,s){super(e,t,n,s)}drawFlatCoordinates_(e,t,n,s){const r=this.coordinates.length,o=this.appendFlatLineCoordinates(e,t,n,s,!1,!1),a=[Q.MOVE_TO_LINE_TO,r,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),n}drawLineString(e,t){const n=this.state,s=n.strokeStyle,r=n.lineWidth;if(s===void 0||r===void 0)return;this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(e,t),this.hitDetectionInstructions.push([Q.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,Dn,Bn],Ii);const o=e.getFlatCoordinates(),a=e.getStride();this.drawFlatCoordinates_(o,0,o.length,a),this.hitDetectionInstructions.push(ui),this.endGeometry(t)}drawMultiLineString(e,t){const n=this.state,s=n.strokeStyle,r=n.lineWidth;if(s===void 0||r===void 0)return;this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(e,t),this.hitDetectionInstructions.push([Q.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset],Ii);const o=e.getEnds(),a=e.getFlatCoordinates(),l=e.getStride();let u=0;for(let c=0,d=o.length;c<d;++c)u=this.drawFlatCoordinates_(a,u,o[c],l);this.hitDetectionInstructions.push(ui),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(ui),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(ui),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(Ii)}}var w_=b_;class R_ extends Jn{constructor(e,t,n,s){super(e,t,n,s)}drawFlatCoordinatess_(e,t,n,s){const r=this.state,o=r.fillStyle!==void 0,a=r.strokeStyle!==void 0,l=n.length;this.instructions.push(Ii),this.hitDetectionInstructions.push(Ii);for(let u=0;u<l;++u){const c=n[u],d=this.coordinates.length,h=this.appendFlatLineCoordinates(e,t,c,s,!0,!a),f=[Q.MOVE_TO_LINE_TO,d,h];this.instructions.push(f),this.hitDetectionInstructions.push(f),a&&(this.instructions.push(yl),this.hitDetectionInstructions.push(yl)),t=c}return o&&(this.instructions.push(ps),this.hitDetectionInstructions.push(ps)),a&&(this.instructions.push(ui),this.hitDetectionInstructions.push(ui)),t}drawCircle(e,t){const n=this.state,s=n.fillStyle,r=n.strokeStyle;if(s===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),n.fillStyle!==void 0&&this.hitDetectionInstructions.push([Q.SET_FILL_STYLE,Zt]),n.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Q.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);const o=e.getFlatCoordinates(),a=e.getStride(),l=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,a,!1,!1);const u=[Q.CIRCLE,l];this.instructions.push(Ii,u),this.hitDetectionInstructions.push(Ii,u),n.fillStyle!==void 0&&(this.instructions.push(ps),this.hitDetectionInstructions.push(ps)),n.strokeStyle!==void 0&&(this.instructions.push(ui),this.hitDetectionInstructions.push(ui)),this.endGeometry(t)}drawPolygon(e,t){const n=this.state,s=n.fillStyle,r=n.strokeStyle;if(s===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),n.fillStyle!==void 0&&this.hitDetectionInstructions.push([Q.SET_FILL_STYLE,Zt]),n.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Q.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);const o=e.getEnds(),a=e.getOrientedFlatCoordinates(),l=e.getStride();this.drawFlatCoordinatess_(a,0,o,l),this.endGeometry(t)}drawMultiPolygon(e,t){const n=this.state,s=n.fillStyle,r=n.strokeStyle;if(s===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),n.fillStyle!==void 0&&this.hitDetectionInstructions.push([Q.SET_FILL_STYLE,Zt]),n.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Q.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);const o=e.getEndss(),a=e.getOrientedFlatCoordinates(),l=e.getStride();let u=0;for(let c=0,d=o.length;c<d;++c)u=this.drawFlatCoordinatess_(a,u,o[c],l);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let n=0,s=t.length;n<s;++n)t[n]=Ei(t[n],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;e.fillStyle!==void 0&&this.updateFillStyle(e,this.createFill),e.strokeStyle!==void 0&&this.updateStrokeStyle(e,this.applyStroke)}}var xl=R_;function T_(i,e,t,n,s){const r=[];let o=t,a=0,l=e.slice(t,2);for(;a<i&&o+s<n;){const[u,c]=l.slice(-2),d=e[o+s],h=e[o+s+1],f=Math.sqrt((d-u)*(d-u)+(h-c)*(h-c));if(a+=f,a>=i){const g=(i-a+f)/f,m=Lt(u,d,g),p=Lt(c,h,g);l.push(m,p),r.push(l),l=[m,p],a==i&&(o+=s),a=0}else if(a<i)l.push(e[o+s],e[o+s+1]),o+=s;else{const g=f-a,m=Lt(u,d,g/f),p=Lt(c,h,g/f);l.push(m,p),r.push(l),l=[m,p],a=0,o+=s}}return a>0&&r.push(l),r}function I_(i,e,t,n,s){let r=t,o=t,a=0,l=0,u=t,c,d,h,f,g,m,p,y,_,v;for(d=t;d<n;d+=s){const S=e[d],b=e[d+1];g!==void 0&&(_=S-g,v=b-m,f=Math.sqrt(_*_+v*v),p!==void 0&&(l+=h,c=Math.acos((p*_+y*v)/(h*f)),c>i&&(l>a&&(a=l,r=u,o=d),l=0,u=d-s)),h=f,p=_,y=v),g=S,m=b}return l+=f,l>a?[u,d]:[r,o]}const In={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class L_ extends Jn{constructor(e,t,n,s){super(e,t,n,s),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t){const n=this.textFillState_,s=this.textStrokeState_,r=this.textState_;if(this.text_===""||!r||!n&&!s)return;const o=this.coordinates;let a=o.length;const l=e.getType();let u=null,c=e.getStride();if(r.placement==="line"&&(l=="LineString"||l=="MultiLineString"||l=="Polygon"||l=="MultiPolygon")){if(!ct(this.getBufferedMaxExtent(),e.getExtent()))return;let d;if(u=e.getFlatCoordinates(),l=="LineString")d=[u.length];else if(l=="MultiLineString")d=e.getEnds();else if(l=="Polygon")d=e.getEnds().slice(0,1);else if(l=="MultiPolygon"){const m=e.getEndss();d=[];for(let p=0,y=m.length;p<y;++p)d.push(m[p][0])}this.beginGeometry(e,t);const h=r.repeat,f=h?void 0:r.textAlign;let g=0;for(let m=0,p=d.length;m<p;++m){let y;h?y=T_(h*this.resolution,u,g,d[m],c):y=[u.slice(g,d[m])];for(let _=0,v=y.length;_<v;++_){const S=y[_];let b=0,I=S.length;if(f==null){const A=I_(r.maxAngle,S,0,S.length,2);b=A[0],I=A[1]}for(let A=b;A<I;A+=c)o.push(S[A],S[A+1]);const T=o.length;g=d[m],this.drawChars_(a,T),a=T}}this.endGeometry(t)}else{let d=r.overflow?null:[];switch(l){case"Point":case"MultiPoint":u=e.getFlatCoordinates();break;case"LineString":u=e.getFlatMidpoint();break;case"Circle":u=e.getCenter();break;case"MultiLineString":u=e.getFlatMidpoints(),c=2;break;case"Polygon":u=e.getFlatInteriorPoint(),r.overflow||d.push(u[2]/this.resolution),c=3;break;case"MultiPolygon":const p=e.getFlatInteriorPoints();u=[];for(let y=0,_=p.length;y<_;y+=3)r.overflow||d.push(p[y+2]/this.resolution),u.push(p[y],p[y+1]);if(u.length===0)return;c=2;break}const h=this.appendFlatPointCoordinates(u,c);if(h===a)return;if(d&&(h-a)/2!==u.length/c){let p=a/2;d=d.filter((y,_)=>{const v=o[(p+_)*2]===u[_*c]&&o[(p+_)*2+1]===u[_*c+1];return v||--p,v})}this.saveTextStates_(),(r.backgroundFill||r.backgroundStroke)&&(this.setFillStrokeStyle(r.backgroundFill,r.backgroundStroke),r.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),r.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e,t);let f=r.padding;if(f!=Ti&&(r.scale[0]<0||r.scale[1]<0)){let p=r.padding[0],y=r.padding[1],_=r.padding[2],v=r.padding[3];r.scale[0]<0&&(y=-y,v=-v),r.scale[1]<0&&(p=-p,_=-_),f=[p,y,_,v]}const g=this.pixelRatio;this.instructions.push([Q.DRAW_IMAGE,a,h,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,f==Ti?Ti:f.map(function(p){return p*g}),!!r.backgroundFill,!!r.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,d]);const m=1/g;this.hitDetectionInstructions.push([Q.DRAW_IMAGE,a,h,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[m,m],NaN,void 0,this.declutterImageWithText_,f,!!r.backgroundFill,!!r.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,d]),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,n=this.textFillState_,s=this.strokeKey_;e&&(s in this.strokeStates||(this.strokeStates[s]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const r=this.textKey_;r in this.textStates||(this.textStates[r]={font:t.font,textAlign:t.textAlign||qn,justify:t.justify,textBaseline:t.textBaseline||qs,scale:t.scale});const o=this.fillKey_;n&&(o in this.fillStates||(this.fillStates[o]={fillStyle:n.fillStyle}))}drawChars_(e,t){const n=this.textStrokeState_,s=this.textState_,r=this.strokeKey_,o=this.textKey_,a=this.fillKey_;this.saveTextStates_();const l=this.pixelRatio,u=In[s.textBaseline],c=this.textOffsetY_*l,d=this.text_,h=n?n.lineWidth*Math.abs(s.scale[0])/2:0;this.instructions.push([Q.DRAW_CHARS,e,t,u,s.overflow,a,s.maxAngle,l,c,r,h*l,d,o,1]),this.hitDetectionInstructions.push([Q.DRAW_CHARS,e,t,u,s.overflow,a,s.maxAngle,1,c,r,h,d,o,1/l])}setTextStyle(e,t){let n,s,r;if(!e)this.text_="";else{const o=e.getFill();o?(s=this.textFillState_,s||(s={},this.textFillState_=s),s.fillStyle=Vt(o.getColor()||Zt)):(s=null,this.textFillState_=s);const a=e.getStroke();if(!a)r=null,this.textStrokeState_=r;else{r=this.textStrokeState_,r||(r={},this.textStrokeState_=r);const g=a.getLineDash(),m=a.getLineDashOffset(),p=a.getWidth(),y=a.getMiterLimit();r.lineCap=a.getLineCap()||Vs,r.lineDash=g?g.slice():Dn,r.lineDashOffset=m===void 0?Bn:m,r.lineJoin=a.getLineJoin()||gn,r.lineWidth=p===void 0?zn:p,r.miterLimit=y===void 0?Nn:y,r.strokeStyle=Vt(a.getColor()||Vn)}n=this.textState_;const l=e.getFont()||Wu;tg(l);const u=e.getScaleArray();n.overflow=e.getOverflow(),n.font=l,n.maxAngle=e.getMaxAngle(),n.placement=e.getPlacement(),n.textAlign=e.getTextAlign(),n.repeat=e.getRepeat(),n.justify=e.getJustify(),n.textBaseline=e.getTextBaseline()||qs,n.backgroundFill=e.getBackgroundFill(),n.backgroundStroke=e.getBackgroundStroke(),n.padding=e.getPadding()||Ti,n.scale=u===void 0?[1,1]:u;const c=e.getOffsetX(),d=e.getOffsetY(),h=e.getRotateWithView(),f=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=c===void 0?0:c,this.textOffsetY_=d===void 0?0:d,this.textRotateWithView_=h===void 0?!1:h,this.textRotation_=f===void 0?0:f,this.strokeKey_=r?(typeof r.strokeStyle=="string"?r.strokeStyle:ce(r.strokeStyle))+r.lineCap+r.lineDashOffset+"|"+r.lineWidth+r.lineJoin+r.miterLimit+"["+r.lineDash.join()+"]":"",this.textKey_=n.font+n.scale+(n.textAlign||"?")+(n.repeat||"?")+(n.justify||"?")+(n.textBaseline||"?"),this.fillKey_=s?typeof s.fillStyle=="string"?s.fillStyle:"|"+ce(s.fillStyle):""}this.declutterImageWithText_=t}}const A_={Circle:xl,Default:Jn,Image:E_,LineString:w_,Polygon:xl,Text:L_};class M_{constructor(e,t,n,s){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=s,this.resolution_=n,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const n=this.buildersByZIndex_[t];for(const s in n){const r=n[s].finish();e[t][s]=r}}return e}getBuilder(e,t){const n=e!==void 0?e.toString():"0";let s=this.buildersByZIndex_[n];s===void 0&&(s={},this.buildersByZIndex_[n]=s);let r=s[t];if(r===void 0){const o=A_[t];r=new o(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),s[t]=r}return r}}var Sl=M_;function k_(i,e,t,n,s,r,o,a,l,u,c,d){let h=i[e],f=i[e+1],g=0,m=0,p=0,y=0;function _(){g=h,m=f,e+=n,h=i[e],f=i[e+1],y+=p,p=Math.sqrt((h-g)*(h-g)+(f-m)*(f-m))}do _();while(e<t-n&&y+p<r);let v=p===0?0:(r-y)/p;const S=Lt(g,h,v),b=Lt(m,f,v),I=e-n,T=y,A=r+a*l(u,s,c);for(;e<t-n&&y+p<A;)_();v=p===0?0:(A-y)/p;const V=Lt(g,h,v),z=Lt(m,f,v);let X;if(d){const q=[S,b,V,z];Mu(q,0,4,2,d,q,q),X=q[0]>q[2]}else X=S>V;const D=Math.PI,Y=[],ie=I+n===e;e=I,p=0,y=T,h=i[e],f=i[e+1];let B;if(ie){_(),B=Math.atan2(f-m,h-g),X&&(B+=B>0?-D:D);const q=(V+S)/2,E=(z+b)/2;return Y[0]=[q,E,(A-r)/2,B,s],Y}s=s.replace(/\n/g," ");for(let q=0,E=s.length;q<E;){_();let M=Math.atan2(f-m,h-g);if(X&&(M+=M>0?-D:D),B!==void 0){let $=M-B;if($+=$>D?-2*D:$<-D?2*D:0,Math.abs($)>o)return null}B=M;const H=q;let L=0;for(;q<E;++q){const $=X?E-q-1:q,F=a*l(u,s[$],c);if(e+n<t&&y+p<r+L+F/2)break;L+=F}if(q===H)continue;const P=X?s.substring(E-H,E-q):s.substring(H,q);v=p===0?0:(r+L/2-y)/p;const w=Lt(g,h,v),N=Lt(m,f,v);Y.push([w,N,L/2,M,P]),r+=L}return Y}function P_(i,e,t,n){let s=i[e],r=i[e+1],o=0;for(let a=e+n;a<t;a+=n){const l=i[a],u=i[a+1];o+=Math.sqrt((l-s)*(l-s)+(u-r)*(u-r)),s=l,r=u}return o}const Xi=Mt(),ii=[],jt=[],Yt=[],ni=[];function Cl(i){return i[3].declutterBox}const O_=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function El(i,e){return(e==="start"||e==="end")&&!O_.test(i)&&(e=e==="start"?"left":"right"),In[e]}function F_(i,e,t){return t>0&&i.push(`
`,""),i.push(e,""),i}class D_{constructor(e,t,n,s){this.overlaps=n,this.pixelRatio=t,this.resolution=e,this.alignFill_,this.instructions=s.instructions,this.coordinates=s.coordinates,this.coordinateCache_={},this.renderedTransform_=zt(),this.hitDetectionInstructions=s.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=s.fillStates||{},this.strokeStates=s.strokeStates||{},this.textStates=s.textStates||{},this.widths_={},this.labels_={}}createLabel(e,t,n,s){const r=e+t+n+s;if(this.labels_[r])return this.labels_[r];const o=s?this.strokeStates[s]:null,a=n?this.fillStates[n]:null,l=this.textStates[t],u=this.pixelRatio,c=[l.scale[0]*u,l.scale[1]*u],d=Array.isArray(e),h=l.justify?In[l.justify]:El(Array.isArray(e)?e[0]:e,l.textAlign||qn),f=s&&o.lineWidth?o.lineWidth:0,g=d?e:e.split(`
`).reduce(F_,[]),{width:m,height:p,widths:y,heights:_,lineWidths:v}=ng(l,g),S=m+f,b=[],I=(S+2)*c[0],T=(p+f)*c[1],A={width:I<0?Math.floor(I):Math.ceil(I),height:T<0?Math.floor(T):Math.ceil(T),contextInstructions:b};(c[0]!=1||c[1]!=1)&&b.push("scale",c),s&&(b.push("strokeStyle",o.strokeStyle),b.push("lineWidth",f),b.push("lineCap",o.lineCap),b.push("lineJoin",o.lineJoin),b.push("miterLimit",o.miterLimit),b.push("setLineDash",[o.lineDash]),b.push("lineDashOffset",o.lineDashOffset)),n&&b.push("fillStyle",a.fillStyle),b.push("textBaseline","middle"),b.push("textAlign","center");const V=.5-h;let z=h*S+V*f;const X=[],D=[];let Y=0,ie=0,B=0,q=0,E;for(let M=0,H=g.length;M<H;M+=2){const L=g[M];if(L===`
`){ie+=Y,Y=0,z=h*S+V*f,++q;continue}const P=g[M+1]||l.font;P!==E&&(s&&X.push("font",P),n&&D.push("font",P),E=P),Y=Math.max(Y,_[B]);const w=[L,z+V*y[B]+h*(y[B]-v[q]),.5*(f+Y)+ie];z+=y[B],s&&X.push("strokeText",w),n&&D.push("fillText",w),++B}return Array.prototype.push.apply(b,X),Array.prototype.push.apply(b,D),this.labels_[r]=A,A}replayTextBackground_(e,t,n,s,r,o,a){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,n),e.lineTo.apply(e,s),e.lineTo.apply(e,r),e.lineTo.apply(e,t),o&&(this.alignFill_=o[2],this.fill_(e)),a&&(this.setStrokeStyle_(e,a),e.stroke())}calculateImageOrLabelDimensions_(e,t,n,s,r,o,a,l,u,c,d,h,f,g,m,p){a*=h[0],l*=h[1];let y=n-a,_=s-l;const v=r+u>e?e-u:r,S=o+c>t?t-c:o,b=g[3]+v*h[0]+g[1],I=g[0]+S*h[1]+g[2],T=y-g[3],A=_-g[0];(m||d!==0)&&(ii[0]=T,ni[0]=T,ii[1]=A,jt[1]=A,jt[0]=T+b,Yt[0]=jt[0],Yt[1]=A+I,ni[1]=Yt[1]);let V;return d!==0?(V=hi(zt(),n,s,1,1,d,-n,-s),Ve(V,ii),Ve(V,jt),Ve(V,Yt),Ve(V,ni),fi(Math.min(ii[0],jt[0],Yt[0],ni[0]),Math.min(ii[1],jt[1],Yt[1],ni[1]),Math.max(ii[0],jt[0],Yt[0],ni[0]),Math.max(ii[1],jt[1],Yt[1],ni[1]),Xi)):fi(Math.min(T,T+b),Math.min(A,A+I),Math.max(T,T+b),Math.max(A,A+I),Xi),f&&(y=Math.round(y),_=Math.round(_)),{drawImageX:y,drawImageY:_,drawImageW:v,drawImageH:S,originX:u,originY:c,declutterBox:{minX:Xi[0],minY:Xi[1],maxX:Xi[2],maxY:Xi[3],value:p},canvasTransform:V,scale:h}}replayImageOrLabel_(e,t,n,s,r,o,a){const l=!!(o||a),u=s.declutterBox,c=e.canvas,d=a?a[2]*s.scale[0]/2:0;return u.minX-d<=c.width/t&&u.maxX+d>=0&&u.minY-d<=c.height/t&&u.maxY+d>=0&&(l&&this.replayTextBackground_(e,ii,jt,Yt,ni,o,a),sg(e,s.canvasTransform,r,n,s.originX,s.originY,s.drawImageW,s.drawImageH,s.drawImageX,s.drawImageY,s.scale)),!0}fill_(e){if(this.alignFill_){const t=Ve(this.renderedTransform_,[0,0]),n=512*this.pixelRatio;e.save(),e.translate(t[0]%n,t[1]%n),e.rotate(this.viewRotation_)}e.fill(),this.alignFill_&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6])}drawLabelWithPointPlacement_(e,t,n,s){const r=this.textStates[t],o=this.createLabel(e,t,s,n),a=this.strokeStates[n],l=this.pixelRatio,u=El(Array.isArray(e)?e[0]:e,r.textAlign||qn),c=In[r.textBaseline||qs],d=a&&a.lineWidth?a.lineWidth:0,h=o.width/l-2*r.scale[0],f=u*h+2*(.5-u)*d,g=c*o.height/l+2*(.5-c)*d;return{label:o,anchorX:f,anchorY:g}}execute_(e,t,n,s,r,o,a,l){let u;this.pixelCoordinates_&&gi(n,this.renderedTransform_)?u=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),u=ki(this.coordinates,0,this.coordinates.length,2,n,this.pixelCoordinates_),Rh(this.renderedTransform_,n));let c=0;const d=s.length;let h=0,f,g,m,p,y,_,v,S,b,I,T,A,V=0,z=0,X=null,D=null;const Y=this.coordinateCache_,ie=this.viewRotation_,B=Math.round(Math.atan2(-n[1],n[0])*1e12)/1e12,q={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:ie},E=this.instructions!=s||this.overlaps?0:200;let M,H,L,P;for(;c<d;){const w=s[c];switch(w[0]){case Q.BEGIN_GEOMETRY:M=w[1],P=w[3],M.getGeometry()?a!==void 0&&!ct(a,P.getExtent())?c=w[2]+1:++c:c=w[2];break;case Q.BEGIN_PATH:V>E&&(this.fill_(e),V=0),z>E&&(e.stroke(),z=0),!V&&!z&&(e.beginPath(),p=NaN,y=NaN),++c;break;case Q.CIRCLE:h=w[1];const $=u[h],F=u[h+1],W=u[h+2],K=u[h+3],ne=W-$,O=K-F,me=Math.sqrt(ne*ne+O*O);e.moveTo($+me,F),e.arc($,F,me,0,2*Math.PI,!0),++c;break;case Q.CLOSE_PATH:e.closePath(),++c;break;case Q.CUSTOM:h=w[1],f=w[2];const qe=w[3],Xe=w[4],De=w.length==6?w[5]:void 0;q.geometry=qe,q.feature=M,c in Y||(Y[c]=[]);const je=Y[c];De?De(u,h,f,2,je):(je[0]=u[h],je[1]=u[h+1],je.length=2),Xe(je,q),++c;break;case Q.DRAW_IMAGE:h=w[1],f=w[2],S=w[3],g=w[4],m=w[5];let Ye=w[6];const ke=w[7],mt=w[8],_t=w[9],Pt=w[10];let ye=w[11];const Pe=w[12];let Se=w[13];const Oe=w[14],Qe=w[15];if(!S&&w.length>=20){b=w[19],I=w[20],T=w[21],A=w[22];const Ke=this.drawLabelWithPointPlacement_(b,I,T,A);S=Ke.label,w[3]=S;const bt=w[23];g=(Ke.anchorX-bt)*this.pixelRatio,w[4]=g;const Be=w[24];m=(Ke.anchorY-Be)*this.pixelRatio,w[5]=m,Ye=S.height,w[6]=Ye,Se=S.width,w[13]=Se}let et;w.length>25&&(et=w[25]);let pt,dt,ht;w.length>17?(pt=w[16],dt=w[17],ht=w[18]):(pt=Ti,dt=!1,ht=!1),Pt&&B?ye+=ie:!Pt&&!B&&(ye-=ie);let $e=0;for(;h<f;h+=2){if(et&&et[$e++]<Se/this.pixelRatio)continue;const Ke=this.calculateImageOrLabelDimensions_(S.width,S.height,u[h],u[h+1],Se,Ye,g,m,mt,_t,ye,Pe,r,pt,dt||ht,M),bt=[e,t,S,Ke,ke,dt?X:null,ht?D:null];if(l){if(Oe==="none")continue;if(Oe==="obstacle"){l.insert(Ke.declutterBox);continue}else{let Be,Ue;if(Qe){const tt=f-h;if(!Qe[tt]){Qe[tt]=bt;continue}if(Be=Qe[tt],delete Qe[tt],Ue=Cl(Be),l.collides(Ue))continue}if(l.collides(Ke.declutterBox))continue;Be&&(l.insert(Ue),this.replayImageOrLabel_.apply(this,Be)),l.insert(Ke.declutterBox)}}this.replayImageOrLabel_.apply(this,bt)}++c;break;case Q.DRAW_CHARS:const ft=w[1],be=w[2],mi=w[3],k=w[4];A=w[5];const se=w[6],ue=w[7],de=w[8];T=w[9];const Ce=w[10];b=w[11],I=w[12];const ot=[w[13],w[13]],Ot=this.textStates[I],vt=Ot.font,_i=[Ot.scale[0]*ue,Ot.scale[1]*ue];let pi;vt in this.widths_?pi=this.widths_[vt]:(pi={},this.widths_[vt]=pi);const _n=P_(u,ft,be,2),Qn=Math.abs(_i[0])*rl(vt,b,pi);if(k||Qn<=_n){const Ke=this.textStates[I].textAlign,bt=(_n-Qn)*In[Ke],Be=k_(u,ft,be,2,b,bt,se,Math.abs(_i[0]),rl,vt,pi,B?0:this.viewRotation_);e:if(Be){const Ue=[];let tt,Oi,Fi,He,at;if(T)for(tt=0,Oi=Be.length;tt<Oi;++tt){at=Be[tt],Fi=at[4],He=this.createLabel(Fi,I,"",T),g=at[2]+(_i[0]<0?-Ce:Ce),m=mi*He.height+(.5-mi)*2*Ce*_i[1]/_i[0]-de;const wt=this.calculateImageOrLabelDimensions_(He.width,He.height,at[0],at[1],He.width,He.height,g,m,0,0,at[3],ot,!1,Ti,!1,M);if(l&&l.collides(wt.declutterBox))break e;Ue.push([e,t,He,wt,1,null,null])}if(A)for(tt=0,Oi=Be.length;tt<Oi;++tt){at=Be[tt],Fi=at[4],He=this.createLabel(Fi,I,A,""),g=at[2],m=mi*He.height-de;const wt=this.calculateImageOrLabelDimensions_(He.width,He.height,at[0],at[1],He.width,He.height,g,m,0,0,at[3],ot,!1,Ti,!1,M);if(l&&l.collides(wt.declutterBox))break e;Ue.push([e,t,He,wt,1,null,null])}l&&l.load(Ue.map(Cl));for(let wt=0,ar=Ue.length;wt<ar;++wt)this.replayImageOrLabel_.apply(this,Ue[wt])}}++c;break;case Q.END_GEOMETRY:if(o!==void 0){M=w[1];const Ke=o(M,P);if(Ke)return Ke}++c;break;case Q.FILL:E?V++:this.fill_(e),++c;break;case Q.MOVE_TO_LINE_TO:for(h=w[1],f=w[2],H=u[h],L=u[h+1],_=H+.5|0,v=L+.5|0,(_!==p||v!==y)&&(e.moveTo(H,L),p=_,y=v),h+=2;h<f;h+=2)H=u[h],L=u[h+1],_=H+.5|0,v=L+.5|0,(h==f-2||_!==p||v!==y)&&(e.lineTo(H,L),p=_,y=v);++c;break;case Q.SET_FILL_STYLE:X=w,this.alignFill_=w[2],V&&(this.fill_(e),V=0,z&&(e.stroke(),z=0)),e.fillStyle=w[1],++c;break;case Q.SET_STROKE_STYLE:D=w,z&&(e.stroke(),z=0),this.setStrokeStyle_(e,w),++c;break;case Q.STROKE:E?z++:e.stroke(),++c;break;default:++c;break}}V&&this.fill_(e),z&&e.stroke()}execute(e,t,n,s,r,o){this.viewRotation_=s,this.execute_(e,t,n,this.instructions,r,void 0,void 0,o)}executeHitDetection(e,t,n,s,r){return this.viewRotation_=n,this.execute_(e,1,t,this.hitDetectionInstructions,!0,s,r)}}var B_=D_;const Or=["Polygon","Circle","LineString","Image","Text","Default"];class N_{constructor(e,t,n,s,r,o){this.maxExtent_=e,this.overlaps_=s,this.pixelRatio_=n,this.resolution_=t,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=zt(),this.createExecutors_(r)}clip(e,t){const n=this.getClipCoords(t);e.beginPath(),e.moveTo(n[0],n[1]),e.lineTo(n[2],n[3]),e.lineTo(n[4],n[5]),e.lineTo(n[6],n[7]),e.clip()}createExecutors_(e){for(const t in e){let n=this.executorsByZIndex_[t];n===void 0&&(n={},this.executorsByZIndex_[t]=n);const s=e[t];for(const r in s){const o=s[r];n[r]=new B_(this.resolution_,this.pixelRatio_,this.overlaps_,o)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const n=this.executorsByZIndex_[t];for(let s=0,r=e.length;s<r;++s)if(e[s]in n)return!0}return!1}forEachFeatureAtCoordinate(e,t,n,s,r,o){s=Math.round(s);const a=s*2+1,l=hi(this.hitDetectionTransform_,s+.5,s+.5,1/t,-1/t,-n,-e[0],-e[1]),u=!this.hitDetectionContext_;u&&(this.hitDetectionContext_=rt(a,a,void 0,{willReadFrequently:!0}));const c=this.hitDetectionContext_;c.canvas.width!==a||c.canvas.height!==a?(c.canvas.width=a,c.canvas.height=a):u||c.clearRect(0,0,a,a);let d;this.renderBuffer_!==void 0&&(d=Mt(),Rn(d,e),yo(d,t*(this.renderBuffer_+s),d));const h=V_(s);let f;function g(b,I){const T=c.getImageData(0,0,a,a).data;for(let A=0,V=h.length;A<V;A++)if(T[h[A]]>0){if(!o||f!=="Image"&&f!=="Text"||o.includes(b)){const z=(h[A]-3)/4,X=s-z%a,D=s-(z/a|0),Y=r(b,I,X*X+D*D);if(Y)return Y}c.clearRect(0,0,a,a);break}}const m=Object.keys(this.executorsByZIndex_).map(Number);m.sort(dn);let p,y,_,v,S;for(p=m.length-1;p>=0;--p){const b=m[p].toString();for(_=this.executorsByZIndex_[b],y=Or.length-1;y>=0;--y)if(f=Or[y],v=_[f],v!==void 0&&(S=v.executeHitDetection(c,l,n,g,d),S))return S}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const n=t[0],s=t[1],r=t[2],o=t[3],a=[n,s,n,o,r,o,r,s];return ki(a,0,8,2,e,a),a}isEmpty(){return kn(this.executorsByZIndex_)}execute(e,t,n,s,r,o,a){const l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(dn),this.maxExtent_&&(e.save(),this.clip(e,n)),o=o||Or;let u,c,d,h,f,g;for(a&&l.reverse(),u=0,c=l.length;u<c;++u){const m=l[u].toString();for(f=this.executorsByZIndex_[m],d=0,h=o.length;d<h;++d){const p=o[d];g=f[p],g!==void 0&&g.execute(e,t,n,s,r,a)}}this.maxExtent_&&e.restore()}}const Fr={};function V_(i){if(Fr[i]!==void 0)return Fr[i];const e=i*2+1,t=i*i,n=new Array(t+1);for(let r=0;r<=i;++r)for(let o=0;o<=i;++o){const a=r*r+o*o;if(a>t)break;let l=n[a];l||(l=[],n[a]=l),l.push(((i+r)*e+(i+o))*4+3),r>0&&l.push(((i-r)*e+(i+o))*4+3),o>0&&(l.push(((i+r)*e+(i-o))*4+3),r>0&&l.push(((i-r)*e+(i-o))*4+3))}const s=[];for(let r=0,o=n.length;r<o;++r)n[r]&&s.push(...n[r]);return Fr[i]=s,s}var bl=N_;class q_ extends gc{constructor(e,t,n,s,r,o,a){super(),this.context_=e,this.pixelRatio_=t,this.extent_=n,this.transform_=s,this.transformRotation_=s?So(Math.atan2(s[1],s[0]),10):0,this.viewRotation_=r,this.squaredTolerance_=o,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=zt()}drawImages_(e,t,n,s){if(!this.image_)return;const r=ki(e,t,n,s,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,l=o.globalAlpha;this.imageOpacity_!=1&&(o.globalAlpha=l*this.imageOpacity_);let u=this.imageRotation_;this.transformRotation_===0&&(u-=this.viewRotation_),this.imageRotateWithView_&&(u+=this.viewRotation_);for(let c=0,d=r.length;c<d;c+=2){const h=r[c]-this.imageAnchorX_,f=r[c+1]-this.imageAnchorY_;if(u!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const g=h+this.imageAnchorX_,m=f+this.imageAnchorY_;hi(a,g,m,1,1,u,-g,-m),o.setTransform.apply(o,a),o.translate(g,m),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.setTransform(1,0,0,1,0,0)}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,h,f,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(o.globalAlpha=l)}drawText_(e,t,n,s){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const r=ki(e,t,n,s,this.transform_,this.pixelCoordinates_),o=this.context_;let a=this.textRotation_;for(this.transformRotation_===0&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);t<n;t+=s){const l=r[t]+this.textOffsetX_,u=r[t+1]+this.textOffsetY_;a!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(o.translate(l-this.textOffsetX_,u-this.textOffsetY_),o.rotate(a),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.setTransform(1,0,0,1,0,0)):(this.textStrokeState_&&o.strokeText(this.text_,l,u),this.textFillState_&&o.fillText(this.text_,l,u))}}moveToLineTo_(e,t,n,s,r){const o=this.context_,a=ki(e,t,n,s,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);let l=a.length;r&&(l-=2);for(let u=2;u<l;u+=2)o.lineTo(a[u],a[u+1]);return r&&o.closePath(),n}drawRings_(e,t,n,s){for(let r=0,o=n.length;r<o;++r)t=this.moveToLineTo_(e,t,n[r],s,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ct(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=Tf(e,this.transform_,this.pixelCoordinates_),n=t[2]-t[0],s=t[3]-t[1],r=Math.sqrt(n*n+s*s),o=this.context_;o.beginPath(),o.arc(t[0],t[1],r,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const n=t.getGeometryFunction()(e);!n||(this.setStyle(t),this.drawGeometry(n))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let n=0,s=t.length;n<s;++n)this.drawGeometry(t[n])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),n=e.getStride();this.image_&&this.drawImages_(t,0,t.length,n),this.text_!==""&&this.drawText_(t,0,t.length,n)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),n=e.getStride();this.image_&&this.drawImages_(t,0,t.length,n),this.text_!==""&&this.drawText_(t,0,t.length,n)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ct(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,n=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(n,0,n.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(!!ct(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const n=this.context_,s=e.getFlatCoordinates();let r=0;const o=e.getEnds(),a=e.getStride();n.beginPath();for(let l=0,u=o.length;l<u;++l)r=this.moveToLineTo_(s,r,o[l],a,!1);n.stroke()}if(this.text_!==""){const n=e.getFlatMidpoints();this.drawText_(n,0,n.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ct(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ct(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,n=e.getOrientedFlatCoordinates();let s=0;const r=e.getEndss(),o=e.getStride();t.beginPath();for(let a=0,l=r.length;a<l;++a){const u=r[a];s=this.drawRings_(n,s,u,o)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,n=this.contextFillState_;n?n.fillStyle!=e.fillStyle&&(n.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,n=this.contextStrokeState_;n?(n.lineCap!=e.lineCap&&(n.lineCap=e.lineCap,t.lineCap=e.lineCap),gi(n.lineDash,e.lineDash)||t.setLineDash(n.lineDash=e.lineDash),n.lineDashOffset!=e.lineDashOffset&&(n.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),n.lineJoin!=e.lineJoin&&(n.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),n.lineWidth!=e.lineWidth&&(n.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),n.miterLimit!=e.miterLimit&&(n.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),n.strokeStyle!=e.strokeStyle&&(n.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,n=this.contextTextState_,s=e.textAlign?e.textAlign:qn;n?(n.font!=e.font&&(n.font=e.font,t.font=e.font),n.textAlign!=s&&(n.textAlign=s,t.textAlign=s),n.textBaseline!=e.textBaseline&&(n.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=s,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:s,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const n=e.getColor();this.fillState_={fillStyle:Vt(n||Zt)}}if(!t)this.strokeState_=null;else{const n=t.getColor(),s=t.getLineCap(),r=t.getLineDash(),o=t.getLineDashOffset(),a=t.getLineJoin(),l=t.getWidth(),u=t.getMiterLimit(),c=r||Dn;this.strokeState_={lineCap:s!==void 0?s:Vs,lineDash:this.pixelRatio_===1?c:c.map(d=>d*this.pixelRatio_),lineDashOffset:(o||Bn)*this.pixelRatio_,lineJoin:a!==void 0?a:gn,lineWidth:(l!==void 0?l:zn)*this.pixelRatio_,miterLimit:u!==void 0?u:Nn,strokeStyle:Vt(n||Vn)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const n=e.getPixelRatio(this.pixelRatio_),s=e.getAnchor(),r=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=s[0]*n,this.imageAnchorY_=s[1]*n,this.imageHeight_=t[1]*n,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=r[0],this.imageOriginY_=r[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const o=e.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/n,o[1]*this.pixelRatio_/n],this.imageWidth_=t[0]*n}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const f=t.getColor();this.textFillState_={fillStyle:Vt(f||Zt)}}const n=e.getStroke();if(!n)this.textStrokeState_=null;else{const f=n.getColor(),g=n.getLineCap(),m=n.getLineDash(),p=n.getLineDashOffset(),y=n.getLineJoin(),_=n.getWidth(),v=n.getMiterLimit();this.textStrokeState_={lineCap:g!==void 0?g:Vs,lineDash:m||Dn,lineDashOffset:p||Bn,lineJoin:y!==void 0?y:gn,lineWidth:_!==void 0?_:zn,miterLimit:v!==void 0?v:Nn,strokeStyle:Vt(f||Vn)}}const s=e.getFont(),r=e.getOffsetX(),o=e.getOffsetY(),a=e.getRotateWithView(),l=e.getRotation(),u=e.getScaleArray(),c=e.getText(),d=e.getTextAlign(),h=e.getTextBaseline();this.textState_={font:s!==void 0?s:Wu,textAlign:d!==void 0?d:qn,textBaseline:h!==void 0?h:qs},this.text_=c!==void 0?Array.isArray(c)?c.reduce((f,g,m)=>f+=m%2?" ":g,""):c:"",this.textOffsetX_=r!==void 0?this.pixelRatio_*r:0,this.textOffsetY_=o!==void 0?this.pixelRatio_*o:0,this.textRotateWithView_=a!==void 0?a:!1,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*u[0],this.pixelRatio_*u[1]]}}}var z_=q_;const Bt=.5;function G_(i,e,t,n,s,r,o){const a=i[0]*Bt,l=i[1]*Bt,u=rt(a,l);u.imageSmoothingEnabled=!1;const c=u.canvas,d=new z_(u,Bt,s,null,o),h=t.length,f=Math.floor((256*256*256-1)/h),g={};for(let p=1;p<=h;++p){const y=t[p-1],_=y.getStyleFunction()||n;if(!n)continue;let v=_(y,r);if(!v)continue;Array.isArray(v)||(v=[v]);const b=(p*f).toString(16).padStart(7,"#00000");for(let I=0,T=v.length;I<T;++I){const A=v[I],V=A.getGeometryFunction()(y);if(!V||!ct(s,V.getExtent()))continue;const z=A.clone(),X=z.getFill();X&&X.setColor(b);const D=z.getStroke();D&&(D.setColor(b),D.setLineDash(null)),z.setText(void 0);const Y=A.getImage();if(Y&&Y.getOpacity()!==0){const E=Y.getImageSize();if(!E)continue;const M=rt(E[0],E[1],void 0,{alpha:!1}),H=M.canvas;M.fillStyle=b,M.fillRect(0,0,H.width,H.height),z.setImage(new Ko({img:H,imgSize:E,anchor:Y.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:Y.getOrigin(),opacity:1,size:Y.getSize(),scale:Y.getScale(),rotation:Y.getRotation(),rotateWithView:Y.getRotateWithView()}))}const ie=z.getZIndex()||0;let B=g[ie];B||(B={},g[ie]=B,B.Polygon=[],B.Circle=[],B.LineString=[],B.Point=[]);const q=V.getType();if(q==="GeometryCollection"){const E=V.getGeometriesArrayRecursive();for(let M=0,H=E.length;M<H;++M){const L=E[M];B[L.getType().replace("Multi","")].push(L,z)}}else B[q.replace("Multi","")].push(V,z)}}const m=Object.keys(g).map(Number).sort(dn);for(let p=0,y=m.length;p<y;++p){const _=g[m[p]];for(const v in _){const S=_[v];for(let b=0,I=S.length;b<I;b+=2){d.setStyle(S[b+1]);for(let T=0,A=e.length;T<A;++T)d.setTransform(e[T]),d.drawGeometry(S[b])}}}return u.getImageData(0,0,c.width,c.height)}function W_(i,e,t){const n=[];if(t){const s=Math.floor(Math.round(i[0])*Bt),r=Math.floor(Math.round(i[1])*Bt),o=(Me(s,0,t.width-1)+Me(r,0,t.height-1)*t.width)*4,a=t.data[o],l=t.data[o+1],c=t.data[o+2]+256*(l+256*a),d=Math.floor((256*256*256-1)/e.length);c&&c%d===0&&n.push(e[c/d-1])}return n}const X_=.5,mc={Point:Q_,LineString:H_,Polygon:tp,MultiPoint:ep,MultiLineString:Z_,MultiPolygon:J_,GeometryCollection:U_,Circle:$_};function j_(i,e){return parseInt(ce(i),10)-parseInt(ce(e),10)}function Y_(i,e){const t=io(i,e);return t*t}function io(i,e){return X_*i/e}function $_(i,e,t,n,s){const r=t.getFill(),o=t.getStroke();if(r||o){const l=i.getBuilder(t.getZIndex(),"Circle");l.setFillStrokeStyle(r,o),l.drawCircle(e,n)}const a=t.getText();if(a&&a.getText()){const l=(s||i).getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,n)}}function wl(i,e,t,n,s,r,o){let a=!1;const l=t.getImage();if(l){const u=l.getImageState();u==Le.LOADED||u==Le.ERROR?l.unlistenImageChange(s):(u==Le.IDLE&&l.load(),l.listenImageChange(s),a=!0)}return K_(i,e,t,n,r,o),a}function K_(i,e,t,n,s,r){const o=t.getGeometryFunction()(e);if(!o)return;const a=o.simplifyTransformed(n,s);if(t.getRenderer())_c(i,a,t,e);else{const u=mc[a.getType()];u(i,a,t,e,r)}}function _c(i,e,t,n){if(e.getType()=="GeometryCollection"){const r=e.getGeometries();for(let o=0,a=r.length;o<a;++o)_c(i,r[o],t,n);return}i.getBuilder(t.getZIndex(),"Default").drawCustom(e,n,t.getRenderer(),t.getHitDetectionRenderer())}function U_(i,e,t,n,s){const r=e.getGeometriesArray();let o,a;for(o=0,a=r.length;o<a;++o){const l=mc[r[o].getType()];l(i,r[o],t,n,s)}}function H_(i,e,t,n,s){const r=t.getStroke();if(r){const a=i.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,r),a.drawLineString(e,n)}const o=t.getText();if(o&&o.getText()){const a=(s||i).getBuilder(t.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,n)}}function Z_(i,e,t,n,s){const r=t.getStroke();if(r){const a=i.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,r),a.drawMultiLineString(e,n)}const o=t.getText();if(o&&o.getText()){const a=(s||i).getBuilder(t.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,n)}}function J_(i,e,t,n,s){const r=t.getFill(),o=t.getStroke();if(o||r){const l=i.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(r,o),l.drawMultiPolygon(e,n)}const a=t.getText();if(a&&a.getText()){const l=(s||i).getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,n)}}function Q_(i,e,t,n,s){const r=t.getImage(),o=t.getText();let a;if(r){if(r.getImageState()!=Le.LOADED)return;let l=i;if(s){const c=r.getDeclutterMode();if(c!=="none")if(l=s,c==="obstacle"){const d=i.getBuilder(t.getZIndex(),"Image");d.setImageStyle(r,a),d.drawPoint(e,n)}else o&&o.getText()&&(a={})}const u=l.getBuilder(t.getZIndex(),"Image");u.setImageStyle(r,a),u.drawPoint(e,n)}if(o&&o.getText()){let l=i;s&&(l=s);const u=l.getBuilder(t.getZIndex(),"Text");u.setTextStyle(o,a),u.drawText(e,n)}}function ep(i,e,t,n,s){const r=t.getImage(),o=t.getText();let a;if(r){if(r.getImageState()!=Le.LOADED)return;let l=i;if(s){const c=r.getDeclutterMode();if(c!=="none")if(l=s,c==="obstacle"){const d=i.getBuilder(t.getZIndex(),"Image");d.setImageStyle(r,a),d.drawMultiPoint(e,n)}else o&&o.getText()&&(a={})}const u=l.getBuilder(t.getZIndex(),"Image");u.setImageStyle(r,a),u.drawMultiPoint(e,n)}if(o&&o.getText()){let l=i;s&&(l=s);const u=l.getBuilder(t.getZIndex(),"Text");u.setTextStyle(o,a),u.drawText(e,n)}}function tp(i,e,t,n,s){const r=t.getFill(),o=t.getStroke();if(r||o){const l=i.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(r,o),l.drawPolygon(e,n)}const a=t.getText();if(a&&a.getText()){const l=(s||i).getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,n)}}class ip extends lc{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Mt(),this.wrappedRenderedExtent_=Mt(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(e,t,n){const s=t.extent,r=t.viewState,o=r.center,a=r.resolution,l=r.projection,u=r.rotation,c=l.getExtent(),d=this.getLayer().getSource(),h=t.pixelRatio,f=t.viewHints,g=!(f[Je.ANIMATING]||f[Je.INTERACTING]),m=this.compositionContext_,p=Math.round(t.size[0]*h),y=Math.round(t.size[1]*h),_=d.getWrapX()&&l.canWrapX(),v=_?ve(c):null,S=_?Math.ceil((s[2]-c[2])/v)+1:1;let b=_?Math.floor((s[0]-c[0])/v):0;do{const I=this.getRenderTransform(o,a,u,h,p,y,b*v);e.execute(m,1,I,u,g,void 0,n)}while(++b<S)}setupCompositionContext_(){if(this.opacity_!==1){const e=rt(this.context.canvas.width,this.context.canvas.height,fl);this.compositionContext_=e}else this.compositionContext_=this.context}releaseCompositionContext_(){if(this.opacity_!==1){const e=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=e,nr(this.compositionContext_),fl.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(e){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,e,e.declutterTree),this.releaseCompositionContext_())}renderFrame(e,t){const n=e.pixelRatio,s=e.layerStatesArray[e.layerIndex];Th(this.pixelTransform,1/n,1/n),vo(this.inversePixelTransform,this.pixelTransform);const r=hu(this.pixelTransform);this.useContainer(t,r,this.getBackground(e));const o=this.context,a=o.canvas,l=this.replayGroup_,u=this.declutterExecutorGroup;if((!l||l.isEmpty())&&(!u||u.isEmpty()))return null;const c=Math.round(e.size[0]*n),d=Math.round(e.size[1]*n);a.width!=c||a.height!=d?(a.width=c,a.height=d,a.style.transform!==r&&(a.style.transform=r)):this.containerReused||o.clearRect(0,0,c,d),this.preRender(o,e);const h=e.viewState;h.projection,this.opacity_=s.opacity,this.setupCompositionContext_();let f=!1,g=!0;if(s.extent&&this.clipping){const m=wi(s.extent);g=ct(m,e.extent),f=g&&!Zi(m,e.extent),f&&this.clipUnrotated(this.compositionContext_,e,m)}return g&&this.renderWorlds(l,e),f&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(o,e),this.renderedRotation_!==h.rotation&&(this.renderedRotation_=h.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(e){return new Promise(t=>{if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const n=[this.context.canvas.width,this.context.canvas.height];Ve(this.pixelTransform,n);const s=this.renderedCenter_,r=this.renderedResolution_,o=this.renderedRotation_,a=this.renderedProjection_,l=this.wrappedRenderedExtent_,u=this.getLayer(),c=[],d=n[0]*Bt,h=n[1]*Bt;c.push(this.getRenderTransform(s,r,o,Bt,d,h,0).slice());const f=u.getSource(),g=a.getExtent();if(f.getWrapX()&&a.canWrapX()&&!Zi(g,l)){let m=l[0];const p=ve(g);let y=0,_;for(;m<g[0];)--y,_=p*y,c.push(this.getRenderTransform(s,r,o,Bt,d,h,_).slice()),m+=p;for(y=0,m=l[2];m>g[2];)++y,_=p*y,c.push(this.getRenderTransform(s,r,o,Bt,d,h,_).slice()),m-=p}this.hitDetectionImageData_=G_(n,c,this.renderedFeatures_,u.getStyleFunction(),l,r,o)}t(W_(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,n,s,r){if(!this.replayGroup_)return;const o=t.viewState.resolution,a=t.viewState.rotation,l=this.getLayer(),u={},c=function(f,g,m){const p=ce(f),y=u[p];if(y){if(y!==!0&&m<y.distanceSq){if(m===0)return u[p]=!0,r.splice(r.lastIndexOf(y),1),s(f,l,g);y.geometry=g,y.distanceSq=m}}else{if(m===0)return u[p]=!0,s(f,l,g);r.push(u[p]={feature:f,layer:l,geometry:g,distanceSq:m,callback:s})}};let d;const h=[this.replayGroup_];return this.declutterExecutorGroup&&h.push(this.declutterExecutorGroup),h.some(f=>d=f.forEachFeatureAtCoordinate(e,o,a,n,c,f===this.declutterExecutorGroup&&t.declutterTree?t.declutterTree.all().map(g=>g.value):null)),d}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),n=t.getSource();if(!n)return!1;const s=e.viewHints[Je.ANIMATING],r=e.viewHints[Je.INTERACTING],o=t.getUpdateWhileAnimating(),a=t.getUpdateWhileInteracting();if(this.ready&&!o&&s||!a&&r)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const l=e.extent,u=e.viewState,c=u.projection,d=u.resolution,h=e.pixelRatio,f=t.getRevision(),g=t.getRenderBuffer();let m=t.getRenderOrder();m===void 0&&(m=j_);const p=u.center.slice(),y=yo(l,g*d),_=y.slice(),v=[y.slice()],S=c.getExtent();if(n.getWrapX()&&c.canWrapX()&&!Zi(S,e.extent)){const B=ve(S),q=Math.max(ve(y)/2,B);y[0]=S[0]-q,y[2]=S[2]+q,Eu(p,c);const E=vu(v[0],c);E[0]<S[0]&&E[2]<S[2]?v.push([E[0]+B,E[1],E[2]+B,E[3]]):E[0]>S[0]&&E[2]>S[2]&&v.push([E[0]-B,E[1],E[2]-B,E[3]])}if(this.ready&&this.renderedResolution_==d&&this.renderedRevision_==f&&this.renderedRenderOrder_==m&&Zi(this.wrappedRenderedExtent_,y))return gi(this.renderedExtent_,_)||(this.hitDetectionImageData_=null,this.renderedExtent_=_),this.renderedCenter_=p,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const b=new Sl(io(d,h),y,d,h);let I;this.getLayer().getDeclutter()&&(I=new Sl(io(d,h),y,d,h));let T;for(let B=0,q=v.length;B<q;++B)n.loadFeatures(v[B],d,c);const A=Y_(d,h);let V=!0;const z=B=>{let q;const E=B.getStyleFunction()||t.getStyleFunction();if(E&&(q=E(B,d)),q){const M=this.renderFeature(B,A,q,b,T,I);V=V&&!M}},X=Lu(y),D=n.getFeaturesInExtent(X);m&&D.sort(m);for(let B=0,q=D.length;B<q;++B)z(D[B]);this.renderedFeatures_=D,this.ready=V;const Y=b.finish(),ie=new bl(y,d,h,n.getOverlaps(),Y,t.getRenderBuffer());return I&&(this.declutterExecutorGroup=new bl(y,d,h,n.getOverlaps(),I.finish(),t.getRenderBuffer())),this.renderedResolution_=d,this.renderedRevision_=f,this.renderedRenderOrder_=m,this.renderedExtent_=_,this.wrappedRenderedExtent_=y,this.renderedCenter_=p,this.renderedProjection_=c,this.replayGroup_=ie,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,n,s,r,o){if(!n)return!1;let a=!1;if(Array.isArray(n))for(let l=0,u=n.length;l<u;++l)a=wl(s,e,n[l],t,this.boundHandleStyleImageChange_,r,o)||a;else a=wl(s,e,n,t,this.boundHandleStyleImageChange_,r,o);return a}}var np=ip;class sp extends y_{constructor(e){super(e)}createRenderer(){return new np(this)}}var rp=sp;class op{constructor(e){this.rbush_=new cc(e),this.items_={}}insert(e,t){const n={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(n),this.items_[ce(t)]=n}load(e,t){const n=new Array(t.length);for(let s=0,r=t.length;s<r;s++){const o=e[s],a=t[s],l={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};n[s]=l,this.items_[ce(a)]=l}this.rbush_.load(n)}remove(e){const t=ce(e),n=this.items_[t];return delete this.items_[t],this.rbush_.remove(n)!==null}update(e,t){const n=this.items_[ce(t)],s=[n.minX,n.minY,n.maxX,n.maxY];Pn(s,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(s){return s.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let n;for(let s=0,r=e.length;s<r;s++)if(n=t(e[s]),n)return n;return n}isEmpty(){return kn(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return fi(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}var Rl=op,Tt={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function ap(i,e){return[[-1/0,-1/0,1/0,1/0]]}let lp=!1;function up(i,e,t,n,s,r,o){const a=new XMLHttpRequest;a.open("GET",typeof i=="function"?i(t,n,s):i,!0),e.getType()=="arraybuffer"&&(a.responseType="arraybuffer"),a.withCredentials=lp,a.onload=function(l){if(!a.status||a.status>=200&&a.status<300){const u=e.getType();let c;u=="json"||u=="text"?c=a.responseText:u=="xml"?(c=a.responseXML,c||(c=new DOMParser().parseFromString(a.responseText,"application/xml"))):u=="arraybuffer"&&(c=a.response),c?r(e.readFeatures(c,{extent:t,featureProjection:s}),e.readProjection(c)):o()}else o()},a.onerror=o,a.send()}function Tl(i,e){return function(t,n,s,r,o){const a=this;up(i,e,t,n,s,function(l,u){a.addFeatures(l),r!==void 0&&r(l)},o||hn)}}class si extends Jt{constructor(e,t,n){super(e),this.feature=t,this.features=n}}class cp extends ic{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=hn,this.format_=e.format,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(oe(this.format_,7),this.loader_=Tl(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:ap;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new Rl:null,this.loadedExtentsRtree_=new Rl,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let n,s;Array.isArray(e.features)?s=e.features:e.features&&(n=e.features,s=n.getArray()),!t&&n===void 0&&(n=new Nt(s)),s!==void 0&&this.addFeaturesInternal(s),n!==void 0&&this.bindFeaturesCollection_(n)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=ce(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const n=e.getGeometry();if(n){const s=n.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(s,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new si(Tt.ADDFEATURE,e))}setupChangeEvents_(e,t){this.featureChangeKeys_[e]=[le(t,re.CHANGE,this.handleFeatureChange_,this),le(t,cn.PROPERTYCHANGE,this.handleFeatureChange_,this)]}addToIndex_(e,t){let n=!0;const s=t.getId();return s!==void 0&&(s.toString()in this.idIndex_?n=!1:this.idIndex_[s.toString()]=t),n&&(oe(!(e in this.uidIndex_),30),this.uidIndex_[e]=t),n}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],n=[],s=[];for(let r=0,o=e.length;r<o;r++){const a=e[r],l=ce(a);this.addToIndex_(l,a)&&n.push(a)}for(let r=0,o=n.length;r<o;r++){const a=n[r],l=ce(a);this.setupChangeEvents_(l,a);const u=a.getGeometry();if(u){const c=u.getExtent();t.push(c),s.push(a)}else this.nullGeometryFeatures_[l]=a}if(this.featuresRtree_&&this.featuresRtree_.load(t,s),this.hasListener(Tt.ADDFEATURE))for(let r=0,o=n.length;r<o;r++)this.dispatchEvent(new si(Tt.ADDFEATURE,n[r]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(Tt.ADDFEATURE,function(n){t||(t=!0,e.push(n.feature),t=!1)}),this.addEventListener(Tt.REMOVEFEATURE,function(n){t||(t=!0,e.remove(n.feature),t=!1)}),e.addEventListener(ut.ADD,n=>{t||(t=!0,this.addFeature(n.element),t=!1)}),e.addEventListener(ut.REMOVE,n=>{t||(t=!0,this.removeFeature(n.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const n in this.featureChangeKeys_)this.featureChangeKeys_[n].forEach(xe);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const n=s=>{this.removeFeatureInternal(s)};this.featuresRtree_.forEach(n);for(const s in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[s])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new si(Tt.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const n=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(n,function(s){if(s.getGeometry().intersectsCoordinate(e))return t(s)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(n){if(n.getGeometry().intersectsExtent(e)){const r=t(n);if(r)return r}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),kn(this.nullGeometryFeatures_)||au(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(n){t.push(n)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const s=Dh(e,t);return[].concat(...s.map(r=>this.featuresRtree_.getInExtent(r)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const n=e[0],s=e[1];let r=null;const o=[NaN,NaN];let a=1/0;const l=[-1/0,-1/0,1/0,1/0];return t=t||Mn,this.featuresRtree_.forEachInExtent(l,function(u){if(t(u)){const c=u.getGeometry(),d=a;if(a=c.closestPointXY(n,s,o,a),a<d){r=u;const h=Math.sqrt(a);l[0]=n-h,l[1]=s-h,l[2]=n+h,l[3]=s+h}}}),r}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,n=ce(t),s=t.getGeometry();if(!s)n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[n]=t);else{const o=s.getExtent();n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(o,t)):this.featuresRtree_&&this.featuresRtree_.update(o,t)}const r=t.getId();if(r!==void 0){const o=r.toString();this.idIndex_[o]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[o]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[n]=t;this.changed(),this.dispatchEvent(new si(Tt.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:ce(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&kn(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,n){const s=this.loadedExtentsRtree_,r=this.strategy_(e,t,n);for(let o=0,a=r.length;o<a;++o){const l=r[o];s.forEachInExtent(l,function(c){return Zi(c.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new si(Tt.FEATURESLOADSTART)),this.loader_.call(this,l,t,n,c=>{--this.loadingExtentsCount_,this.dispatchEvent(new si(Tt.FEATURESLOADEND,void 0,c))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new si(Tt.FEATURESLOADERROR))}),s.insert(l,{extent:l.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_;let n;t.forEachInExtent(e,function(s){if(Pn(s.extent,e))return n=s,!0}),n&&t.remove(n)}removeFeature(e){if(!e)return;const t=ce(e);t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=ce(e),n=this.featureChangeKeys_[t];if(!n)return;n.forEach(xe),delete this.featureChangeKeys_[t];const s=e.getId();return s!==void 0&&delete this.idIndex_[s.toString()],delete this.uidIndex_[t],this.dispatchEvent(new si(Tt.REMOVEFEATURE,e)),e}removeFromIdIndex_(e){let t=!1;for(const n in this.idIndex_)if(this.idIndex_[n]===e){delete this.idIndex_[n],t=!0;break}return t}setLoader(e){this.loader_=e}setUrl(e){oe(this.format_,7),this.url_=e,this.setLoader(Tl(e,this.format_))}}var dp=cp;class Ho extends Wt{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new Ho(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const n=this.getStyle();return n&&e.setStyle(n),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(xe(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=le(e,re.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?hp(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function hp(i){if(typeof i=="function")return i;let e;return Array.isArray(i)?e=i:(oe(typeof i.getZIndex=="function",41),e=[i]),function(){return e}}var fp=Ho;const gp={"0780246U":{id:"0780246U",type:"DANE EAFC",name:"DANE - EAFC",dep:"78",address:"10, rue Thibault",city:"Marly-le-Roi",conventioned:!1,external_food:!1,external_food_comment:"",food_space:!0,food_space_comment:"Salle de restauration partag\xE9e",internal_food:!1,internal_parking:1,public_transport:"SNCF ligne L Gare de Marly-le Roi (500 m)",longitude:2.090754,latitude:48.8704712,hidden:!1},"0781949V":{id:"0781949V",type:"Etablissement scolaire",name:"Lyc\xE9e de Villaroy",dep:"78",address:"2, rue Eug\xE8ne Viollet-le-Duc, 78041",city:"Guyancourt",conventioned:!0,external_food:!0,external_food_comment:"restauration rapide, boulangerie \xE0 proximit\xE9",food_space:!0,food_space_comment:"NON (Tables de pique-nique aux beaux jours)",internal_food:!0,internal_parking:1,public_transport:"Gare de St Quentin puis Bus 10mn",longitude:2.068280192,latitude:48.76466382,hidden:!1},"0783140P":{id:"0783140P",type:"Etablissement scolaire",name:"Lyc\xE9e J. Hardouin-Mansart",dep:"78",address:"26 rue Victorien Sardou, 78210",city:"Saint Cyr l'\xE9cole",conventioned:!1,external_food:!0,external_food_comment:"nombreuses possibilit\xE9s aux alentours",food_space:!0,food_space_comment:"OUI (possible en petite salle des profs) ",internal_food:!0,internal_parking:1,public_transport:"gare de ST Cyr l'\xE9cole 10 \xE0 15 mn \xE0 pieds",longitude:2.065227782,latitude:48.80356154,hidden:!1},"0782549X":{id:"0782549X",type:"Etablissement scolaire",name:"Lyc\xE9e Louis Bascan",dep:"78",address:"5, avenue du G\xE9n\xE9ral Leclerc, 78513",city:"Rambouillet",conventioned:!1,external_food:!0,external_food_comment:"",food_space:!0,food_space_comment:"OUI dans salle des commensaux",internal_food:!0,internal_parking:1,public_transport:"gare \xE0 5 mn \xE0 pieds",longitude:1.824600647,latitude:48.64098699,hidden:!1},"0911913K":{id:"0911913K",type:"Etablissement scolaire",name:"Lyc\xE9e de la vall\xE9e de Chevreuse",dep:"91",address:"8, rue de Madrid, 91192",city:"Gif-sur-Yvette",conventioned:!0,external_food:!0,external_food_comment:"supermarch\xE9 et boulangerie \xE0 proximit\xE9",food_space:!0,food_space_comment:"OUI, dans la caf\xE9t\xE9ria du personnel",internal_food:!0,internal_parking:0,public_transport:'RER en face arr\xEAt "Courcelles sur Yvette"',longitude:2.097240133,latitude:48.70030641,hidden:!1},"0910622G":{id:"0910622G",type:"Etablissement scolaire",name:"Lyc\xE9e Geoffroy de saint Hilaire",dep:"91",address:"4 Avenue Geoffroy Saint-Hilaire, 91150",city:"Etampes",conventioned:!1,external_food:!0,external_food_comment:"",food_space:!0,food_space_comment:"OUI (tol\xE9r\xE9 pour d\xE9jeuner en salle polyvalente)",internal_food:!0,internal_parking:1,public_transport:"RER C \xE0 10 mn \xE0 pieds",longitude:2.15021022,latitude:48.4357569,hidden:!1},"0910627M":{id:"0910627M",type:"Etablissement scolaire",name:"Lyc\xE9e Jean-Baptiste Corot",dep:"91",address:"9 place Davout, 91605",city:"Savigny sur Orge",conventioned:!0,external_food:!0,external_food_comment:"",food_space:!0,food_space_comment:"OUI",internal_food:!0,internal_parking:2,public_transport:"RER C en face du lyc\xE9e",longitude:2.3562781,latitude:48.6737091,hidden:!1},"0911251R":{id:"0911251R",type:"Etablissement scolaire",name:"Lyc\xE9e Parc des Loges",dep:"91",address:"1, Boulevard des Champs-Elys\xE9es, 91000",city:"Evry",conventioned:!1,external_food:!0,external_food_comment:"",food_space:!0,food_space_comment:"OUI (salle piano)",internal_food:!0,internal_parking:1,public_transport:"15 mn en bus gare d'Evry-Courcouronnes",longitude:2.423238745,latitude:48.63671033,hidden:!1},"0921230M":{id:"0921230M",type:"Etablissement scolaire",name:"Lyc\xE9e L\xE9onard de Vinci",dep:"92",address:"4 Av Georges Pompidou, 92304",city:"Levallois Perret",conventioned:!0,external_food:!0,external_food_comment:"",food_space:!0,food_space_comment:"OUI (possible en Caf\xE9t\xE9ria) ",internal_food:!1,internal_parking:1,public_transport:'M\xE9tro 3 "pont de Levallois-B\xE9con"',longitude:2.27886844,latitude:48.89708154,hidden:!1},"0922149I":{id:"0922149I",type:"Etablissement scolaire",name:"Lyc\xE9eRen\xE9 Auffray",dep:"92",address:"23 rue Fernand Pelloutier, 92110",city:"Clichy sur seine",conventioned:!1,external_food:!0,external_food_comment:"",food_space:!0,food_space_comment:"OUI",internal_food:!0,internal_parking:1,public_transport:'M\xE9tro 13 "Mairie de Clichy", RER C "Porte de Clichy" puis bus',longitude:2.300371647,latitude:48.9029541,hidden:!1},"0920149M":{id:"0920149M",type:"Etablissement scolaire",name:"Lyc\xE9e Michelet",dep:"92",address:"7, rue Jullien, 92174",city:"Vanves",conventioned:!0,external_food:!0,external_food_comment:"",food_space:!1,food_space_comment:"",internal_food:!0,internal_parking:1,public_transport:"Ligne 12, 13 et T2 \xE0 9 mn \xE0 pieds",longitude:2.28673996,latitude:48.8238903,hidden:!1},"0922801V":{id:"0922801V",type:"Etablissement scolaire",name:"Lyc\xE9e Simone Veil",dep:"92",address:"Traverse Jules Guesde, 92100",city:"Boulogne Billancourt",conventioned:!0,external_food:!0,external_food_comment:"",food_space:!1,food_space_comment:"",internal_food:!1,internal_parking:1,public_transport:"M\xE9tro et bus",longitude:2.241565476,latitude:48.82688703,hidden:!1},"0951104J":{id:"0951104J",type:"Etablissement scolaire",name:"Lyc\xE9e Jean Perrin",dep:"95",address:"2, rue des Egalisses, 92310",city:"St Ouen l'Aum\xF4ne",conventioned:!0,external_food:!0,external_food_comment:"",food_space:!0,food_space_comment:"? A DEFINIR",internal_food:!0,internal_parking:1,public_transport:"ligne H gare du Nord ou RER C gare de ST Ouen l'Aum\xF4ne puis bus",longitude:2.130689437,latitude:49.05654337,hidden:!1},"0950666H":{id:"0950666H",type:"Etablissement scolaire",name:"Lyc\xE9eGeorges Braque",dep:"95",address:"21 rue Victor Puiseux, 95100",city:"Argenteuil",conventioned:!1,external_food:!0,external_food_comment:"rue commer\xE7ante proche",food_space:!0,food_space_comment:"OUI dans zone balis\xE9e \xE0 la cantine (pas de nourriture ext\xE9rieure)",internal_food:!0,internal_parking:1,public_transport:"gare d'Argenteuil ligne J \xE0 12 mn de Paris St Lazare + 10 mn \xE0 pieds",longitude:2.2507113,latitude:48.95048251,hidden:!1},"0950657Y":{id:"0950657Y",type:"Etablissement scolaire",name:"Lyc\xE9e Ferdinand Buisson",dep:"95",address:"245 rue Ferdinand Buisson, 95120",city:"Ermont",conventioned:!1,external_food:!0,external_food_comment:"",food_space:!0,food_space_comment:"OUI dans r\xE9fectoire des personnels",internal_food:!0,internal_parking:1,public_transport:"gare d'Ermont-Eaubonne, ligne H gare du Nord, ligne J gare St Lazare, RER C",longitude:2.272145987,latitude:48.97886658,hidden:!1},"0950723V":{id:"0950723V",type:"Etablissement scolaire",name:"Coll\xE8ge Jean Lur\xE7at",dep:"95",address:"37 rue Marius Delpech ",city:"Sarcelles",conventioned:!1,external_food:!0,external_food_comment:"entre commercial proche",food_space:!0,food_space_comment:"OUI, salle des commensaux",internal_food:!0,internal_parking:1,public_transport:'RER D "Garges-Sarcelles" \xE0 10 mn',longitude:2.37924595,latitude:48.97520337,hidden:!1},"0950941G":{id:"0950941G",type:"M\xE9diap\xF4le",name:"Hub num\xE9rique Nikola Tesla",dep:"95",address:"16 bis avenue du Mar\xE9chal Foch",city:"Ecouen",conventioned:!1,external_food:!0,external_food_comment:"boulangerie et sup\xE9rettes \xE0 proximit\xE9",food_space:!1,food_space_comment:"",internal_food:!1,internal_parking:0,public_transport:"",longitude:2.369829998,latitude:49.02825798,hidden:!1},"0951230W":{id:"0951230W",type:"M\xE9diap\xF4le",name:"Coll\xE8ge Eug\xE9nie Cotton",dep:"95",address:"2 rue de Rethondes",city:"Argenteuil",conventioned:!0,external_food:!1,external_food_comment:"",food_space:!1,food_space_comment:"",internal_food:!1,internal_parking:0,public_transport:"",longitude:2.23008,latitude:48.94607,hidden:!1},"0782539L":{id:"0782539L",type:"M\xE9diap\xF4le",name:"Lyc\xE9e Saint Exup\xE9ry",dep:"78",address:"8 rue Marcel Fouque",city:"Mantes la Jolie",conventioned:!0,external_food:!1,external_food_comment:"",food_space:!1,food_space_comment:"",internal_food:!1,internal_parking:0,public_transport:"",longitude:1.69362,latitude:48.99749,hidden:!1},"0781898P":{id:"0781898P",type:"M\xE9diap\xF4le",name:"Lyc\xE9e Charles de Gaulle",dep:"78",address:"10 rue Gustave Eiffel",city:"Poissy",conventioned:!0,external_food:!1,external_food_comment:"",food_space:!1,food_space_comment:"",internal_food:!1,internal_parking:0,public_transport:"",longitude:2.06213,latitude:48.94709,hidden:!1},"0780179W":{id:"0780179W",type:"M\xE9diap\xF4le",name:"Coll\xE8ge JB de la Quintinye",dep:"78",address:"1 place de la Quintinye",city:"Noisy le Roi",conventioned:!0,external_food:!1,external_food_comment:"",food_space:!1,food_space_comment:"",internal_food:!1,internal_parking:0,public_transport:"",longitude:2.070491,latitude:48.83781,hidden:!1},"0920137Z":{id:"0920137Z",type:"M\xE9diap\xF4le",name:"Lyc\xE9e Guy de Maupassant",dep:"78",address:"52 rue Robert Schuman",city:"Colombes",conventioned:!0,external_food:!1,external_food_comment:"",food_space:!1,food_space_comment:"",internal_food:!1,internal_parking:0,public_transport:"",longitude:2.24224,latitude:48.92805,hidden:!1},"0920144G":{id:"0920144G",type:"M\xE9diap\xF4le",name:"Lyc\xE9e Agora",dep:"92",address:"120 rue de Verdun",city:"Puteaux",conventioned:!1,external_food:!1,external_food_comment:"",food_space:!1,food_space_comment:"",internal_food:!1,internal_parking:0,public_transport:"",longitude:2.23528,latitude:48.87778,hidden:!1},"0911025V":{id:"0911025V",type:"M\xE9diap\xF4le",name:"Coll\xE8ge Jean Lur\xE7at",dep:"91",address:"Avenue Aunette",city:"Ris-orangis",conventioned:!0,external_food:!1,external_food_comment:"",food_space:!1,food_space_comment:"",internal_food:!1,internal_parking:0,public_transport:"",longitude:2.41016,latitude:48.63895,hidden:!1},"0910628N":{id:"0910628N",type:"M\xE9diap\xF4le",name:"Lyc\xE9e Paul Belmondo",dep:"91",address:"23 Avenue de la Division Leclerc",city:"Arpajon",conventioned:!0,external_food:!1,external_food_comment:"",food_space:!1,food_space_comment:"",internal_food:!1,internal_parking:0,public_transport:"",longitude:2.24621,latitude:48.59662,hidden:!1},"0783427B":{id:"0783427B",type:"EAFC Lescot",name:"EAFC Lescot",dep:"78",address:"7 rue Pierre Lescot",city:"Versailles",conventioned:!0,external_food:!0,external_food_comment:"Boulangerie et autre commerce \xE0 proximit\xE9",food_space:!0,food_space_comment:"Oui, une salle du B\xE2t B",internal_food:!1,internal_parking:0,public_transport:'SNCF ligne L "Versailles rive droite"',longitude:2.1428,latitude:48.8106,hidden:!1}},mp=[{name:"Salle Descartes 1 (C101)",id:"0780246USalle Descartes 1 (C101)",place:"0780246U",type:"Salle de formation",capacity:25,wifi:!0,projection:!0,visio:!1,disabled:!1,computer:!1,computer_info:""},{name:"Salle Descartes 2 (C102)",id:"0780246USalle Descartes 2 (C102)",place:"0780246U",type:"Salle de formation",capacity:45,wifi:!0,projection:!0,visio:!1,disabled:!1,computer:!1,computer_info:""},{name:"Salle des actes (C1016)",id:"0780246USalle des actes (C1016)",place:"0780246U",type:"Salle de formation",capacity:15,wifi:!0,projection:!0,visio:!1,disabled:!1,computer:!1,computer_info:""},{name:"Salle des boiseries (C107)",id:"0780246USalle des boiseries (C107)",place:"0780246U",type:"Salle de formation",capacity:20,wifi:!0,projection:!0,visio:!1,disabled:!1,computer:!1,computer_info:""},{name:"Amphith\xE9\xE2tre",id:"0780246UAmphith\xE9\xE2tre",place:"0780246U",type:"Amphi",capacity:200,wifi:!0,projection:!0,visio:!1,disabled:!1,computer:!1,computer_info:""},{name:"Amphi",id:"0781949VAmphi",place:"0781949V",type:"Amphi",capacity:80,wifi:!0,projection:!0,visio:!0,disabled:!0,computer:!0,computer_info:"1 salle info de 35 PC c\xE2bl\xE9s B211"},{name:"CDI",id:"0781949VCDI",place:"0781949V",type:"Salle de formation",capacity:21,wifi:!0,projection:!0,visio:!1,disabled:!1,computer:!0,computer_info:"3 boxes \xE9quip\xE9s de 7 PC"},{name:"Webradio",id:"0781949VWebradio",place:"0781949V",type:"Studio radio",capacity:-1,wifi:!0,projection:!0,visio:!1,disabled:!1,computer:!1,computer_info:""},{name:"B 211",id:"0781949VB 211",place:"0781949V",type:"Salle informatique",capacity:35,wifi:!0,projection:!0,visio:!1,disabled:!1,computer:!0,computer_info:"35 PC"},{name:"en plus de l'amphi (130pers), salles C11 (100 pl), salle verte (25 pl), salle mauve (30 pl)",id:"0783140Pen plus de l'amphi (130pers), salles C11 (100 pl), salle verte (25 pl), salle mauve (30 pl)",place:"0783140P",type:"Amphi",capacity:130,wifi:!0,projection:!0,visio:!0,disabled:!0,computer:!0,computer_info:""},{name:"salle C 11",id:"0783140Psalle C 11",place:"0783140P",type:"Salle de formation",capacity:100,wifi:!0,projection:!0,visio:!1,disabled:!1,computer:!1,computer_info:""},{name:"salle verte",id:"0783140Psalle verte",place:"0783140P",type:"Salle de formation",capacity:30,wifi:!0,projection:!0,visio:!1,disabled:!1,computer:!1,computer_info:""},{name:"salle mauve",id:"0783140Psalle mauve",place:"0783140P",type:"Salle de formation",capacity:30,wifi:!0,projection:!0,visio:!1,disabled:!1,computer:!1,computer_info:""},{name:"A 2",id:"0783140PA 2",place:"0783140P",type:"Salle informatique",capacity:36,wifi:!0,projection:!0,visio:!1,disabled:!1,computer:!0,computer_info:"36 PC"},{name:"A 3",id:"0783140PA 3",place:"0783140P",type:"Salle informatique",capacity:24,wifi:!0,projection:!0,visio:!1,disabled:!1,computer:!0,computer_info:"24 PC"},{name:"A 5",id:"0783140PA 5",place:"0783140P",type:"Salle informatique",capacity:15,wifi:!0,projection:!0,visio:!1,disabled:!1,computer:!0,computer_info:"15 PC"},{name:"Amphi K",id:"0782549XAmphi K",place:"0782549X",type:"Amphi",capacity:110,wifi:!0,projection:!0,visio:!0,disabled:!0,computer:!0,computer_info:"OUI "},{name:"E012",id:"0782549XE012",place:"0782549X",type:"Salle de formation",capacity:80,wifi:!0,projection:!0,visio:!1,disabled:!1,computer:!0,computer_info:""},{name:"D104",id:"0782549XD104",place:"0782549X",type:"Salle de formation",capacity:80,wifi:!0,projection:!0,visio:!1,disabled:!1,computer:!0,computer_info:""},{name:"F010",id:"0782549XF010",place:"0782549X",type:"Salle de formation",capacity:30,wifi:!0,projection:!0,visio:!1,disabled:!1,computer:!0,computer_info:""},{name:"F012",id:"0782549XF012",place:"0782549X",type:"Salle de formation",capacity:15,wifi:!0,projection:!0,visio:!1,disabled:!1,computer:!0,computer_info:""},{name:"Amphi",id:"0911913KAmphi",place:"0911913K",type:"Amphi",capacity:140,wifi:!0,projection:!0,visio:!1,disabled:!1,computer:!1,computer_info:""},{name:"salle de r\xE9union",id:"0911913Ksalle de r\xE9union",place:"0911913K",type:"Salle de formation",capacity:40,wifi:!0,projection:!0,visio:!1,disabled:!1,computer:!1,computer_info:""},{name:"5 \xE0 7 salles de formation possibles pour ateliers",id:"0911913K5 \xE0 7 salles de formation possibles pour ateliers",place:"0911913K",type:"Salle de formation",capacity:36,wifi:!0,projection:!0,visio:!1,disabled:!1,computer:!1,computer_info:""},{name:"salle polyvalente occup\xE9e par les \xE9l\xE8ves mardis et mercredis",id:"0910622Gsalle polyvalente occup\xE9e par les \xE9l\xE8ves mardis et mercredis",place:"0910622G",type:"Salle de r\xE9union",capacity:100,wifi:!0,projection:!0,visio:!1,disabled:!1,computer:!0,computer_info:""},{name:"salle possible selon EdT",id:"0910622Gsalle possible selon EdT",place:"0910622G",type:"Salle de formation",capacity:-1,wifi:!0,projection:!0,visio:!1,disabled:!1,computer:!1,computer_info:""},{name:"Amphi",id:"0910627MAmphi",place:"0910627M",type:"Amphi",capacity:250,wifi:!0,projection:!0,visio:!1,disabled:!1,computer:!1,computer_info:""},{name:"salle annexe",id:"0910627Msalle annexe",place:"0910627M",type:"Salle de formation",capacity:50,wifi:!0,projection:!0,visio:!1,disabled:!1,computer:!1,computer_info:""},{name:"Th\xE9\xE2tre",id:"0911251RTh\xE9\xE2tre",place:"0911251R",type:"Amphi",capacity:140,wifi:!0,projection:!0,visio:!0,disabled:!0,computer:!1,computer_info:""},{name:'Salle "piano"',id:'0911251RSalle "piano"',place:"0911251R",type:"Salle de formation",capacity:20,wifi:!0,projection:!0,visio:!1,disabled:!1,computer:!1,computer_info:""},{name:"Amphi",id:"0921230MAmphi",place:"0921230M",type:"Amphi",capacity:228,wifi:!0,projection:!0,visio:!1,disabled:!1,computer:!0,computer_info:""},{name:"R\xE9union",id:"0921230MR\xE9union",place:"0921230M",type:"Salle de r\xE9union",capacity:70,wifi:!0,projection:!0,visio:!1,disabled:!1,computer:!0,computer_info:""},{name:"Formation",id:"0921230MFormation",place:"0921230M",type:"Salle de formation",capacity:30,wifi:!0,projection:!0,visio:!1,disabled:!1,computer:!0,computer_info:""},{name:"GRETA 1",id:"0921230MGRETA 1",place:"0921230M",type:"Salle de formation",capacity:15,wifi:!0,projection:!0,visio:!1,disabled:!1,computer:!0,computer_info:""},{name:"GRETA 2",id:"0921230MGRETA 2",place:"0921230M",type:"Salle de formation",capacity:15,wifi:!0,projection:!0,visio:!1,disabled:!1,computer:!0,computer_info:""},{name:"GRETA 3",id:"0921230MGRETA 3",place:"0921230M",type:"Salle de formation",capacity:15,wifi:!0,projection:!0,visio:!1,disabled:!1,computer:!0,computer_info:""},{name:"GRETA 4",id:"0921230MGRETA 4",place:"0921230M",type:"Salle de formation",capacity:15,wifi:!0,projection:!0,visio:!1,disabled:!1,computer:!0,computer_info:""},{name:"Amphi",id:"0922149IAmphi",place:"0922149I",type:"Amphi",capacity:220,wifi:!0,projection:!0,visio:!1,disabled:!1,computer:!1,computer_info:""},{name:"R\xE9union",id:"0922149IR\xE9union",place:"0922149I",type:"Salle de r\xE9union",capacity:20,wifi:!0,projection:!0,visio:!1,disabled:!1,computer:!1,computer_info:""},{name:"Formation 1",id:"0922149IFormation 1",place:"0922149I",type:"Salle de formation",capacity:30,wifi:!0,projection:!0,visio:!1,disabled:!1,computer:!1,computer_info:""},{name:"Formation 2",id:"0922149IFormation 2",place:"0922149I",type:"Salle de formation",capacity:30,wifi:!0,projection:!0,visio:!1,disabled:!1,computer:!1,computer_info:""},{name:"Formation 3",id:"0922149IFormation 3",place:"0922149I",type:"Salle de formation",capacity:30,wifi:!0,projection:!0,visio:!1,disabled:!1,computer:!1,computer_info:""},{name:"Th\xE9\xE2tre",id:"0920149MTh\xE9\xE2tre",place:"0920149M",type:"Amphi",capacity:180,wifi:!0,projection:!0,visio:!1,disabled:!1,computer:!0,computer_info:"VPI + ORDI"},{name:"Salle des actes",id:"0920149MSalle des actes",place:"0920149M",type:"Salle de formation",capacity:40,wifi:!0,projection:!0,visio:!1,disabled:!1,computer:!0,computer_info:"VPI +ORDI"},{name:"Jullien",id:"0920149MJullien",place:"0920149M",type:"Salle de formation",capacity:40,wifi:!0,projection:!0,visio:!1,disabled:!1,computer:!0,computer_info:"ENI +ORDI"},{name:"Mansart",id:"0920149MMansart",place:"0920149M",type:"Salle de r\xE9union",capacity:19,wifi:!0,projection:!0,visio:!1,disabled:!1,computer:!0,computer_info:"ENI +ORDI"},{name:"Amphi",id:"0922801VAmphi",place:"0922801V",type:"Amphi",capacity:100,wifi:!1,projection:!1,visio:!1,disabled:!1,computer:!1,computer_info:""},{name:"F 201",id:"0922801VF 201",place:"0922801V",type:"Salle de formation",capacity:-1,wifi:!1,projection:!1,visio:!1,disabled:!1,computer:!1,computer_info:""},{name:"Formation 1",id:"0922801VFormation 1",place:"0922801V",type:"Salle de formation",capacity:18,wifi:!1,projection:!1,visio:!1,disabled:!1,computer:!1,computer_info:""},{name:"Formation 2",id:"0922801VFormation 2",place:"0922801V",type:"Salle de formation",capacity:18,wifi:!1,projection:!1,visio:!1,disabled:!1,computer:!1,computer_info:""},{name:"G112",id:"0951104JG112",place:"0951104J",type:"Salle de conf\xE9rence",capacity:120,wifi:!0,projection:!0,visio:!0,disabled:!0,computer:!0,computer_info:""},{name:"G101",id:"0951104JG101",place:"0951104J",type:"Salle de formation",capacity:30,wifi:!0,projection:!0,visio:!0,disabled:!0,computer:!0,computer_info:""},{name:"G108",id:"0951104JG108",place:"0951104J",type:"Salle de formation",capacity:30,wifi:!0,projection:!0,visio:!1,disabled:!1,computer:!0,computer_info:""},{name:"A103",id:"0951104JA103",place:"0951104J",type:"Salle de formation",capacity:30,wifi:!0,projection:!0,visio:!1,disabled:!1,computer:!0,computer_info:""},{name:"Foyer",id:"0951104JFoyer",place:"0951104J",type:"Salle de r\xE9union",capacity:40,wifi:!0,projection:!0,visio:!1,disabled:!1,computer:!0,computer_info:""},{name:"salle 18",id:"0950666Hsalle 18",place:"0950666H",type:"Salle de r\xE9union",capacity:75,wifi:!0,projection:!0,visio:!0,disabled:!0,computer:!0,computer_info:"OUI "},{name:"salle 316",id:"0950666Hsalle 316",place:"0950666H",type:"Salle de formation",capacity:50,wifi:!0,projection:!0,visio:!1,disabled:!1,computer:!0,computer_info:"une salle \xE0 16 postes + une salle \xE0 20 postes"},{name:"formation",id:"0950657Yformation",place:"0950657Y",type:"Salle de formation",capacity:30,wifi:!0,projection:!0,visio:!1,disabled:!1,computer:!0,computer_info:"OUI 12 PC"},{name:"r\xE9union",id:"0950657Yr\xE9union",place:"0950657Y",type:"Salle de r\xE9union",capacity:50,wifi:!0,projection:!0,visio:!1,disabled:!1,computer:!1,computer_info:""},{name:"R\xE9fectoire",id:"0950723VR\xE9fectoire",place:"0950723V",type:"Salle de conf\xE9rence",capacity:200,wifi:!0,projection:!0,visio:!1,disabled:!1,computer:!1,computer_info:""},{name:"salle 254",id:"0950723Vsalle 254",place:"0950723V",type:"Salle de formation",capacity:24,wifi:!0,projection:!0,visio:!0,disabled:!0,computer:!1,computer_info:""},{name:"salle",id:"0950723Vsalle",place:"0950723V",type:"Salle de formation",capacity:30,wifi:!0,projection:!0,visio:!1,disabled:!1,computer:!0,computer_info:"OUI 30 POSTES"},{name:"Einstein",id:"0950941GEinstein",place:"0950941G",type:"Salle informatique",capacity:25,wifi:!1,projection:!1,visio:!1,disabled:!1,computer:!0,computer_info:"15 PC portables / PAS de PC formateur"},{name:"",id:"0951230W",place:"0951230W",type:"Salle informatique",capacity:35,wifi:!1,projection:!1,visio:!1,disabled:!1,computer:!0,computer_info:"20 PC fixe + 1 PC Formateur sous Windows 10 et avec droits administrateurs"},{name:"",id:"0951230W",place:"0951230W",type:"Salle de r\xE9union",capacity:20,wifi:!1,projection:!1,visio:!1,disabled:!1,computer:!0,computer_info:"1 PC portable Formateur"},{name:"B108",id:"0951104JB108",place:"0951104J",type:"Salle informatique",capacity:20,wifi:!0,projection:!0,visio:!1,disabled:!1,computer:!0,computer_info:"14 PC fixe + 1 poste formateur sous windows 10 avec droits administrateurs"},{name:"B101",id:"0951104JB101",place:"0951104J",type:"Salle informatique",capacity:20,wifi:!0,projection:!0,visio:!1,disabled:!1,computer:!0,computer_info:"16 portables, dont un pour le formateur sous windows seven avec droits administrateurs"},{name:"M\xE9diap\xF4le",id:"0782539LM\xE9diap\xF4le",place:"0782539L",type:"Salle de r\xE9union",capacity:32,wifi:!1,projection:!1,visio:!1,disabled:!1,computer:!0,computer_info:"15 portables dont un pour formateur sous windows 7"},{name:"Salle 1",id:"0782539LSalle 1",place:"0782539L",type:"Salle informatique",capacity:16,wifi:!1,projection:!1,visio:!1,disabled:!1,computer:!0,computer_info:"15 portables dont un pour formateur sous windows 7"},{name:"Salle 2",id:"0782539LSalle 2",place:"0782539L",type:"Salle informatique",capacity:16,wifi:!1,projection:!1,visio:!1,disabled:!1,computer:!0,computer_info:"15 portables dont un pour formateur sous windows 7"},{name:"Mediapole - S108",id:"0781898PMediapole - S108",place:"0781898P",type:"Salle informatique",capacity:25,wifi:!1,projection:!1,visio:!1,disabled:!1,computer:!0,computer_info:"13 portables, 12 fixes"},{name:"B22 - Mediapole",id:"0780179WB22 - Mediapole",place:"0780179W",type:"Salle informatique",capacity:35,wifi:!1,projection:!1,visio:!1,disabled:!1,computer:!0,computer_info:`14 PC fixe + 1 poste formateur sous windows 10
16 PC portables sous windows 10
int\xE9gr\xE9s au r\xE9seau SE4 du Mediapole
1 imprimante 3D UP Box+`},{name:"Mediapole",id:"0781949VMediapole",place:"0781949V",type:"Salle informatique",capacity:18,wifi:!1,projection:!1,visio:!1,disabled:!1,computer:!0,computer_info:"12 PC fixes et 1 PC fixe formateur"},{name:"Mediapole",id:"0782549XMediapole",place:"0782549X",type:"Salle informatique",capacity:15,wifi:!0,projection:!0,visio:!1,disabled:!1,computer:!0,computer_info:`12 PC tout obsol\xE8tes (2013),
imprimante UPBOX
1 nas non install\xE9
1 imprimante 3D UPBOX+
1 cam\xE9ra pour robot`},{name:"A003",id:"0920137ZA003",place:"0920137Z",type:"Salle informatique",capacity:20,wifi:!1,projection:!1,visio:!1,disabled:!1,computer:!0,computer_info:"15 PC"},{name:"B220",id:"0920144GB220",place:"0920144G",type:"Salle de r\xE9union",capacity:10,wifi:!1,projection:!1,visio:!1,disabled:!1,computer:!1,computer_info:""},{name:"B218",id:"0920144GB218",place:"0920144G",type:"Salle informatique",capacity:28,wifi:!1,projection:!1,visio:!1,disabled:!1,computer:!0,computer_info:`10 pc portables + un mac
(obsol\xE8tes + de 10 ans)`},{name:"M\xE9diap\xF4le 1",id:"0920149MM\xE9diap\xF4le 1",place:"0920149M",type:"Salle informatique",capacity:19,wifi:!1,projection:!1,visio:!1,disabled:!1,computer:!0,computer_info:"14 tablettes surface pro 4 (Windows 10)"},{name:"M\xE9diap\xF4le 2",id:"0920149MM\xE9diap\xF4le 2",place:"0920149M",type:"Salle informatique",capacity:12,wifi:!1,projection:!1,visio:!1,disabled:!1,computer:!0,computer_info:"18 ipad pro"},{name:"Salle de formation",id:"0911913KSalle de formation",place:"0911913K",type:"Salle informatique",capacity:25,wifi:!1,projection:!1,visio:!1,disabled:!1,computer:!0,computer_info:`16 postes stagiaires (fixes et portables) + 1 Pc formateur W10 int\xE9gr\xE9s au domaine SE4 du MP
quelques portables sous Linux
6 tablettes Galaxy Tab A10`},{name:"Salle de conf\xE9rence",id:"0911025VSalle de conf\xE9rence",place:"0911025V",type:"Salle de conf\xE9rence",capacity:25,wifi:!1,projection:!1,visio:!1,disabled:!1,computer:!1,computer_info:""},{name:"Salle M\xE9li\xE8s",id:"0911025VSalle M\xE9li\xE8s",place:"0911025V",type:"Salle informatique",capacity:15,wifi:!1,projection:!1,visio:!1,disabled:!1,computer:!0,computer_info:"15 postes fixes sous windows 10, avec un PC formateur, tous int\xE9gr\xE9s au domaine SE4"},{name:"Salle Lumi\xE8re",id:"0911025VSalle Lumi\xE8re",place:"0911025V",type:"Salle informatique",capacity:15,wifi:!1,projection:!1,visio:!1,disabled:!1,computer:!0,computer_info:"15 postes fixes sous windows 10, avec un PC formateur, tous int\xE9gr\xE9s au domaine SE4"},{name:"Studio",id:"0911025VStudio",place:"0911025V",type:"Studio radio",capacity:15,wifi:!1,projection:!1,visio:!1,disabled:!1,computer:!0,computer_info:"Studio : un PC formateur, un VP, et 6 ordinateurs portables, sous W10, tous int\xE9gr\xE9s au domaine SE4, ainsi qu'une webradio fixe, et un fond bleu pour tournage et incrustation"},{name:"Salle C202",id:"0910628NSalle C202",place:"0910628N",type:"Salle informatique",capacity:15,wifi:!1,projection:!1,visio:!1,disabled:!1,computer:!0,computer_info:"15 postes fixes sous windows 10, avec un PC formateur, tous int\xE9gr\xE9s au domaine SE4"},{name:"B101",id:"0783427BB101",place:"0783427B",type:"Salle de formation",capacity:32,wifi:!0,projection:!0,visio:!1,disabled:!1,computer:!1,computer_info:""},{name:"B102",id:"0783427BB102",place:"0783427B",type:"Salle informatique",capacity:10,wifi:!0,projection:!0,visio:!1,disabled:!1,computer:!0,computer_info:"10 PC fixes"},{name:"B103",id:"0783427BB103",place:"0783427B",type:"Salle de formation",capacity:23,wifi:!0,projection:!0,visio:!1,disabled:!1,computer:!1,computer_info:""},{name:"B104",id:"0783427BB104",place:"0783427B",type:"Salle informatique",capacity:20,wifi:!0,projection:!0,visio:!1,disabled:!1,computer:!0,computer_info:"20 PC fixes"},{name:"B201",id:"0783427BB201",place:"0783427B",type:"Salle de formation",capacity:32,wifi:!0,projection:!0,visio:!1,disabled:!1,computer:!1,computer_info:""},{name:"B202",id:"0783427BB202",place:"0783427B",type:"Salle de formation",capacity:24,wifi:!0,projection:!0,visio:!1,disabled:!1,computer:!1,computer_info:""},{name:"B203",id:"0783427BB203",place:"0783427B",type:"Salle informatique",capacity:20,wifi:!0,projection:!0,visio:!1,disabled:!1,computer:!0,computer_info:"20 PC fixes"},{name:"B204",id:"0783427BB204",place:"0783427B",type:"Salle informatique",capacity:20,wifi:!0,projection:!0,visio:!1,disabled:!1,computer:!0,computer_info:"20 PC fixes"},{name:"B001",id:"0783427BB001",place:"0783427B",type:"Salle de conf\xE9rence",capacity:70,wifi:!0,projection:!0,visio:!1,disabled:!1,computer:!1,computer_info:""},{name:"B002",id:"0783427BB002",place:"0783427B",type:"Salle de formation",capacity:25,wifi:!0,projection:!0,visio:!1,disabled:!1,computer:!1,computer_info:""},{name:"E00",id:"0783427BE00",place:"0783427B",type:"Salle de r\xE9union",capacity:10,wifi:!0,projection:!0,visio:!1,disabled:!1,computer:!1,computer_info:""},{name:"E30",id:"0783427BE30",place:"0783427B",type:"Salle de conf\xE9rence",capacity:40,wifi:!0,projection:!0,visio:!0,disabled:!0,computer:!1,computer_info:""},{name:"C00",id:"0783427BC00",place:"0783427B",type:"Salle de r\xE9union",capacity:14,wifi:!0,projection:!0,visio:!1,disabled:!1,computer:!1,computer_info:""}],_p=["Salle de formation","Amphi","Studio radio","Salle informatique","Salle de r\xE9union","Salle de conf\xE9rence"];var pp={places:gp,rooms:mp,all_types:_p};const vp=At("div",{class:"text-h6"},"Salles disponibles",-1),yp=At("img",{src:"https://cdn.quasar.dev/img/mountains.jpg"},null,-1),xp={class:"text-h6"},Sp={key:0},Cp=At("br",null,null,-1),Ep=At("br",null,null,-1),bp={class:"q-gutter-xs"},wp=At("div",{class:"text-h6"},"Salles",-1),Rp=At("div",null,[At("div",{class:"text-weight-bold"},"Rechercher un lieu de fromation")],-1),Tp=At("label",{for:"sl"},"Capacit\xE9",-1),kp=Dc({__name:"IndexPage",setup(i){const e=U(),t=U(pp);let n;const s=U(!1);let r=U();const o=U(!1),a=U(!1),l=U({type:null,capacity:1,projection:!1,computer:!1}),u=U(null);function c(){l.value.type=null,u.value=null,l.value.capacity=1,l.value.projection=!1,l.value.computer=!1}const d=C(()=>l.value.type!==null||u.value!=null||l.value.computer!=!1||l.value.projection!=!1||l.value.capacity!=1),h=C(()=>l.value.type!==null||l.value.computer!=!1||l.value.projection!=!1||l.value.capacity!=1),f=C(()=>{let y=[];return t.value.rooms.forEach(_=>y.push(_)),l.value.type!==null&&(y=y.filter(_=>_.type==l.value.type)),l.value.capacity!==1&&(y=y.filter(_=>_.capacity>l.value.capacity)),l.value.projection==!0&&(y=y.filter(_=>_.projection==!0)),l.value.computer==!0&&(y=y.filter(_=>_.computer==!0)),y});ge([f,u],([y,_],[v,S])=>{for(let b in t.value.places)t.value.places[b].hidden=!0,console.log("CHANGED");for(let b of y)t.value.places[b.place].hidden=!1;if(_!==null)for(let b in t.value.places)t.value.places[b].hidden||(t.value.places[b].hidden=_!==t.value.places[b].dep);m()});const g={route:new Gn({stroke:new Yo({width:6,color:[237,212,0,.8]})}),icon:new Gn({image:new Ko({anchor:[.5,1],src:"pin.png",width:40})})};Yn(()=>{n=new am({layers:[new i_({source:new Ym})],target:e.value,view:new Dt({center:[225369.546496334,6247004404217467e-9],zoom:10})}),m(),n.on("pointermove",function(y){const _=n.getEventPixel(y.originalEvent),v=n.hasFeatureAtPixel(_);n.getTarget().style.cursor=v?"pointer":""}),n.on("click",function(y){const _=n.forEachFeatureAtPixel(y.pixel,function(v){return v});!_||(r.value=t.value.places[_.values_.id],s.value=!0)})});function m(){n.getLayers().forEach(v=>{v.get("name")&&v.get("name")=="pin"&&n.removeLayer(v)});let y=[];for(let v in t.value.places)t.value.places[v].hidden||y.push(new fp({geometry:new Du(hf([t.value.places[v].longitude,t.value.places[v].latitude])),type:"icon",id:t.value.places[v].id}));var _=new rp({name:"pin",source:new dp({features:y}),style:function(v){return g[v.get("type")]}});n.addLayer(_)}const p=C(()=>r.value==null?[]:f.value.filter(y=>y.place==r.value.id));return(y,_)=>(we(),Fe(ah,null,{default:Z(()=>[ee(xs,{modelValue:a.value,"onUpdate:modelValue":_[0]||(_[0]=v=>a.value=v),seamless:"",position:"left"},{default:Z(()=>[ee(ts,{style:{width:"350px",height:"90vh"}},{default:Z(()=>[ee(ca,null,{default:Z(()=>[vp,ee(es),vs((we(),Fe(ei,{dense:"",flat:"",icon:"close"},{default:Z(()=>[ee(ua,{class:"bg-white text-primary"},{default:Z(()=>[Re("Close")]),_:1})]),_:1})),[[Pa]])]),_:1}),ee(Br),ee(yt,{style:{"max-height":"85vh"},class:"scroll"},{default:Z(()=>[ee(da,null,{default:Z(()=>[(we(!0),hr(sa,null,na(f.value,v=>vs((we(),Fe(co,{clickable:"",key:v.id,onClick:S=>y.selectRoom(v)},{default:Z(()=>[ee(wn,null,{default:Z(()=>[Re(Xt(v.name),1)]),_:2},1024)]),_:2},1032,["onClick"])),[[zl]])),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),ee(xs,{modelValue:s.value,"onUpdate:modelValue":_[5]||(_[5]=v=>s.value=v),"transition-show":"slide-up","transition-hide":"slide-down"},{default:Z(()=>[ee(ts,{class:""},{default:Z(()=>[ee(ca,null,{default:Z(()=>[ee(es),vs((we(),Fe(ei,{dense:"",flat:"",icon:"close"},{default:Z(()=>[ee(ua,{class:"bg-white text-primary"},{default:Z(()=>[Re("Close")]),_:1})]),_:1})),[[Pa]])]),_:1}),yp,ee(yt,null,{default:Z(()=>[At("div",xp,Xt(Qt(r).name),1),Qt(r).internal_food?(we(),Fe(lt,{key:0,dense:"",icon:"mdi-silverware"},{default:Z(()=>[Re("Restauration scolaire")]),_:1})):nt("",!0),Qt(r).food_space?(we(),Fe(lt,{key:1,dense:"",icon:"mdi-table-picnic"},{default:Z(()=>[Re("Espace repas")]),_:1})):nt("",!0),Qt(r).parking>0?(we(),Fe(lt,{key:2,v:"",dense:"",icon:"mdi-parking"},{default:Z(()=>[Qt(r).internal_parking==1?(we(),hr("span",Sp,"(Formateur seulement)")):nt("",!0)]),_:1})):nt("",!0)]),_:1}),ee(yt,{class:"q-pt-none"},{default:Z(()=>[Re(Xt(Qt(r).address)+" - "+Xt(Qt(r).city)+" ",1),Cp,ee(qt,{name:"mdi-bus"}),Re(" "+Xt(Qt(r).public_transport)+" ",1),Ep]),_:1}),h.value?(we(),Fe(yt,{key:0},{default:Z(()=>[Re(" Vos filtres... "),At("div",bp,[l.value.capacity!=1?(we(),Fe(lt,{key:0,dense:"",removable:"",onRemove:_[1]||(_[1]=v=>l.value.capacity=1),color:"primary","text-color":"white",icon:"cake"},{default:Z(()=>[Re(" Capacit\xE9 > "+Xt(l.value.capacity),1)]),_:1})):nt("",!0),l.value.computer!=!1?(we(),Fe(lt,{key:1,removable:"",dense:"",onRemove:_[2]||(_[2]=v=>l.value.computer=!1),color:"secondary","text-color":"white",icon:"mdi-desktop-classic"},{default:Z(()=>[Re(" Equipement informatique ")]),_:1})):nt("",!0),l.value.projection!=!1?(we(),Fe(lt,{key:2,removable:"",dense:"",onRemove:_[3]||(_[3]=v=>l.value.projection=!1),color:"secondary","text-color":"white",icon:"mdi-projector"},{default:Z(()=>[Re(" Equipement de projection ")]),_:1})):nt("",!0),l.value.type!=null?(we(),Fe(lt,{key:3,removable:"",dense:"",onRemove:_[4]||(_[4]=v=>l.value.type=null),color:"warning","text-color":"white",icon:"mdi-map-marker"},{default:Z(()=>[Re(Xt(l.value.type),1)]),_:1})):nt("",!0)])]),_:1})):nt("",!0),ee(yt,null,{default:Z(()=>[wp,ee(da,{bordered:"",class:"rounded-borders"},{default:Z(()=>[(we(!0),hr(sa,null,na(p.value,v=>(we(),Fe(yd,{"expand-separator":"",label:v.name,caption:v.type,key:v.name},{default:Z(()=>[ee(ts,null,{default:Z(()=>[ee(yt,null,{default:Z(()=>[ee(lt,{icon:"mdi-account-group"},{default:Z(()=>[Re(Xt(v.capacity)+" places",1)]),_:2},1024),v.wifi?(we(),Fe(lt,{key:0,icon:"wifi"},{default:Z(()=>[Re("Wifi")]),_:1})):nt("",!0),v.disabled?(we(),Fe(lt,{key:1,icon:"fa-solid fa-wheelchair"},{default:Z(()=>[Re("Acc\xE8s PMR")]),_:1})):nt("",!0),v.projection?(we(),Fe(lt,{key:2,icon:"mdi-projector"},{default:Z(()=>[Re("Projection")]),_:1})):nt("",!0),v.visio?(we(),Fe(lt,{key:3,icon:"mdi-laptop"},{default:Z(()=>[Re("Visioconf\xE9rence")]),_:1})):nt("",!0),v.computer?(we(),Fe(lt,{key:4,icon:"mdi-desktop-classic"},{default:Z(()=>[Re("Equipement informatique")]),_:1})):nt("",!0)]),_:2},1024),ee(yt,null,{default:Z(()=>[Re(Xt(v.computer_info),1)]),_:2},1024),ee(va,null,{default:Z(()=>[ee(es),ee(ei,{color:"primary",label:"R\xE9server"})]),_:1})]),_:2},1024)]),_:2},1032,["label","caption"]))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),ee(xs,{modelValue:o.value,"onUpdate:modelValue":_[12]||(_[12]=v=>o.value=v),position:"top"},{default:Z(()=>[ee(ts,null,{default:Z(()=>[ee(yt,null,{default:Z(()=>[Rp,ee(yt,null,{default:Z(()=>[ee(Ta,{label:"D\xE9partement",modelValue:u.value,"onUpdate:modelValue":_[6]||(_[6]=v=>u.value=v),options:["78","91","92","95"],clearable:""},null,8,["modelValue"])]),_:1}),ee(yt,null,{default:Z(()=>[ee(Ta,{label:"Type de salle formation",modelValue:l.value.type,"onUpdate:modelValue":_[7]||(_[7]=v=>l.value.type=v),options:t.value.all_types,clearable:""},null,8,["modelValue","options"])]),_:1}),ee(yt,null,{default:Z(()=>[ee(Ia,{modelValue:l.value.projection,"onUpdate:modelValue":_[8]||(_[8]=v=>l.value.projection=v),label:"Equipement de projection"},null,8,["modelValue"]),ee(Ia,{modelValue:l.value.computer,"onUpdate:modelValue":_[9]||(_[9]=v=>l.value.computer=v),label:"Equipement informatique"},null,8,["modelValue"])]),_:1}),ee(yt,null,{default:Z(()=>[Tp,ee(nh,{id:"sl",class:"q-mt-xl",modelValue:l.value.capacity,"onUpdate:modelValue":_[10]||(_[10]=v=>l.value.capacity=v),color:"primary",markers:"","marker-labels":[{value:1,label:"1 personne"},{value:99,label:"+ de 100 personnes"}],min:0,max:100},null,8,["modelValue"])]),_:1})]),_:1}),ee(va,null,{default:Z(()=>[ee(ei,{onClick:c,color:"warning"},{default:Z(()=>[Re("R\xE9initialiser")]),_:1}),ee(es),ee(ei,{onClick:_[11]||(_[11]=v=>o.value=!1),color:"primary"},{default:Z(()=>[Re("Fermer")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),At("div",{ref_key:"mapItem",ref:e,style:{width:"100wv",height:"100vh"}},null,512),ee(Cr,{position:"top"},{default:Z(()=>[d.value?(we(),Fe(sh,{key:0,"inline-actions":"",class:"text-white bg-primary"},{action:Z(()=>[ee(ei,{style:{"z-index":"100"},flat:"",color:"white",label:"DESACTIVER LES FILTRES",onClick:c})]),default:Z(()=>[Re(" Vous avez des filtres actifs ")]),_:1})):nt("",!0)]),_:1}),ee(Cr,{position:"bottom-right",offset:[18,18]},{default:Z(()=>[ee(ei,{fab:"",icon:"mdi-magnify",color:"accent",onClick:_[13]||(_[13]=v=>o.value=!0)})]),_:1}),ee(Cr,{position:"bottom-left",offset:[18,18]},{default:Z(()=>[ee(ei,{fab:"",icon:"mdi-menu",color:"primary",onClick:_[14]||(_[14]=v=>a.value=!0)})]),_:1})]),_:1}))}});export{kp as default};
